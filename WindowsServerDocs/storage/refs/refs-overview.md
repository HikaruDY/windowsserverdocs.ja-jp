---
title: Resilient File System (ReFS) の概要
ms.prod: windows-server-threshold
ms.author: gawatu
ms.manager: mchad
ms.technology: storage-file-systems
ms.topic: article
author: gawatu
ms.date: 10/17/2018
ms.openlocfilehash: 75f13a715baa0c0943e1521662d6d318b19e075b
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59869753"
---
# <a name="resilient-file-system-refs-overview"></a>Resilient File System (ReFS) の概要

>適用対象:Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows Server (半期チャネル)

Resilient File System (ReFS) は、Microsoft の最新のファイル システムであり、データの最大限の可用性、さまざまなワークロードに対する大規模なデータ セットへの拡張、破損部分の回復によるデータの整合性を実現できるように設計されています。 拡大する一連の記憶域のシナリオに対処し、未来の技術革新の基盤を確立することを目指しています。

## <a name="key-benefits"></a>主な利点

### <a name="resiliency"></a>回復性

ReFS には、正確に破損を検出し、オンライン状態を維持しながら、それらの破損を修正できる新機能が導入されており、データの整合性と可用性が向上しています。 

- **整合性ストリーム** - ReFS は、メタデータのチェックサムと、必要に応じてファイル データのチェックサムを使用します。これにより、ReFS は破損を確実に検出できます。 
- **記憶域スペースの統合** - ミラー スペースやパリティ スペースと組み合わせて使用する場合、ReFS は記憶域スペースによって提供されるデータの代替コピーを使って、検出された破損を自動的に修復できます。 修復プロセスは、破損の領域のみに限定され、オンラインで実行されるため、ボリュームのダウンタイムを必要としません。
- **データの部分的な救済** - ボリュームが破損し、破損したデータの代替コピーが存在しない場合、ReFS は名前空間から破損したデータを削除します。 ReFS では、ほとんどの修正できない破損を処理している間、ボリュームをオンライン状態に保つことができます。ただし、まれに、ReFS でボリュームをオフラインにすることが必要になる場合もあります。
- **事前対応型のエラー修正** - ReFS では、読み取りと書き込みの前にデータを検証するだけでなく、<i></i>"スクラブ機能" と呼ばれる、データの整合性のスキャン機能が導入されています。 このスクラブ機能ではボリュームが定期的にスキャンされ、潜在的な破損部分を識別し、その破損データの修復を事前にトリガーします。 

### <a name="performance"></a>パフォーマンス

回復性の向上に加えて、ReFS には、パフォーマンスが重視される仮想化されたワークロードに関する新機能が導入されています。 リアルタイムでの階層の最適化、ブロックの複製、スパース VDL は、動的に多様なワークロードをサポートするように設計されている、ReFS の先進的な機能の一例です。

- **[ミラー アクセラレータを使用したパリティ](./mirror-accelerated-parity.md)** -ミラー アクセラレータを使用したパリティは、高パフォーマンス両方と、データの効率的なストレージの容量を提供します。 

    - パフォーマンスと容量効率の高い記憶域を提供するために、ReFS は、ボリュームを階層と呼ばれる 2 つの論理記憶域グループに分割します。 これらの階層ではそれぞれドライブと回復性の種類を設定でき、各階層をパフォーマンスまたは容量について最適化することができます。 構成の例の一部を以下に示します。 
    
      | パフォーマンス階層 | 容量階層 |
      |----------------|-----------------|
       ミラー SSD | ミラー HDD |
       ミラー SSD | パリティ SSD |
       ミラー SSD | パリティ HDD |
            
    - これらの階層を構成すると、ReFS はこれらの階層を使用して、ホット データには高速記憶域を、コールド データには容量効率の高い記憶域を提供します。
        - すべての書き込みはパフォーマンス階層で発生し、パフォーマンス階層に残っているデータの大規模なチャンクはリアルタイムで容量階層に効率的に移動されます。
        - ハイブリッド デプロイ (flash と HDD のドライブを混在させる) を使用して場合[記憶域スペース ダイレクトでは、キャッシュ](../storage-spaces/understand-the-cache.md)ことには、読み取りが高速化、断片化の特徴的な仮想化ワークロードをデータの影響を軽減します。 それ以外の場合、読み取り、オール フラッシュ デプロイを使用している場合でも発生するパフォーマンス レベル。

>[!NOTE]
>サーバーの展開では、ミラーリングによって高速化されたパリティは、[記憶域スペース ダイレクト](../storage-spaces/storage-spaces-direct-overview.md)でのみサポートされます。 ミラー アクセラレータを使用したパリティを使用して、アーカイブ、バックアップ ワークロードのみを使用することをお勧めします。 ランダムなワークロードを仮想化、およびその他の高パフォーマンスでは、パフォーマンス向上のための 3 方向ミラーの使用をお勧めします。

- **VM の操作の高速化** - ReFS では、仮想化されたワークロードのパフォーマンスを向上させる新機能が導入されています。
    - [ブロックの複製](./block-cloning.md) - ブロックの複製によってコピー操作が高速化されるため、VM のチェックポイントのマージ操作をすばやく実行し、影響を抑えることができます。
    - スパース VDL - ReFS では、スパース VDL によってファイルを迅速にセロ化することができ、固定 VHD を作成するために必要な時間が数十分からわずか数秒に短縮されます。


- **可変クラスター サイズ** - ReFS では、4 K と 64 K の両方のクラスター サイズをサポートしています。 ほとんどの展開で推奨されるクラスター サイズは 4 K ですが、サイズの大きい順次 IO ワークロードには 64 K クラスターが適しています。
    
    
### <a name="scalability"></a>スケーラビリティ
ReFS は、非常に大きなデータ セット (数百万テラバイト) をサポートするように設計されており、パフォーマンスを損なうことなく、以前のファイル システムよりも大きいスケールを実現します。 

## <a name="supported-deployments"></a>サポートされる展開

Microsoft が用に開発された NTFS 具体的にはさまざまな構成と、ワークロードでの汎用使用が、お客様は、可用性、回復性、および参照を提供するスケールを必要とする特別に、Microsoft は下で使用するため ReFS をサポート次の構成とシナリオ。 

>[!NOTE]
> すべての ReFS がサポートされている構成を使用する必要があります[Windows Server Catalog](https://www.WindowsServerCatalog.com)認定ハードウェア アプリケーション要件に対応します。

### <a name="storage-spaces-direct"></a>記憶域スペース ダイレクト

記憶域スペース ダイレクトへの ReFS の展開は、仮想化されたワークロードやネットワーク接続ストレージで推奨されるセットアップ方法です。 
- ミラーリングによって高速化されたパリティと[記憶域スペース ダイレクトのキャッシュ](../storage-spaces/understand-the-cache.md)によって、高パフォーマンスで容量効率の高い記憶域が提供されます。 
- ブロックの複製とスパース VDL の導入により、.vhdx ファイルの作成、マージ、拡張などの操作が大幅に高速化されます。
- 整合性ストリーム、オンラインの修復、および代替のデータのコピーは、ReFS を有効にし、検出、記憶域コント ローラーとメタデータとデータの両方で記憶域メディアの破損を修正して共同で、記憶域スペースが送信します。 
- ReFS は、拡張して大規模なデータ セットをサポートするための機能を提供します。 

### <a name="storage-spaces"></a>記憶域スペース

- 整合性ストリーム、オンラインの修復、および代替のデータのコピーは、ReFS を有効にして[記憶域スペース](../storage-spaces/overview.md)を共同でを検出して記憶域コント ローラーとメタデータとデータの両方で記憶域メディアの破損を修正します。
- また、記憶域スペースの展開では、ブロックの複製や ReFS が提供するスケーラビリティを利用することもできます。
- 共有 SAS エンクロー ジャーで ReFS 記憶域スペースを展開することは、アーカイブ データをホストしていると、ユーザーのドキュメントを格納するに適しています。

>[!NOTE]
> 記憶域スペース サポート ローカル非リムーバブル BusTypes SATA、SAS、NVME、経由で直接接続または HBA (RAID コント パススルー モードとも呼ばれます) を使用して接続します。

### <a name="basic-disks"></a>ベーシック ディスク

ベーシック ディスク上の ReFS を展開する方法は、ソフトウェアの独自の回復性と可用性ソリューションを実装するアプリケーションに最適です。 
- 独自の回復性と可用性のソフトウェア ソリューションを導入するアプリケーションには、整合性ストリーム、ブロックの複製、大規模なデータ セットに合わせてスケーリングしサポートする機能を活用できます。 


>[!NOTE]
> ベーシック ディスクには、ローカル非リムーバブル BusTypes SATA、SAS、NVME、または RAID を使用して直接接続が含まれます。 

### <a name="backup-target"></a>バックアップ先

バックアップ ターゲットをお勧め ReFS のデプロイは、アプリケーションとハードウェアが独自の回復性と可用性のソリューションを実装するに適しています。
- 独自の回復性と可用性のソフトウェア ソリューションを導入するアプリケーションには、整合性ストリーム、ブロックの複製、大規模なデータ セットに合わせてスケーリングしサポートする機能を活用できます。

>[!NOTE]
> バックアップ ターゲットには、上記のサポートされている構成が含まれます。 ファイバー チャネルおよび iSCSI San のサポートの詳細については、アプリケーションとストレージ アレイの製造元にお問い合わせください。 San、シン プロビジョニング、TRIM/UNMAP、またはオフロード データ転送 (ODX) などの機能は、必要な場合 NTFS 使用する必要があります。   

## <a name="feature-comparison"></a>機能の比較

### <a name="limits"></a>制限

| 機能       | ReFS                                        | NTFS |
|----------------|------------------------------------------------|-----------------------|
| ファイル名の最大長 | 255 Unicode 文字  | 255 Unicode 文字               |
| パス名の最大長 |32 K Unicode 文字 | 32 K Unicode 文字                |
| 最大ファイル サイズ | 35 PB (ペタバイト)  | 256 TB               |
| 最大ボリューム サイズ | 35 PB                           | 256 TB                |

### <a name="functionality"></a>機能

#### <a name="the-following-features-are-available-on-refs-and-ntfs"></a>ReFS と NTFS で使用できる機能は次のとおりです。

| 機能       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| BitLocker 暗号化 | 〇 | 〇 |
| データ重複除去 | 可<sup>1</sup> | 〇 |
| クラスター共有ボリューム (CSV) のサポート | 可<sup>2</sup> | 〇 |
| ソフト リンク | 〇 | 〇 |
| フェールオーバー クラスターのサポート | 〇 | 〇 |
| アクセス制御リスト | 〇 | 〇 |
| USN ジャーナル | 〇 | 〇 |
| 変更通知 | 〇 | 〇 |
| 接合ポイント | 〇 | 〇 |
| マウント ポイント | 〇 | 〇 |
| 再解析ポイント | 〇 | 〇 |
| ボリューム スナップショット | 〇 | 〇 |
| ファイル ID | 〇 | 〇 |
| oplock | 〇 | 〇 |
| スパース ファイル | 〇 | 〇 |
| 名前付きストリーム | 〇 | 〇 |
| 仮想プロビジョニング | 可 <sup>3</sup> | 〇 |
| オフロード データ転送 (ODX) | X | 〇 |
| Trim/unmap | 可 <sup>3</sup> | 〇 |
1. Windows Server バージョン 1709 以降で使用できます。
2. Windows Server 2012 R2 以降を使用できます。
3. 記憶域スペースのみ

#### <a name="the-following-features-are-only-available-on-refs"></a>ReFS のみで使用できる機能は次のとおりです。

| 機能       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| ブロックの複製 | 〇 | いいえ |
| スパース VDL | 〇 | X |
| ミラーリングによって高速化されたパリティ| 〇 (記憶域スペース ダイレクト上) | X |

#### <a name="the-following-features-are-unavailable-on-refs-at-this-time"></a>現時点では、ReFS で次の機能は利用できません。

| 機能       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| ファイル システムの圧縮 | いいえ | 〇 |
| ファイル システムの暗号化 | X | 〇 |
| トランザクション | X | 〇 |
| ハード リンク | X | 〇 |
| オブジェクト ID | X | 〇 |
| 短い形式の名前 | X | 〇 |
| 拡張属性 | いいえ | 〇 |
| ディスク クォータ | X | 〇 |
| 起動可能 | X | 〇 |
| ページ ファイル サポート | X | 〇 |
| リムーバブル メディアでのサポート | X | 〇 |


## <a name="see-also"></a>関連項目

-   [記憶域スペース ダイレクトの概要](../storage-spaces/storage-spaces-direct-overview.md)
-   [ReFS ブロック複製](block-cloning.md)
-   [ReFS の整合性ストリーム](integrity-streams.md)

