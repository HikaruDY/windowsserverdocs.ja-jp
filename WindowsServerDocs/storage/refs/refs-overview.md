---
title: "Resilient File System (ReFS) の概要"
ms.prod: windows-server-threshold
ms.author: gawatu
ms.manager: dmoss
ms.technology: storage-file-systems
ms.topic: article
author: gawatu
ms.date: 1/3/2016
ms.assetid: 
ms.openlocfilehash: 4460df978f2a3d5e30e43b82cf952ed37f3d91a9
ms.sourcegitcommit: 583355400f6b0d880dc0ac6bc06f0efb50d674f7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2017
---
# <a name="resilient-file-system-refs-overview"></a>Resilient File System (ReFS) の概要
>適用対象: Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

Resilient File System (ReFS) は、Microsoft の最新のファイル システムであり、データの最大限の可用性、さまざまなワークロードに対する大規模なデータ セットへの拡張、破損部分の回復によるデータの整合性を実現できるように設計されています。 拡大する一連の記憶域のシナリオに対処し、未来の技術革新の基盤を確立することを目指しています。 

## <a name="key-benefits"></a>主な利点

### <a name="resiliency"></a>回復性 
ReFS には、正確に破損を検出し、オンライン状態を維持しながら、それらの破損を修正できる新機能が導入されており、データの整合性と可用性が向上しています。 

- **整合性ストリーム** - ReFS は、メタデータのチェックサムと、必要に応じてファイル データのチェックサムを使用します。これにより、ReFS は破損を確実に検出できます。 
- **記憶域スペースの統合** - ミラー スペースやパリティ スペースと組み合わせて使用する場合、ReFS は記憶域スペースによって提供されるデータの代替コピーを使って、検出された破損を自動的に修復できます。 修復プロセスは、破損の領域のみに限定され、オンラインで実行されるため、ボリュームのダウンタイムを必要としません。
- **データの部分的な救済** - ボリュームが破損し、破損したデータの代替コピーが存在しない場合、ReFS は名前空間から破損したデータを削除します。 ReFS では、ほとんどの修正できない破損を処理している間、ボリュームをオンライン状態に保つことができます。ただし、まれに、ReFS でボリュームをオフラインにすることが必要になる場合もあります。
- **事前対応型のエラー修正** - ReFS では、読み取りと書き込みの前にデータを検証するだけでなく、<i></i>"スクラブ機能" と呼ばれる、データの整合性のスキャン機能が導入されています。 このスクラブ機能ではボリュームが定期的にスキャンされ、潜在的な破損部分を識別し、その破損データの修復を事前にトリガーします。 


### <a name="performance"></a>パフォーマンス
回復性の向上に加えて、ReFS には、パフォーマンスが重視される仮想化されたワークロードに関する新機能が導入されています。 リアルタイムでの階層の最適化、ブロックの複製、スパース VDL は、動的に多様なワークロードをサポートするように設計されている、ReFS の先進的な機能の一例です。

- **[ミラーリングによって高速化されたパリティ](./mirror-accelerated-parity.md)**: ミラーリングによって高速化されたパリティは、パフォーマンスと容量効率の高い、データの記憶域を提供します。 

    - パフォーマンスと容量効率の高い記憶域を提供するために、ReFS は、ボリュームを階層と呼ばれる 2 つの論理記憶域グループに分割します。 これらの階層ではそれぞれドライブと回復性の種類を設定でき、各階層をパフォーマンスまたは容量について最適化することができます。 構成の例の一部を以下に示します。 
    
    
    | パフォーマンス階層 | 容量階層 |
    |----------------|-----------------|
     ミラー SSD | ミラー HDD |
     ミラー SSD | パリティ SSD |
     ミラー SSD | パリティ HDD |   
            
    - これらの階層を構成すると、ReFS はこれらの階層を使用して、ホット データには高速記憶域を、コールド データには容量効率の高い記憶域を提供します。
        - すべての書き込みはパフォーマンス階層で発生し、パフォーマンス階層に残っているデータの大規模なチャンクはリアルタイムで容量階層に効率的に移動されます。
        - [ハイブリッド展開](../storage-spaces/choosing-drives.md) (フラッシュ ドライブと HDD ドライブの混在) を使用する場合、[記憶域スペース ダイレクトのキャッシュ](../storage-spaces/understand-the-cache.md)により、仮想化されたワークロードのデータ断片化特性の影響が緩和され、読み取りが高速化されます。 それ以外で、オールフラッシュ展開を使用している場合は、読み取りもパフォーマンス階層で発生します。 

>[!NOTE]
>サーバーの展開では、ミラーリングによって高速化されたパリティは、[記憶域スペース ダイレクト](../storage-spaces/storage-spaces-direct-overview.md)でのみサポートされます。

- **VM の操作の高速化**: ReFS では、仮想化されたワークロードのパフォーマンスを向上させる新機能が導入されています。
    - [ブロックの複製](./block-cloning.md) - ブロックの複製によってコピー操作が高速化されるため、VM のチェックポイントのマージ操作をすばやく実行し、影響を抑えることができます。 
    - スパース VDL - ReFS では、スパース VDL によってファイルを迅速にセロ化することができ、固定 VHD を作成するために必要な時間が数十分からわずか数秒に短縮されます。


- **可変クラスター サイズ** - ReFS では、4 K と 64 K の両方のクラスター サイズをサポートしています。 ほとんどの展開で推奨されるクラスター サイズは 4 K ですが、サイズの大きい順次 IO ワークロードには 64 K クラスターが適しています。
    
    
### **<a name="scalability"></a>スケーラビリティ**
ReFS は、非常に大きなデータ セット (数百万テラバイト) をサポートするように設計されており、パフォーマンスを損なうことなく、以前のファイル システムよりも大きいスケールを実現します。 

## <a name="supported-deployments"></a>サポートされる展開

### <a name="storage-spaces-direct"></a>記憶域スペース ダイレクト ###

記憶域スペース ダイレクトへの ReFS の展開は、仮想化されたワークロードやネットワーク接続ストレージで推奨されるセットアップ方法です。 
- ミラーリングによって高速化されたパリティと[記憶域スペース ダイレクトのキャッシュ](../storage-spaces/understand-the-cache.md)によって、高パフォーマンスで容量効率の高い記憶域が提供されます。 
- ブロックの複製とスパース VDL の導入により、.vhdx ファイルの作成、マージ、拡張などの操作が大幅に高速化されます。
- 整合性ストリーム、オンラインでの修復、代替データのコピーによって、ReFS と記憶域スペース ダイレクトが連携してメタデータとデータの両方の破損を検出および修正できます。 
- ReFS は、拡張して大規模なデータ セットをサポートするための機能を提供します。 

### <a name="storage-spaces-with-sas-drive-enclosures"></a>記憶域スペースと SAS ドライブ エンクロージャ ###
共有の SAS エンクロージャを備えた記憶域スペースへの ReFS の展開は、アーカイブ データのホストやユーザー ドキュメントの格納に適しています。
- 整合性ストリーム、オンラインでの修復、代替データのコピーによって、ReFS と記憶域スペースが連携してメタデータとデータの両方の破損を検出および修正できます。 
- また、記憶域スペースの展開では、ブロックの複製や ReFS が提供するスケーラビリティを利用することもできます。

### <a name="basic-disks"></a>ベーシック ディスク ###
ベーシック ディスクに ReFS を展開する方法は、独自のソフトウェアの回復性と可用性のソリューションを実装するアプリケーションに最適です。 
- 独自の回復性と可用性のソフトウェア ソリューションを導入するアプリケーションには、整合性ストリーム、ブロックの複製、大規模なデータ セットに合わせてスケーリングしサポートする機能を活用できます。 

>[!NOTE]
>SAN に接続された記憶域では、ReFS はサポートされていません。


## <a name="feature-comparison"></a>機能の比較

### <a name="limits"></a>制限

| 機能       | ReFS                                        | NTFS |
|----------------|------------------------------------------------|-----------------------|
| ファイル名の最大長 | 255 Unicode 文字  | 255 Unicode 文字               |
| パス名の最大長 |32 K Unicode 文字 | 32 K Unicode 文字                |
| 最大ファイル サイズ | 18 EB (エクサバイト)  | 18 EB (エクサバイト)                |
| 最大ボリューム サイズ | 4.7 ZB (ゼタバイト)                           | 256 TB                |


### <a name="functionality"></a>機能

#### <a name="the-following-features-are-available-on-refs-and-ntfs"></a>ReFS と NTFS で使用できる機能は次のとおりです。

| 機能       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| BitLocker 暗号化 | 〇 | 〇 |
| クラスター共有ボリューム (CSV) のサポート | 〇 | 〇 |
| ソフト リンク | 〇 | 〇 |
| フェールオーバー クラスターのサポート | 〇 | 〇 |
| アクセス制御リスト | 〇 | 〇 |
| USN ジャーナル | 〇 | 〇 |
| 変更通知 | 〇 | 〇 |
| 接合ポイント | 〇 | 〇 |
| マウント ポイント | 〇 | 〇 |
| 再解析ポイント | 〇 | 〇 |
| ボリューム スナップショット | 〇 | 〇 |
| ファイル ID | 〇 | 〇 |
| oplock | 〇 | 〇 |
| スパース ファイル | 〇 | 〇 |
| 名前付きストリーム | 〇 | 〇 |

#### <a name="the-following-features-are-only-available-on-refs"></a>ReFS のみで使用できる機能は次のとおりです。

| 機能       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| ブロックの複製 | ○ | × |
| スパース VDL | ○ | × |
| ミラーリングによって高速化されたパリティ| 〇 (記憶域スペース ダイレクト上) | × |

#### <a name="the-following-features-are-unavailable-on-refs-at-this-time"></a>現時点では、ReFS で次の機能は利用できません。

| 機能       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| ファイル システムの圧縮 | × | 〇 |
| ファイル システムの暗号化 | × | 〇 |
| データ重複除去 | × | 〇 |
| トランザクション | × | 〇 |
| ハード リンク | × | 〇 |
| オブジェクト ID | × | 〇 |
| 短い形式の名前 | × | 〇 |
| 拡張属性 | × | 〇 |
| ディスク クォータ | × | 〇 |
| 起動可能 | × | 〇 |
| リムーバブル メディアでのサポート | × | 〇 |
| NTFS 記憶域階層 | × | 〇 |


## <a name="see-also"></a>関連項目

-   [ReFS のブロックの複製](block-cloning.md)
-   [ReFS 整合性ストリーム](integrity-streams.md)
-   [記憶域スペース ダイレクトの概要](../storage-spaces/storage-spaces-direct-overview.md)
