---
title: ネットワーク ファイル システムの展開
description: ネットワーク ファイル システムを展開する方法について説明します。
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 07/09/2018
ms.localizationpriority: medium
ms.openlocfilehash: 2f3671283720d515cd3e3e609d98e02343c15892
ms.sourcegitcommit: fcc26ec5a2cc73b59c5752377b39c070d288655e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/19/2018
ms.locfileid: "8976688"
---
# ネットワーク ファイル システムの展開

>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

ネットワーク ファイル システム (NFS) は、ファイル共有できるように Windows Server と NFS プロトコルを使用して UNIX オペレーティング システムを実行しているコンピューターでファイルを転送するソリューションを提供します。 このトピックでは、NFS を展開する手順を説明します。

## ネットワーク ファイル システムの新機能

Windows Server 2012 で nfs 変更内容は、次に示します。

- **NFS バージョン 4.1 のサポート**。 このプロトコル バージョンには、以下の機能強化が含まれています。
  - ファイアウォールの移動は、簡単では、アクセシビリティを向上させることです。
  - 強力なセキュリティを提供するされ、クライアントとサーバーは、セキュリティ ネゴシエート RPCSEC\_GSS プロトコルをサポートします。
  - ファイルのセマンティクスを UNIX と Windows をサポートしています。
  - クラスター化されたファイル サーバーの展開を活用します。
  - WAN に適した複合手順をサポートしています。

- **Windows PowerShell 用 NFS モジュール**です。 NFS の組み込みのコマンドレットの使用可能状況では、さまざまな操作を自動化するやすくなります。 コマンドレット名は、他の Windows PowerShell コマンドレット (「取得」と「設定」などの動詞を使用)、効率化のユーザーの新しいコマンドレットを使用する方法を説明する Windows PowerShell で使い慣れたと一致します。
- **NFS 管理の機能強化**します。 新しい一元的な UI ベースの管理コンソールでは、SMB と NFS 共有、クォータ、ファイル スクリーンおよびクラスター化されたファイル サーバーを管理するだけでなく、分類の構成と管理が簡略化されます。
- **Id マッピングの機能強化**します。 新しい UI サポートとタスク ベースの Windows PowerShell コマンドレットにより、管理者は、身元マッピング ソースをすばやく構成し、ユーザーの個々 のマップされた id を作成する id マッピングを構成するためです。 機能強化やすく管理者 NFS と SMB の両方で、共有の複数のプロトコルのアクセスを設定します。
- **クラスター リソースのモデルを再構築**します。 この改善 Windows NFS のクラスター リソース モデルとプロトコルの SMB サーバー間の整合性と管理を簡略化します。 多くの共有をある NFS サーバー、リソースのネットワークと WMI の呼び出しが必要な数フェールオーバー、ボリュームが含まれている多数の NFS 共有が削減されます。
- **再開キー Manager との統合**。 再開キー マネージャーは、ファイル サーバーとファイル システムの状態を追跡し、により Windows SMB と NFS プロトコル サーバーでクライアントまたはファイル サーバー上のデータを格納するサーバー アプリケーションを中断することがなくフェールオーバーするコンポーネントです。 この改善は、Windows Server 2012 を実行しているファイル サーバーの機能を継続的な可用性の主要コンポーネントです。

## ネットワーク ファイル システムを使用するシナリオ

NFS には、Windows および UNIX ベースのオペレーティング システムの混在環境がサポートされています。 次の展開シナリオでは、NFS を使用して、継続的に利用可能な Windows Server 2012 ファイル サーバーを展開する方法の例を示します。

### 混在した環境でプロビジョニング ファイルを共有します。

このシナリオは、Windows と UNIX や Linux ベースのクライアントなど、他のオペレーティング システムの両方の混在した環境を組織に適用コンピューター。 このシナリオでは、SMB と NFS プロトコル経由で同じファイル共有への複数のプロトコル アクセスを提供できます。 通常、このシナリオで Windows ファイル サーバーに展開するとき、Windows 上のユーザーとコンピューターを UNIX ベースの間の共同作業を容易にします。 ファイル共有を構成すると、SMB と NFS の両方のプロトコルで、SMB プロトコル経由でそのファイルにアクセスする Windows ユーザーと共有することと、UNIX ベースのコンピューター上のユーザーは通常、NFS プロトコル経由でファイルにアクセスします。

このシナリオでは、有効な id マッピング ソースの構成が必要です。 Windows Server 2012 には、次の id のマッピング ストアがサポートしています。

- マッピング ファイル
- Active Directory ドメイン サービス (AD DS)
- Active Directory ライトウェイト ディレクトリ サービス (AD LDS) などの RFC 2307 準拠 LDAP 格納します。
- ユーザー名のマッピング (UNM) サーバー

### プロビジョニング ファイルを UNIX ベースの環境で共有します。

このシナリオで Windows ファイル サーバーを UNIX ベースのクライアント コンピューター向け NFS ファイル共有へのアクセスを提供する主な UNIX ベースの環境に展開されます。 マップされていない UNIX ユーザー アクセス (UUUA) オプションを UNIX から Windows を作成することがなく NFS データを格納するサーバーを使用できる Windows アカウントへのマッピングできるように、最初に Windows Server 2008 R2 で NFS 共有で実装されました。 UUUA では、迅速にプロビジョニングし、アカウントのマッピングを構成することがなく NFS を展開することができます。 Nfs 有効にすると、UUUA はカスタムのセキュリティ識別子 (Sid) を表すマップされていないユーザーを作成します。 マップされたユーザー アカウントは、標準的な Windows のセキュリティ識別子 (Sid) を使用し、マップされていないユーザーは、カスタム NFS Sid を使用します。

## システム要件

NFS サーバーは、任意のバージョンの Windows Server 2012 にインストールすることができます。 NFS を UNIX ベースのコンピューターで実行されている、NFS サーバーまたは NFS クライアントこれら NFS サーバーおよびクライアントの実装に適合しない場合、次のプロトコルの仕様のいずれかで使用できます。

1. NFS バージョン 4.1 プロトコルの仕様 (で定義されている RFC [5661](https://tools.ietf.org/html/rfc5661))
2. NFS バージョン 3 プロトコルの仕様 (で定義されている RFC [1813](https://tools.ietf.org/html/rfc1813))
3. NFS バージョン 2 プロトコルの仕様 (で定義されている RFC [1094](https://tools.ietf.org/html/rfc1094))

## NFS インフラストラクチャを展開します。

次のコンピューターを展開すると、ローカル エリア ネットワーク (LAN) 上の接続する必要があります。

- NFS コンポーネントの 2 つの主要なサービスをインストールする Windows Server 2012 を実行している 1 つまたは複数のコンピューター: NFS および NFS クライアント用のサーバー。 同じコンピューター上または別のコンピューターでは、これらのコンポーネントをインストールできます。
- 1 つまたは複数 UNIX ベースのコンピューター NFS サーバーおよび NFS クライアントのソフトウェアを実行しています。 NFS サーバーが実行されている UNIX ベースのコンピューターは、NFS ファイル共有や NFS クライアントを使用してクライアントとして Windows Server 2012 を実行しているコンピューターがアクセスのエクスポートをホストします。 NFS サーバーおよびクライアント ソフトウェアは、同じ UNIX ベースのコンピューターで、または必要に応じて、異なる UNIX ベースのコンピューターにインストールできます。
- Windows Server 2008 R2 の機能レベルで実行されているドメイン コント ローラー。 ドメイン コント ローラーは、ユーザーの認証情報と、Windows 環境のマッピングを提供します。
- ドメイン コント ローラーが展開されていない場合を UNIX 環境でのユーザーの認証情報を提供するネットワーク サービス (NIS 情報) サーバーを使用することができます。 または、ユーザー名マッピング サービスを実行しているコンピューターに保存されているパスワードとグループのファイルを使用する場合は、ことができます。

### サーバー マネージャーを使ってサーバー上のネットワーク ファイル システムのインストールします。

1. 既にインストールされていない場合、役割の追加と機能の削除ウィザード、サーバーの役割の下から**ファイル サービスおよび記憶域のサービス**を選択します。
2. **ファイルおよび iSCSI サービス**、**ファイル サーバー**と**nfs サーバー**を選択します。 選択した NFS 機能を追加する**機能の追加**を選択します。
3. NFS コンポーネントをサーバーにインストールする**インストール**を選択します。

### Windows PowerShell を使用してサーバー上のネットワーク ファイル システムのインストールします。

1. Windows PowerShell を起動します。 タスク バーの [PowerShell アイコンを右クリックし、**管理者として実行**] を選択します。
2. 次の Windows PowerShell コマンドを実行します。

```PowerShell
Import-Module ServerManager
Add-WindowsFeature FS-NFS-Service
Import-Module NFS
```

## NFS 認証を構成します。

NFS バージョン 4.1 と NFS 3.0 プロトコルを使用する場合は、次の認証とセキュリティのオプションがあります。

- RPCSEC\_GSS
  - **Krb5**します。 Kerberos バージョン 5 プロトコルを使用すると、ファイル共有へのアクセスを付与する前にユーザーを認証します。
  - **Krb5i**します。 整合性 (チェックサム) をチェックして、認証に Kerberos バージョン 5 プロトコルを使用して、データが変更されていないことを確認します。
  - **Krb5p**Kerberos バージョン 5 プロトコルは、プライバシーの暗号化 NFS トラフィックが認証を使用します。
- AUTH\_SYS

マップされていないユーザーへのアクセスを有効にするオプションを提供するサーバーの認証 (AUTH\_SYS) を使用しないように選択することもできます。 マップされていないユーザーへのアクセスを使用する場合、UID でマップされていないユーザーのアクセスを許可する指定できますが、既定では、グループの ID、または匿名のアクセスを許可する/します。

NFS 認証を構成する手順については、次のセクションで説明します。

## NFS ファイル共有を作成します。

サーバー マネージャーまたは Windows PowerShell NFS のいずれかのコマンドレットを使用して NFS ファイル共有を作成することができます。

### サーバー マネージャーで NFS ファイル共有を作成します。

1. サーバーにローカルの Administrators グループのメンバーとしてログオンします。
2. サーバー マネージャーが自動的に開始されます。 起動しない場合に自動的に、**開始**] を選択**servermanager.exe**と入力し、**サーバー マネージャー**を選択します。
3. 左側**ファイル サービスおよび記憶域サービス**を選択し、**共有**を選択します。
4. **ファイル共有を作成する共有の新規作成ウィザードを開始**] を選択します。
5. **プロファイルの選択**] ページで、 **NFS 共有 – クイック**または**NFS 共有の高度な**のいずれかを選択し、 **[次へ]** を選択します。
6. **共有の場所**] ページで、サーバーと、ボリュームを選択し、 **[次へ]** を選択します。
7. **共有名**] ページで、新しい共有の名前を指定し、 **[次へ]** を選択します。
8. [**認証**] ページで、この共有に使用する認証方法を指定します。
9. **共有のアクセス許可**] ページで、**追加**] を選択し、ホスト、クライアントのグループ、または共有へのアクセス許可を付与するネット グループを指定します。
10. **アクセス許可**] で、ユーザーが必要なアクセス制御の種類を構成し、 **[ok]** を選択します。
11. [**確認**] ページの構成を確認し、**作成**NFS ファイル共有を作成する] を選択します。

### 同等の Windows PowerShell コマンド

次の Windows PowerShell コマンドレットが NFS ファイル共有を作成してもできます (場所`nfs1`、共有の名前と`C:\\shares\\nfsfolder`ファイルのパス)。

```PowerShell
New-NfsShare -name nfs1 -Path C:\shares\nfsfolder
```

### 既知の問題
NFS バージョン 4.1 によりはファイルの名前を作成または無効な文字を使用してコピーします。 Vi エディターでファイルを開こうとするが壊れているとして表示されます。 Vi からファイルを保存して名前を変更、移動するか、またはアクセス許可を変更できません。 Illigal 文字を使用しないでください。
