---
title: イベントでユーザー プロファイルのトラブルシューティングを行う
description: 読み込みの問題をトラブルシューティングする方法とイベントおよび追跡のログを使用してユーザー プロファイルをアンロードします。
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 04/05/2018
ms.localizationpriority: medium
ms.openlocfilehash: 6099dac7d77e37b761785b4f58b6106472e5ba1e
ms.sourcegitcommit: e0479b0114eac7f232e8b1e45eeede96ccd72b26
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/22/2018
ms.locfileid: "2082397"
---
# <a name="troubleshoot-user-profiles-with-events"></a>イベントでユーザー プロファイルのトラブルシューティングを行う

>対象: Windows 10、Windows 8、Windows 8.1、Windows Server 2012、Windows Server 2012 R2 および Windows Server 2016 します。

このトピックでは、イベントおよび追跡のログを使用して読み込みの問題をトラブルシューティングする方法とアンロードのユーザー プロファイルについて説明します。 次のセクションでは、ユーザー プロファイル情報を記録する 3 つのイベント ログの使用方法について説明します。

## <a name="step-1-checking-events-in-the-application-log"></a>手順 1: アプリケーションのログのイベントを確認します。

読み込みとプロファイル (移動ユーザー プロファイルを含む) は、イベント ビューアーを使用して、ユーザー プロファイル サービス アプリケーションに記録される警告とエラーのイベントを確認するユーザーをアンロードに関する問題のトラブルシューティングの最初の手順です。

アプリケーションのログでユーザー プロファイル サービスのイベントを表示する方法を示します。

1. イベント ビューアーを開始します。 **コントロール パネル**を開きます**システムとセキュリティ**] を選択し、**管理ツール**] セクションで [**イベント ログを表示**します。 イベント ビューアー] ウィンドウが開きます。
2. コンソール ツリーでは、まず**Windows ログ**]、[**アプリケーション**に移動します。
3. 操作ウィンドウでは、**現在のログをフィルター**を選択します。 [現在のログをフィルター] ダイアログ ボックスが開きます。
4. **イベントのデータ ソース**] ボックスで、**ユーザー プロファイル サービス**のチェック ボックスを選択し、[、[ **ok]** をクリックします。
5. エラーのイベントに特定の注意を払い、イベントの一覧を確認します。
6. 重要なイベントが見つかったら、その他の情報とトラブルシューティングの手順を表示するイベント ログのオンライン ヘルプのリンクを選択します。
7. さらにトラブルシューティングを実行するには、日付と時刻の重要なイベントに注意してくださいし、操作のログ (ステップ 2 で説明する) にエラーまたは警告のイベントの時間に合わせてユーザー プロファイル サービスがどのような作業を行っていたに関する詳細を表示します。

>[!NOTE]
>無視してかまいませんユーザー プロファイル サービス イベント 1530「検出レジストリ ファイルは、他のアプリケーションやサービスの使用中」

## <a name="step-2-view-the-operational-log-for-the-user-profile-service"></a>手順 2: ユーザー プロファイル サービスの操作のログを表示します。

単独でも、アプリケーションのログを使用して問題を解決できない場合は場合、は、操作のログでユーザー プロファイル サービスのイベントを表示する、次の手順を使用します。 このログは、サービスの内部処理の一部が表示され、問題が発生したプロセスを登録または削除するプロファイルの読み込みの場所を特定できます。

Windows アプリケーションのログとユーザー プロファイル サービスの運用ログの両方がすべてインストールされている Windows の既定で有効になります。

ユーザー プロファイル サービスの操作のログを表示する方法を示します。

1. イベント ビューアー コンソール ツリー**アプリケーションとサービス ログ**] し、 **Microsoft**では、 **Windows**、し、**ユーザー プロファイル サービス**、し**運用**に移動します。
2. アプリケーション ログに記録するエラーまたは警告のイベントの時間に合わせてが発生したイベントを確認します。

## <a name="step-3-enable-and-view-analytic-and-debug-logs"></a>手順 3: ログを有効にして分析を表示してデバッグ ログ

詳しくは、以下の操作のログを提供する必要がある場合は、分析を有効にするおよび影響を受けるコンピューター上のログをデバッグできます。 ログより詳しく説明され、しようとする場合、問題のトラブルシューティングを除く無効にする必要があります。

分析を表示およびデバッグ ログを有効にする方法を示します。

1. イベント ビューアーの [**アクション**] ウィンドウでは、**ビュー**を選択し、[**とデバッグ ログの分析を表示**します。
2. **アプリケーションとサービス ログ**] し、 **Microsoft**では、 **Windows**、し、**ユーザー プロファイル サービス**、し**診断**に移動します。
3. **ログを有効にする**] を選択し、[**はい]** を選択します。 これにより、診断ログのログ記録が開始されます。
4. さらに多くの詳細情報が必要な場合は、「[手順 4: を作成するトレースをデコード](#step-4:-creating-and-decoding-a-trace)トレース ログを作成する方法について詳しくは、します。
5. 問題のトラブルシューティングが完了したらに移動**診断**ログ、**ログを無効にする**] を選択、**ビュー**を選択し、分析の非表示にすると、デバッグ ログ**とデバッグ ログの分析を表示する**] チェック ボックスをオフします。

## <a name="step-4-creating-and-decoding-a-trace"></a>手順 4: を作成して、トレースをデコード

イベントを使用して問題を解決できない場合は場合、問題を再現するときにトレース ログ (ETL ファイル) を作成し、Microsoft シンボル サーバーから一般向けの記号と特殊文字を使用して、[デコードできます。 トレース ログ非常に限定について説明とユーザー プロファイル サービスを行うと、エラーが発生した場所を特定することができます。

ETL トレースを使用するときに最適な方法では、まず考えられる最小のログを取得します。 ログをデコード後は、エラーのログを検索します。

作成し、ユーザー プロファイル サービスのトレースをデコードする方法を示します。

1. 場所のユーザーに問題が、ローカルの管理者グループのメンバーであるアカウントを使用してコンピューターにサインインします。
2. 管理者特権のコマンド プロンプトから次のコマンドを入力する場所*\ < Path\ >* ローカル フォルダーを以前に作成した、たとえば C:\\logs へのパスします。
        
    ```PowerShell
    logman create trace -n RUP -o <Path>\RUP.etl -ets
    logman update RUP -p {eb7428f5-ab1f-4322-a4cc-1f1a9b2c5e98} 0x7FFFFFFF 0x7 -ets
    ```
3. スタート画面で、ユーザー名を選択し、[**アカウントの切り替え**、管理者は、ログオフにように注意を選択します。 リモート デスクトップを使用している場合は、ユーザーのセッションを確立する管理者セッションを終了します。
4. この問題を再現します。 問題を再現する手順は、通常は、ユーザーのサインインの問題が発生しているユーザーまたはその両方としてサインインします。
5. この問題を再現するには後でサインイン ローカルの管理者としてもう一度します。
6. 管理者特権のコマンド プロンプトを ETL ファイルにログを保存するのには、次のコマンドを実行します。
  
    ```PowerShell
    logman stop -n RUP -ets
    ```
7. (可能性が高いホーム フォルダーまたは %WINDIR%\\System32 フォルダー) は、現在のディレクトリにわかりやすいファイル ETL ファイルにエクスポートするには、次のコマンドを入力します。
    
    ```PowerShell
    Tracerpt <path>\RUP.etl
    ```
8. **Summary.txt**ファイルと (ログの完全な詳細情報をより簡単に表示するのには、Excel で開くことができます) **Dumpfile.xml**ファイルを開きます。 検索イベントに**失敗する**か、**失敗しました**。**不明な**イベント名を含む行を無視してかまいません。

## <a name="more-information"></a>詳細

* [移動ユーザー プロファイルを展開します。](deploy-roaming-user-profiles.md)