---
title: ファイル サーバー リソース マネージャー (FSRM) の概要
ms.prod: windows-server-threshold
ms.author: jgerend
ms.manager: brianlic
ms.technology: storage
ms.topic: article
author: jasongerend
ms.date: 5/14/2018
description: ファイル サーバー リソース マネージャー (FSRM) とは、Windows Server ファイル サーバー上のデータ管理および分類することができるツールです。
ms.openlocfilehash: 107d08f247fc56720ccc3d11a3db88c77377257c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59870723"
---
# <a name="file-server-resource-manager-fsrm-overview"></a>ファイル サーバー リソース マネージャー (FSRM) の概要

> 適用対象:Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2

ファイル サーバー リソース マネージャー (FSRM) は、ファイル サーバーに保存されたデータを管理者が管理および分類できる機能セットを備えています。 ファイル サーバー リソース マネージャーを使用して、自動的にファイルを分類、これらの分類に基づいてタスクを実行、フォルダーのクォータを設定および記憶域使用率を監視するレポートを作成することができます。

しませんが、小さなポイント[変更ジャーナルを無効にする機能が追加されました](#whats-new)Windows Server、バージョン 1803 でします。

## <a name="features"></a>機能

ファイル サーバー リソース マネージャーには、以下の機能が含まれています。

-   [クォータの管理](quota-management.md)ボリュームまたはフォルダーで許可されている領域を制限することができ、ボリューム上に作成される新しいフォルダーに自動的に適用することができます。 新しいボリュームまたはフォルダーに適用できるクォータ テンプレートを定義することもできます。  
-   [ファイル分類インフラストラクチャ](classification-management.md)がデータをより効果的に管理できるように分類プロセスを自動化することで、データに関する洞察を提供します。 ファイルを分類し、その分類に基づいてポリシーを適用できます。 ポリシーの例として、ファイルへのアクセスを制限するためのダイナミック アクセス制御、ファイル暗号化、ファイルの有効期限などがあります。 ファイルは、ファイル分類規則を使って自動的に分類するか、選択したファイルまたはフォルダーのプロパティを変更して手動で分類することができます。
-   [ファイル管理タスク](file-management-tasks.md)分類に基づいてファイルに、条件付きポリシーまたはアクションを適用することができます。 ファイル管理タスクの条件には、ファイルの場所、分類プロパティ、ファイルの作成日、ファイルの最終更新日、ファイルの最終アクセス日などがあります。 ファイル管理タスクが実行できるアクションには、ファイルの有効期限の設定、ファイルの暗号化、カスタム コマンドの実行などがあります。
-   [ファイル スクリーンの管理](file-screening-management.md)そのユーザーがファイル サーバー上に格納できるファイルの種類の制御に役立ちます。 共有ファイルに格納できる拡張子を制限できます。 たとえば、拡張子が MP3 のファイルをファイル サーバー上の個人用共有フォルダーに格納することを許可しないファイル スクリーンを作成できます。
-   [記憶域レポート](storage-reports-management.md)ディスク使用量とデータの分類方法の傾向を特定できます。 ユーザーのグループを選択し、それらのユーザーが未承認のファイルを保存しようとするのを監視することもできます。  
  
ファイル サーバー リソース マネージャーが含まれる機能を構成およびファイル サーバー リソース マネージャー アプリを使用して、または Windows PowerShell を使用して管理できます。
  
> [!IMPORTANT]
>  ファイル サーバー リソース マネージャーでは、NTFS ファイル システムでフォーマットされたボリュームのみがサポートされます。 Resilient File System はサポートされていません。  
  
## <a name="practical-applications"></a>実際の適用例  
 ファイル サーバー リソース マネージャーの実際の適用例には、次のようなものがあります。  
  
-   ダイナミック アクセス制御のシナリオでファイル分類インフラストラクチャを使って、ファイル サーバー上でファイルが分類された方法に基づいてファイルおよびフォルダーへのアクセスを許可するポリシーを作成します。  
  
-   少なくとも 10 個の社会保障番号を含むファイルを、個人を特定できる情報としてタグ付けするファイル分類規則を作成します。  
  
-   過去 10 年間、変更されなかったファイルを有効期限切れにします。  
  
-   各ユーザーのホーム ディレクトリ用に 200 MB のクォータを作成し、180 MB まで使用されたときに、ユーザーに通知します。  
  
-   個人用共有フォルダーに音楽ファイルを格納することを許可しません。  
  
-   毎週日曜日の夜に実行され、過去 2 日間にアクセスされたファイルの一覧を生成するレポートをスケジュールします。 このレポートは、週末の記憶域の活動状況を把握し、それに応じてサーバーのダウンタイムを計画するうえで役立ちます。  

## <a name="whats-new"></a>新機能-FSRM が変更ジャーナルを作成するを防ぐ

以降では、Windows Server、バージョン 1803 からサービスの起動時には、ボリュームの変更ジャーナル (USN ジャーナルとも呼ばれます) を作成するファイル サーバー リソース マネージャー サービスを今すぐ回避できます。 これは、多少の各ボリューム上の領域を節約することができますが、リアルタイムのファイル分類を無効になります。

以前の新機能では、次を参照してください。[新ファイル サーバー リソース マネージャーで](https://technet.microsoft.com/library/dn383587.aspx)します。

ファイル サーバー リソース マネージャーがサービスの起動時に一部またはすべてのボリュームに変更ジャーナルを作成することを防ぐために、次の手順を使用します。 

1. SRMSVC サービスを停止します。 管理者として PowerShell セッションを開きを入力するなど、`Stop-Service SrmSvc`します。
2. Fsutil コマンドを使用して容量を節約するボリュームの USN ジャーナルを削除します。 

      ```
      fsutil usn deletejournal /d <VolumeName>
      ```
    たとえば次のようになります。`fsutil usn deletejournal /d c:`

3. 」と入力して、レジストリ エディターを開きます`regedit`同じ PowerShell セッションでします。
4. 次のキーに移動します。**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SrmSvc\Settings**
5. 必要に応じてスキップ変更サーバー全体 (特定のボリュームでのみ無効にする場合は、この手順をスキップ) のジャーナルを作成します。
    1. 右クリックし、**設定**キーを選び**新規** > **DWORD (32 ビット) 値**します。 
    1. 値に名前を`SkipUSNCreationForSystem`します。
    1. 値を設定**1** (で 16 進数)。
6. 必要に応じて特定のボリュームの変更ジャーナルの作成をスキップ。
    1. 使用してスキップするボリュームのパスを取得、`fsutil volume list`コマンドまたは次の PowerShell コマンド。
        ```PowerShell
        Get-Volume | Format-Table DriveLetter,FileSystemLabel,Path
        ```
       出力例を次に示します。

       ```
        DriveLetter FileSystemLabel Path
        ----------- --------------- ----
                    System Reserved \\?\Volume{8d3c9e8a-0000-0000-0000-100000000000}\
        C                           \\?\Volume{8d3c9e8a-0000-0000-0000-501f00000000}\
       ```
    2. バックアップでレジストリ エディターを右クリックし、 **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SrmSvc\Settings**キーを選び**新規** > **複数行文字列値**します。
    3. 値に名前を`SkipUSNCreationForVolumes`します。
    4. 各ボリュームをスキップする、変更ジャーナルを作成する別の行に各パスを配置するパスを入力します。 次に、例を示します。

        ```
        \\?\Volume{8d3c9e8a-0000-0000-0000-100000000000}\
        \\?\Volume{8d3c9e8a-0000-0000-0000-501f00000000}\
        ```

        > [!NOTE] 
        > レジストリ エディターがわかる場合が空の文字列を削除することを安全に無視することができます、この警告を表示します。*REG_MULTI_SZ 型のデータは、空の文字列を含めることはできません。レジストリ エディターでは、検出されたすべての空の文字列を削除します。*

7. SRMSVC サービスを開始します。 たとえば、PowerShell セッションで次のように入力します。`Start-Service SrmSvc`します。



## <a name="see-also"></a>関連項目

- [ダイナミック アクセス制御](https://technet.microsoft.com/library/dn408191(v=ws.11).aspx) 