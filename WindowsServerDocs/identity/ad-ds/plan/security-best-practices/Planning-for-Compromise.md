---
ms.assetid: 6f50476c-a1f1-48fb-999b-76c4c3816496
title: 侵害の計画
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 7cb87e6b9d1ace15050dcbff8b3c6d864c2a18f0
ms.sourcegitcommit: f2e98f8b7828730b83a3cc8f0e33d4e4db1b16e1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/02/2018
---
# 侵害の計画

>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

*準拠法の 1 つはだれと考えていますまでには、発生することが悪い。* - [セキュリティ管理の 10 個の不変法](https://technet.microsoft.com/library/cc722488.aspx)  
  
多くの組織で障害回復の計画に焦点地域障害またはコンピューティング サービスが失われる失敗から回復します。 ただし、侵害顧客と動作、頻度わかる意図的な侵害からの回復が存在しない場合、障害回復計画にします。 これは、特に知的財産の実際の境界のではなく (次のような (すべての Active Directory ドメインまたはすべてのサーバーの破棄) などの論理の境界を活用する意図的な破棄詐取の被害になる場合破棄データ センターの)。 組織には、侵害が検出されたときに実行する最初のアクティビティを定義するインシデント対応プランがありますが、これらのプランは多くの場合、コンピューティング インフラストラクチャ全体に影響を与える侵害からを復元する手順を省略します。  
  
Active Directory では、ユーザー、サーバー、ワークステーション、およびアプリケーションの id およびアクセスの豊富な管理機能を提供するためには、可変攻撃の対象としないします。 Active Directory ドメインまたはドメイン コント ローラーへのアクセスが高い権限を持つ攻撃者する場合、は、アクセスを制御するも Active Directory フォレスト全体を破棄するアクセス権を活用できます。  
  
このドキュメントが Windows および Active Directory の最も一般的な攻撃の一部について説明しは対策、攻撃がのみ確認方法は、完了侵入 Active Directory の復元を小さくために行うことができます。事前に準備して侵害が起こる前にします。 ここより前のセクションで、このドキュメントの技術の詳細については、以下とその他の作成に使用できる高度な推奨事項の総合的なすべてを網羅的なセキュリティと、組織の管理の重要ですビジネスと IT 資産します。  
  
Resisted が、インフラストラクチャが攻撃されていることがないかどうかが侵害されないように、しようとしましたが攻撃を破らやされて完全に感染し、次のように、避けられない実際に繰り返しが攻撃されることを計画する必要があります。 攻撃を防ぐことはできませんが、実際にできることがあります大幅侵害または卸売り侵害されないようにするため。 すべての組織では、既存のリスク管理プログラムを評価し、防止、検出、包含と回復で長さが均等投資をすることによって全体的な脆弱性のレベルを短縮するために必要な調整を行うを密接にする必要があります。  
  
ユーザーとインフラストラクチャやアプリケーションに依存している企業にサービスを提供しながら、効果的な防御を作成するに必要がありますを防ぐため、風の方法を検討するを検出して、環境に危険が含まれてしてから、[回復侵害します。 方法と推奨事項このドキュメントでないに役立つ、侵害 Active Directory のインストールを修復するが、次のいずれかをセキュリティで保護することができます。  
  
Active Directory フォレストを回復するための推奨事項が記載[Windows Server 2012: Active Directory フォレスト回復の計画](https://www.microsoft.com/download/details.aspx?id=16506)します。 完全に低下から新しい環境を防止することができますが、できない場合でもするツールを復元して現在の環境の制御を取り戻します。  
  
## 再考アプローチ  
*準拠法番号 8: 保護ネットワークの問題は、その複雑さに直接比例します。* - [セキュリティ管理の 10 個の不変法](https://technet.microsoft.com/library/cc722488.aspx)  
  
一般に広く認められた、システム、管理者、ルートで、または同等のアクセス、オペレーティング システムに関係なく、コンピューターに攻撃者が取得する場合コンピューター見なすことができますなった何の作業は、「クリーンアップ」に加えられたに関係なく、信頼できるが、システムです。 Active Directory は同じです。 ディレクトリを復元できることがない攻撃者により、すべての変更や、正常なバックアップの記録を使っていない場合、攻撃者がドメイン コント ローラーまたは Active Directory の高い権限を持つアカウントへのアクセス権限が取得された場合、完全に信頼できる状態です。  
  
メンバー サーバーまたはワークステーションの侵害し、で変更が行われると、コンピューターなったつなげてサーバーが信頼できるが、隣接は、1 台のコンピューターのワークステーション arecompromise わけですべてのコンピューターが侵害されています。  
  
ただし、Active Directory ドメインでは、すべてのドメイン コント ローラーは同じ AD DS データベースのレプリカをホストします。 1 つのドメイン コント ローラーが侵害攻撃者 AD DS データベースを変更する場合は、それらの変更はすべて別のドメイン コント ローラー パーティションを変更を加えたフォレストによってし、ドメインを複製します。 フォレスト内の各ドメイン コント ローラーを再インストールする場合でも単に再インストールする AD DS データベースが存在するホストします。 Active Directory の悪意のある変更は、年が実行されているドメイン コント ローラーの複製が簡単に新たにインストールされているドメイン コント ローラーに複製されます。  
  
侵害環境を評価するには、[よくわかる内容と見なさ最初の違反「イベント」が実際に行われる週後、months または年も攻撃では、環境が侵害最初にしていた後にします。 攻撃通常侵害が検出され、侵害、ディレクトリ、ドメイン コント ローラー、メンバー サーバー ワークステーション、これらのアカウントを活用する前に時間が高い権限を持つアカウントの資格情報を取得し、Windows 以外にも接続システムです。  
  
これらの結果は Verizon の 2012 データ違反調査、レポートにすることを示す、いくつかの結果と一致します。  
  
-   データが侵害されないように外部エージェント由来の 98%  
  
-   週単位、または複数の発見実行されたデータの違反 85%  
  
-   インシデントの 92% は、サード パーティによって検出されたと  
  
-   違反の 97% も簡単な回避か中級コントロール。  
  
侵害前述度には、効果的に修復不能なおよび「フラット化し、[再構築」標準アドバイスすべて侵害システムが単に可能か、または可能 Active Directory を破棄または侵害されている場合。 正常な状態を再開するも、最初に環境を許可されている問題がなくなるされることはありません。  
  
インフラストラクチャのすべてのファセットを保護する必要がありますが、目的の目標にアクセスする防御の十分な問題を検索するのみ攻撃者必要があります。 環境が単純と初期、従来よく管理]、[このドキュメントの以前のバージョンの推奨事項を実装する場合に、単純な提案がある場合があります。  
  
ただしがあることを確認しました古いより大きい場合は、およびのより複雑なほど、環境が、このドキュメント内の推奨事項不可能または実装する不可能。 セキュリティで保護されたインフラストラクチャ事後後作業を開始して、攻撃を侵害強い環境を構築するよりもはるかに困難です。 既に説明したように、なしあたって Active Directory フォレスト全体を再構築します。 そのため、さらに重点を置いた、Active Directory フォレストをセキュリティで保護する方法を対象となるをお勧めします。  
  
焦点を当てると、すべての機能を「壊れた」を修正する] ではなくする優先順位付け方法は、インフラストラクチャとビジネスにとって最も重要なに基づいて検討してください。 古い、正しく構成されていないシステムやアプリケーションで塗りつぶさ環境を改善しようとすると、代わりに、新しいを安全に利用できる移植できますユーザー、システム、およびにとって最も重要な情報、セキュリティで保護された環境の作成を検討します。ビジネスします。  
  
ここでは、「ライフ ボート」または「セキュリティで保護されたセル」の主要なビジネス インフラストラクチャとして機能する AD DS フォレストを新規の作成された方法について説明します。 フォレストを新規がだけで、新たにインストールされている Active Directory フォレスト サイズと範囲は限られているは通常と現在のオペレーティング システムでは、アプリケーションを使用して、[で説明する原則に組み込まれている Active Directory 攻撃を減らす等高線グラフ](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)します。  
  
新しく構築したフォレストの推奨設定を実装すると、セキュリティ設定とプラクティス、ゼロから組み込まれている AD DS のインストールを作成し、レガシ システムのサポートに付随する課題を減らすことができます、アプリケーションです。 手順の設計と実装を最初に AD DS インストールの詳細については、このドキュメントの範囲外ですが、いくつかの一般的な原則とセルを作成する"セキュリティで保護された"にすることがその中、最も重要なガイドラインに従ってください。資産管理します。 次のガイドラインは次のとおりです。  
  
1.  分離して、重要な資産の安全を確保するための原則を特定します。  
  
2.  制限付き、リスク ベースの移行計画を定義します。  
  
3.  必要な場合は、"nonmigratory"の移行を活用できます。  
  
4.  「クリエイティブな破棄します」を実装します。  
  
5.  従来のシステムやアプリケーションを特定します。  
  
6.  エンドユーザーのセキュリティを簡略化されます。  
  
### 分離して、重要資産の保護の基本原則を識別します。  

重要な資産の家に作成した初期環境の特性が異なることができます。 たとえば、初期フォレスト VIP ユーザーとユーザーのみがアクセスできる機密性の高いデータのみを移行する先を作成することができます。 フォレストを新規だけでなく VIP を移行することを作成、ユーザーがセキュリティで保護された管理者アカウントを作成するのには[、Active Directory 攻撃を減らすこと](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)の方針を実装する管理フォレストでは、名前を付けてを実装します。hosts フォレストを新規からレガシ フォレストを管理するために使用できます。 VIP アカウント、権限を持つアカウント、および低い secure からそれらを分離する唯一の目標に Active Directory 証明書サービス (AD 座標系) を実行しているサーバーなどの他のセキュリティが必要なシステムのユーザーが含まれた「専用」フォレストを実装することがあります。フォレストします。 最後に、システム、アプリケーション、およびデータをすべての新規ユーザーに対して事実上の場所となるフォレストを新規を実装することがあります最終的に、従来のフォレスト減少経由での使用を停止することができるようにします。  
  
かに関係なくフォレストを新規に少数のユーザーが含まれているし、システムまたは基礎より積極的に移行するため、かどうか、計画でこれらの基本原則に従ってください。  
  
1.  レガシ フォレストが侵害されていると仮定します。  
  
2.  初期フォレストを信頼する従来の環境を構成できますが、従来フォレストを信頼する初期環境を設定しません。  
  
3.  移行されませんユーザー アカウントまたはグループ レガシ フォレストから初期環境にアカウントのグループ メンバーシップを作成、SID 履歴、またはその他の属性が変更されていること悪意のある可能性がある場合。 フォレストを新規に作成するのに代わりに、"nonmigratory"方法を使用します。 (Nonmigratory 方法、後でこのセクションで説明します。)  
  
4.  初期フォレスト レガシ フォレストからコンピューターは移行されません。 フォレストを新規にインストール新しく実装するサーバーでは、新たにインストールされているサーバーにアプリケーションをインストールして、アプリケーションのデータを新たにインストールされているシステムに移行します。 ファイル サーバー、新たにインストールされているサーバーにデータをコピー、新規フォレストのユーザーとグループを使用して Acl を設定および同様の方法でプリント サーバーを作成します。  
  
5.  以前のオペレーティング システムやフォレストを新規にアプリケーションのインストールを許可しません。 アプリケーションの更新し新たにインストールされていることはできません、従来のフォレストでのままにして、アプリケーションの機能を置き換えるクリエイティブな破棄を検討してください。  
  
### 制限付き、リスク ベースの移行計画の定義  
制限されたを作成するには、リスク ベースの移行計画だけというリスクを組織が公開されている場合は、1 つの角度に基づく移行ターゲットを指定する必要がありますどのユーザー、アプリケーション、およびデータ初期フォレストに移行する際のユーザーまたはシステムが損なわれます。 フォレストを新規には、VIP ユーザー アカウントを持つ攻撃の対象とする可能性が高いを配置する必要があります。 アプリケーション フォレストを新規に作成したばかりサーバーでビジネスの重要な機能をインストールする必要あるし、機密性の高いデータの移動先とを実現するには、フォレストを新規のサーバーがセキュリティで保護します。  
  
Active Directory 環境にまだ business で最も重要なユーザー、システム、アプリケーション、およびデータのクリア画像がない場合は、それらを識別する部署を操作します。 サーバーが重要なアプリケーションの実行または重要なデータが保存されている必要がありますので、業務に動作するために必要なすべてのアプリケーションを識別する必要があります。 ユーザーと引き続き組織に必要なリソースを特定するには、業務を一元管理するための資産の自然に優先順位のコレクションを作成します。  
  
### "Nonmigratory"の移行を活用します。  
環境が侵害されていることがわかっているかどうか疑われるが侵害されているか、単を使用しない従来の Active Directory インストールから新しいサブスクリプションに古いデータとオブジェクトを移行、行う技術的には移行方法を検討してください。オブジェクトの"を移行"します。  
  
### [ユーザー アカウント]  
移行では従来 Active Directory フォレスト間に、ユーザーの SID とユーザーがレガシ フォレスト内のメンバーをされたグループの Sid を格納するユーザー オブジェクトの SIDHistory (sid) 属性が使用されています。 ユーザー アカウントは、新しいフォレストに移行レガシ フォレストのリソースにアクセスする場合は、リソースをいればアクセス アカウントを移行する前にアクセスできるようにするアクセス トークンを作成するのには Sid SID の履歴が使用します。  
  
SID 履歴、ただし、実証済みの一部の環境で問題を維持するため、現在および過去の Sid を持つユーザーのアクセス トークンを作成する可能性がありますトークンが肥大化します。 トークンが肥大化するでは、ユーザーのアクセス トークンに保存する必要があります Sid の数を使用している問題またはトークンで利用できる容量を超えています。  
  
トークンのサイズを大きく限定して、最終的なソリューションのトークンが肥大化する sid、または両方の組み合わせを除去する、グループ メンバーシップを合理化することであるかどうか、ユーザー アカウントに関連付けられている Sid の数を減らすためです。 詳細については、トークンが肥大化する、 [MaxTokenSize と Kerberos トークン膨張](http://blogs.technet.com/b/shanecothran/archive/2010/07/16/maxtokensize-and-kerberos-token-bloat.aspx)を参照してください。  
  
はなく従来の環境から移行するユーザー (特にいずれかのグループ メンバーシップを作成および SID の履歴を損なわ可能性があります) SID の履歴を使用すると、""のユーザーに、実行 SID 履歴せずメタディレクトリ アプリケーションを活用することを検討してください新しいフォレストします。 新しいフォレストでユーザー アカウントを作成するときは、従来のフォレストで対応する自分のアカウントにアカウントを対応付けるメタディレクトリ アプリケーションを使用することができます。  
  
従来のフォレストのリソースへの新しいユーザー アカウント アクセスを提供するには、メタディレクトリ ツールを使用して、ユーザーの古いアカウントが、アクセス権を与えられたリソースのグループを特定し、それらのグループにユーザーの新しいアカウントを追加できます。 従来のフォレストで、グループ戦略によっては、リソースへのアクセスのドメインのローカル グループを作成する] または [リソース グループに追加する新しいアカウントを許可するドメインのローカル グループに既存のグループを変換する必要があります。 最も重要なアプリケーションとデータに最初に焦点を当てるによって、それらを新しい環境 (とまたは場合) に移動するには、従来の環境での労力の量を制限できます。  
  

  
### サーバーおよびワークステーション  
1 つの Active Directory から繁体字移行ではフォレスト、移行する別のコンピューターには、多くの場合単純に移行するユーザー、グループ、およびアプリケーションとの比較します。 コンピューターの役割によっては、新しいフォレストへの移行への以前のドメインと参加の新しいで簡単に行うことができますできます。 ただしに移行するコンピューターのアカウントがそのままの状態をフォレストを新規なくなります新しい環境を作成する目的します。 (移行する可能性のある侵害、正しく構成されていない、または古い) コンピューターは、新しいフォレスト アカウントではなく、新しい環境でサーバーとワークステーションをインストールする必要があります新しく。 そのハウス データ フォレストを新規にシステムには、従来のフォレストでシステムがシステムではなくからデータを移行できます。  
  
### アプリケーション  

アプリケーションは、1 つのフォレストから任意の移行で最も重要な課題を表示することができます"nonmigratory"の移行では、1 つの 1 つは基本的な原則を適用する必要があるフォレストを新規にアプリケーションを現在の状態にすることサポートされており、新たにインストールされています。 可能な場合は、古いフォレストのアプリケーションのインスタンスからデータを移行できます。 アプリケーションを「再作成できない」フォレストを新規の場合は、次のセクションで説明するようにクリエイティブな破棄またはレガシ アプリケーションの分離などの方法を検討してください。  
  
### 独創的な破棄を実装します。  
独創的な破棄は、以前の順序を破棄して作成された経済開発を示す経済用語です。 最近使用した年間で情報技術用語が適用されました。 古いインフラストラクチャを削除してのアップグレードではなくは完全に新しいものに置き換えることによって通常メカニズムを指します。 Cio と IT 役員 2011 [Gartner シンポジウム ITXPO](http://www.gartner.com/technology/symposium/orlando/)では、効率性とコストの削減と増加のキーのテーマを 1 つのクリエイティブな破棄が表示されます。 セキュリティの強化は、プロセスの自然応用したものとして実行できます。  

たとえば、組織の場合は、さまざまな modernity と仕入先のサポートと、同様の機能を実行する別のアプリケーションを使用して複数の事業部門から構成される可能性があります。 従来、IT 各部署のアプリケーションを別々 に管理を担当することがあり、しようとしているアプリケーションに最適な機能が提供されているを把握して、そのデータを移行することの統合プロジェクトは、その他のアプリケーションです。  
  
クリエイティブな破棄ではなく古いまたは冗長なアプリケーションの管理] では、「古いを交換するには、新しいアプリケーションにデータを移行するまったく新しいアプリケーションを実装し、古いアプリケーションおよび実行対象システム使用を停止します。 場合によっては、古いアプリケーションのクリエイティブな破棄を実装するには、独自のインフラストラクチャで新しいアプリケーションを展開してが可能な限り、クラウド ベースのソリューションにアプリケーションの代わりに移植を考慮する必要があります。  
  
従来の社内アプリケーションの代わりに、クラウド ベースのアプリケーションを配布すると、保守作業し、コストを削減だけでなく、従来のシステムと脆弱性を提供するアプリケーションを削除して、組織の攻撃を小さくします。活用攻撃します。 この方法は、同時にインフラストラクチャの従来のターゲットを排除しながら目的の機能を取得するには、組織の高速化できます。 すべての IT 資産には、クリエイティブな破棄の原則は適用されません、堅牢なセキュリティで保護された、クラウド ベースのアプリケーションを同時に展開するときに、従来のシステムやアプリケーションを除去する多くの場合に実行可能なオプションを提供します。  
  
### 従来のシステムやアプリケーションを分離します。  
基幹業務のユーザーとシステムの初期、セキュリティで保護された環境への移行の自然応用したものは、従来フォレストにはするが含まれている貴重な情報とシステムです。 安全性の低い環境に残っているアプリケーション、従来のシステムには、侵害のリスクを管理者特権がある場合がある、重要度が侵害の削減も表しています。 再設定を実行して、重要なビジネス資産を刷新には、効果的な管理を展開して、従来の設定およびプロトコルに対応する必要がないときに監視に集中することができます。  
  
オプションを評価するには、フォレストを新規に重要なデータを移動がある場合、「メイン」AD DS フォレストでレガシ システムとアプリケーションをさらに分離します。 1 つのアプリケーションと、実行するサーバーを置換するクリエイティブな破棄を実装することがありますが以外の場合に検討する最小限のセキュリティ システムやアプリケーションの追加の分離します。 たとえば、少数のユーザー] で使用されているが、小規模なドメインに移行できます LAN Manager ハッシュのような従来の資格情報を必要とするアプリケーションを作成するシステムのあるなし置換のオプションをサポートします。  
  
これらのシステム従来の設定の実装を強制するドメインを削除すると、後で現在のオペレーティング システムおよびアプリケーションのみをサポートするように設定するドメインのセキュリティを強化することができます。 ただし、従来のシステムやアプリケーション可能な限りの使用を停止することをお勧めします。 使用を停止するだけで実行できない場合、従来の母集団の小さなセグメントに、別のドメイン (またはフォレスト) にそれを分離することができます従来のインストールの残りの部分の向上を実行します。  
  
### エンドユーザーのセキュリティを簡素化します。  
ほとんどの組織で多くの場合、組織内の役割の種類が原因で最も重要な情報へのアクセスを持つユーザーは最低限の複雑なアクセスの制限とコントロールの学習に費やす時間があります。 組織内のすべてのユーザーのための包括的なセキュリティ教育機関向けプログラムする必要がありますしましたもに注意すべきで簡単に使用可能なユーザーに透明なと効率化の原則にあるコントロールの実装とセキュリティ準拠してください。  
  
たとえばをエグゼクティブとその他の Vip 使用する必要はセキュリティで保護されたワークステーションにアクセスする機密性の高いデータ システムでは、重要度の低いデータにアクセスするその他のデバイスを使用することができるようにするポリシーを定義することがあります。 これは、覚えやすいユーザー向けの単純な原則ですが、いくつかの方法を適用するためにバックエンドのコントロールを実装することができます。  

ユーザーが自分のスマート カードを使用して、セキュリティで保護されたシステムにログオンしている場合にのみ機密データへのアクセスを許可するように、[認証メカニズム保証](https://technet.microsoft.com/library/dd391847(v=WS.10).aspx)を使用できますして IPsec とユーザーの権限制限を使用することがシステムを制御するには機密性の高いデータのリポジトリに接続します。 [Microsoft データの分類ツールキット](https://www.microsoft.com/download/details.aspx?id=27123)を使用するには、堅牢なファイル分類インフラストラクチャを構築して、アクセスの試行の特性に基づいてデータへのアクセスを制限する[動的なアクセスの制御](http://blogs.technet.com/b/windowsserver/archive/2012/05/22/introduction-to-windows-server-2012-dynamic-access-control.aspx)を実装することを翻訳します。技術的なコントロールにビジネス ルールです。  
  
ユーザーの観点からセキュリティで保護されたシステム「だけでは、」から機密性の高いデータにアクセスするため、安全でないシステムからしようとしています"しないだけです。"。 ただしの監視と管理、環境の観点からのユーザーのアクセス方法機密性の高いデータとシステムでは、簡単に異常なアクセスを検出するために特定のパターンを作成するのには参加しています。  
  
スマート カードであるかどうか、認証に別の方法を検討が不足しているパスワード ポリシー、特に VIP ユーザーの場合は、ユーザー、複雑な長いパスワード抵抗の結果が混在する環境で (フォーム要素の数で発生して本の指でスワイプ リーダーなどによって保護されているデータをさらには認証バイオメトリクス コントロールでは、他の機能の認証を強化するために)、プラットフォーム モジュール (TPM) は、ユーザーのコンピューターでチップ信頼されています。 多要素認証ができない資格情報の盗難攻撃場合は、ユーザーに、コントロールを使用する認証を行って、コンピューターが侵害既にを割り当てるにはより強力なパスワードのユーザー アカウント従来の対象ユーザー名とパスワードのコントロールは困難です。  
