---
ms.assetid: ba28bd05-16e6-465f-982b-df49633cfde4
title: 攻撃に対してドメイン コントローラーをセキュリティで保護する
description: ''
ms.author: joflore
author: MicrosoftGuyJFlo
manager: mtillman
ms.date: 06/18/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 6be2899e85b68578518d9de1805c287367608163
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59863093"
---
# <a name="securing-domain-controllers-against-attack"></a>攻撃に対してドメイン コントローラーをセキュリティで保護する

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

*鉄則 3 の番号します。悪意のある攻撃者は、コンピューターに物理的なアクセスを無制限に場合、もはやそれは、コンピューターではないです。* - [(バージョン 2.0) のセキュリティに関する 10 の鉄則](https://technet.microsoft.com/security/hh278941.aspx)  
  
ドメイン コント ローラーは、サービスと企業は、サーバー、ワークステーション、ユーザー、およびアプリケーションを効果的に管理できるようにデータを提供するだけでなく、AD DS データベースの物理記憶域を提供します。 悪意のあるユーザーがドメイン コント ローラーへのアクセス権限を入手すると場合、そのユーザーを変更が破損すると、したり、AD DS データベースを破棄し、拡張機能のすべてのシステムと Active Directory で管理されているアカウントでします。  
  
ドメイン コント ローラーのセキュリティ侵害を意味こと、Active Directory フォレストできると考えるべき trustworthy もう一度、既知の適切なバックアップを使用して回復することができる場合を除き、ドメイン コント ローラーから読み取るし、AD DS データベース内のあらゆるものへの書き込み、ため、およびプロセスで、セキュリティ侵害を許可されている、ギャップを閉じます。  
  
攻撃者の準備、ツール、およびスキル、変更、または AD DS にも回復不可能な破損によっては、数日や数週間ではない、時間を分単位でデータベースを完了することができます。 問題のない時間を Active Directory にアクセスする権限が、攻撃者が特権のアクセスと今のところ、攻撃者が計画的な量を取得します。 ドメイン コント ローラーを侵害することでは、アクセス、広範囲の伝達を最も効率的なパスまたはメンバー サーバー、ワークステーション、および Active Directory の破棄を最も直接的のパスを提供できます。 このため、個別に、一般的な Windows インフラストラクチャよりも厳密ドメイン コント ローラーを保護する必要があります。  

## <a name="physical-security-for-domain-controllers"></a>ドメイン コント ローラーの物理的なセキュリティ

このセクションでは、ドメイン コント ローラー、ドメイン コント ローラーが物理かどうか、またはデータ センターの場所、ブランチ オフィス、および基本的なインフラストラクチャのコントロールだけでもリモートの場所での仮想マシンの物理的な保護についてを説明します。  
  
### <a name="datacenter-domain-controllers"></a>データ センターのドメイン コント ローラー  
  
#### <a name="physical-domain-controllers"></a>物理ドメイン コント ローラー

データ センターでは、専用のセキュリティで保護されたラックやケージ、サーバーの一般的な母集団とは別の物理ドメイン コント ローラーをインストールしてください。 可能であれば、トラステッド プラットフォーム モジュール (TPM) チップを搭載したドメイン コント ローラーを構成する必要があり、ドメイン コント ローラーのサーバーですべてのボリュームが BitLocker ドライブ暗号化で保護する必要があります。 一般に、BitLocker は、1 桁のパーセンテージでパフォーマンスのオーバーヘッドが追加されますが、ディスクがサーバーから削除された場合でも、侵害からディレクトリを保護します。 BitLocker では、ブート ファイルの変更と、元のバイナリを読み込むことができるように、回復モードに起動するサーバーがあるために、ルートキットなどの攻撃からシステムを保護することができます。 ドメイン コント ローラーに (ハードウェア RAID の有無にかかわらず) ローカルで接続されている記憶域を使用する必要がありますソフトウェア RAID、シリアル接続 SCSI、SAN/NAS storage を使用するドメイン コント ローラーが構成されている、またはダイナミック ボリューム、BitLocker を実装することはできません、たびに考えられる。  
  
#### <a name="virtual-domain-controllers"></a>仮想ドメイン コント ローラー 

仮想ドメイン コント ローラーを実装する場合は、環境内の他の仮想マシンよりも、別々 の物理ホスト上のドメイン コント ローラーを実行することを確認してください。 サード パーティ製の仮想化プラットフォームを使用する場合でもは、Windows Server 2012 または最小限のアタック サーフェイスを提供し、それがホストするドメイン コント ローラーで管理できる Windows Server 2008 R2 で HYPER-V サーバー上の仮想ドメイン コント ローラーを展開することを検討してください。仮想化ホストの残りの部分で管理されていますではなく。 仮想化インフラストラクチャの管理に System Center Virtual Machine Manager (SCVMM) を実装する場合は、どのドメイン コント ローラーの仮想マシンが存在して、ドメイン コント ローラー上の物理ホストの管理を委任することができます。承認された管理者に対して自身です。 記憶域管理者が仮想マシンのファイルにアクセスするを防ぐために、仮想ドメイン コント ローラーのストレージを分離することも検討する必要があります。  
  
### <a name="branch-locations"></a>ブランチの場所  
  
#### <a name="physical-domain-controllers-in-branches"></a>ブランチ内の物理のドメイン コント ローラー

場所を複数のサーバーに存在がデータ センターのサーバーが保護されている度合いを物理的に保護されていない、サーバーのすべてのボリュームの物理ドメイン コント ローラーを TPM チップと BitLocker ドライブ暗号化を構成する必要があります。 ドメイン コント ローラーは、支社の場所で施錠された部屋に格納することはできない場合、は、それらの場所で Rodc の展開を検討してください。  
  
#### <a name="virtual-domain-controllers-in-branches"></a>分岐での仮想ドメイン コント ローラー

可能であれば、ブランチ オフィスで、サイト内の他の仮想マシンよりも、別々 の物理ホストで仮想ドメイン コント ローラーを実行してください。 仮想ドメイン コント ローラーが仮想サーバーの作成の残りの部分から別の物理ホストで実行できませんが、支社でする必要がありますを実装する TPM チップと BitLocker ドライブ暗号化には少なくとも、仮想ドメイン コント ローラーを実行するホストで、すべてのホスト可能な場合。 ブランチ オフィスのサイズと物理的なホストのセキュリティ、によって、支社の場所で Rodc の展開を検討してください。  
  
### <a name="remote-locations-with-limited-space-and-security"></a>リモートの場所の限られたスペースとセキュリティ

仮想化ワークロードを実行できるサーバーをリモートの場所にインストールする必要があります。、インフラストラクチャには、1 台の物理サーバーのみをインストールできる場所が含まれている場合は、BitLocker ドライブ暗号化は、すべてを保護するように構成する必要があります。サーバー内のボリューム。 サーバー上の 1 つの仮想マシンは、ホストで別々 の仮想マシンとして実行されている他のサーバーと、RODC を実行する必要があります。 RODC の展開に含まれるためにの計画については、[読み取り専用ドメイン コント ローラーの計画と展開ガイド](https://go.microsoft.com/fwlink/?LinkID=135993)します。 展開して、仮想化ドメイン コント ローラーのセキュリティ保護の詳細については、次を参照してください。 [、Hyper-v でのドメイン コント ローラーの実行](https://technet.microsoft.com/library/dd363553(v=ws.10).aspx)TechNet web サイト。 詳細については、HYPER-V を強化するためのガイダンス、仮想マシンの管理を委任し、仮想マシンの保護を参照してください、 [HYPER-V セキュリティ ガイド](https://www.microsoft.com/download/details.aspx?id=16650)Solution Accelerator、Microsoft web サイト。  
  
## <a name="domain-controller-operating-systems"></a>ドメイン コント ローラーのオペレーティング システム

組織内でサポートし、ドメイン コント ローラーの母集団で従来のオペレーティング システムの使用停止を優先順位を Windows Server の最新バージョンですべてのドメイン コント ローラーを実行する必要があります。 ドメイン コント ローラーから排除することの従来のドメイン コント ローラーを保持することでの新機能できない可能性がある使用可能なドメインまたはフォレストで従来のオペレーティング システムを実行しているドメイン コント ローラーとセキュリティをかかることができます少なくありません。 ドメイン コント ローラーする必要がある新しくインストールし昇格ではなく以前のオペレーティング システムまたはサーバーの役割からのアップグレードドメイン コント ローラーのインプレース アップグレードを実行およびはありませんが、オペレーティング システムが新しくインストールされていないサーバーで、AD DS インストール ウィザードを実行します。 新たにインストールされているドメイン コント ローラーを実装すると、従来のファイルと設定が誤ってが残らないドメイン コント ローラーで、一貫性があり、セキュリティで保護されたドメイン コント ローラーの構成の適用を簡素化することを確認します。  
  
## <a name="secure-configuration-of-domain-controllers"></a>ドメイン コント ローラーの安全な構成

Gpo を適用できる、その後ドメイン コント ローラーの初期のセキュリティの構成基準を作成する数のうちいくつかは、既定では、Windows インストールは、自由に利用できるツールを使用できます。 ここでは、これらのツールを説明します。  
  
### <a name="security-configuration-wizard"></a>セキュリティの構成ウィザード  

すべてのドメイン コント ローラーは、初期のビルド時にロック ダウンする必要があります。 これは、「基本ビルド」のドメイン コント ローラー サービス、レジストリ、システム、および WFAS の設定を構成する Windows Server でネイティブに付属しているセキュリティ構成ウィザードを使用して実現できます。 設定を保存して、ドメイン コント ローラーの一貫性のある構成を適用する各ドメイン、フォレスト内のドメイン コント ローラーの OU にリンクできる GPO にエクスポートします。 ドメインに複数のバージョンの Windows オペレーティング システムが含まれている場合は、対応するバージョンのオペレーティング システムを実行しているドメイン コント ローラーだけに Gpo を適用する Windows Management Instrumentation (WMI) フィルターを構成できます。  
  
### <a name="microsoft-security-compliance-toolkit"></a>Microsoft セキュリティ コンプライアンス ツールキット

[Microsoft セキュリティ コンプライアンス ツールキット](https://www.microsoft.com/download/details.aspx?id=55319)ドメイン コント ローラーの設定は、包括的な構成基準の展開を行い、Gpo によって適用されるドメイン コント ローラーを生成するためにセキュリティの構成ウィザードの設定と組み合わせることができますActive directory ドメイン コント ローラーの OU に展開されます。  
  
### <a name="rdp-restrictions"></a>RDP の制限

すべてのドメイン コント ローラーをフォレスト内の Ou にリンクしているグループ ポリシー オブジェクトは、承認されたユーザーとシステム (たとえば、ジャンプ サーバー) からのみ RDP 接続を許可するように構成する必要があります。 これにより、ユーザー権利の設定と WFAS 構成の組み合わせによって実現でき、ポリシーが一貫して適用されるよう Gpo に実装する必要があります。 バイパスされるので、[次へ] のグループ ポリシーの更新は、適切な構成をシステムを返します。  
  
### <a name="patch-and-configuration-management-for-domain-controllers"></a>修正プログラムおよびドメイン コント ローラーの構成の管理

直感に反する感じるかもしれませんが、ドメイン コント ローラーとその他の重要なインフラストラクチャのコンポーネント、一般的な Windows インフラストラクチャから個別に修正プログラムの適用を検討してください。 インフラストラクチャ内のすべてのコンピューターのエンタープライズ構成管理ソフトウェアを利用している場合は、妥協し、そのソフトウェアによって管理されるすべてのインフラストラクチャ コンポーネントを破棄したり、システム管理ソフトウェアのセキュリティ侵害を使用できます。 一般的な母集団からドメイン コント ローラーの更新プログラムとシステム管理を分離すると、その管理を厳密に制御だけでなく、ドメイン コント ローラーにインストールされているソフトウェアの量を軽減できます。
  
### <a name="blocking-internet-access-for-domain-controllers"></a>ドメイン コント ローラーのインターネット アクセスをブロック  

Active Directory セキュリティ評価の一部として実行されるチェックの 1 つは、使用とドメイン コント ローラー上の Internet Explorer の構成です。 ドメイン コント ローラーで Internet Explorer (またはその他の任意の web ブラウザー) を使用する必要がありますされませんが、何千ものドメイン コント ローラーの分析が明らかに特権を持つユーザーが組織のイントラネットを参照する Internet Explorer を使用する多くの場合、またはインターネットです。  
  
「構成が正しくない」セクションで説明したよう[侵害の手段](../../../ad-ds/plan/security-best-practices/Avenues-to-Compromise.md)、高い特権を使用して Windows インフラストラクチャ内の最も強力なコンピューターのいずれかからのインターネット (または感染したイントラネット) を参照(これは、既定でドメイン コント ローラーにローカルでログオンを許可されている唯一のアカウント) アカウントでは、特別なリスクを組織のセキュリティを表示します。 ドライブのダウンロード、マルウェアに感染した「ユーティリティ」のダウンロードを使用しているかどうか攻撃者は、完全に侵害または Active Directory 環境を破棄する必要があるすべてのリソースにアクセスできます。  
  
Windows Server 2012、Windows Server 2008 R2、Windows Server 2008、および現在のバージョンの Internet Explorer は、さまざまなほとんどの場合、ドメイン コント ローラーと権限を持つアカウントが使用されたへの悪意のあるダウンロードからの保護インターネットを閲覧したり、ドメイン コント ローラーは、Windows Server 2003 を実行していた新しいオペレーティング システムとブラウザーによって提供される保護機能が意図的に無効になっています。  
  
ドメイン コント ローラー上の web ブラウザーの起動を禁止するか、ポリシーが、だけでなく、技術的な制御、およびドメイン コント ローラーをインターネットへのアクセスを許可しない必要があります。 ドメイン コント ローラーは、サイト間でレプリケートする場合に、サイト間でセキュリティで保護された接続を実装する必要があります。 詳細な構成手順については、このドキュメントのスコープ外は、さまざまな誤用または正しく構成されていないし、その後の侵害にドメイン コント ローラーの機能を制限するコントロールを実装できます。  
  
### <a name="perimeter-firewall-restrictions"></a>境界ファイアウォールの制限

境界ファイアウォールは、ドメイン コント ローラーからインターネットへの発信接続をブロックするように構成する必要があります。 提供されているガイドラインに従って、サイト間の通信を許可するように境界ファイアウォールを構成することができますが、ドメイン コント ローラーは、サイトの境界を越えて通信する必要があります、[ドメインと信頼関係のファイアウォールを構成する方法](https://support.microsoft.com/kb/179442) 、Microsoft サポート web サイト。  
  
### <a name="dc-firewall-configurations"></a>DC のファイアウォールの構成  

前述のように、セキュリティの構成ウィザードを使用してドメイン コント ローラーのセキュリティが強化された Windows ファイアウォールの構成設定をキャプチャする必要があります。 ファイアウォールの構成設定は、組織の要件を満たすし、構成設定を適用する Gpo を使用してセキュリティの構成ウィザードの出力を確認する必要があります。  
  
### <a name="preventing-web-browsing-from-domain-controllers"></a>ドメイン コント ローラーからの Web 参照の防止

ドメイン コント ローラーがインターネットにアクセスするを防ぐために、ドメイン コント ローラー上の web ブラウザーの使用を防ぐために、AppLocker の構成、「ブラック_ホール」プロキシの構成、および WFAS 構成の組み合わせを使用できます。
