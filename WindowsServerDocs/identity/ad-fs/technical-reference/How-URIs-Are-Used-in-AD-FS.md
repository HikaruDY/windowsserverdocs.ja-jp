---
ms.assetid: 53ee93e2-09ea-4f8b-adb7-c24c59f055ea
title: "AD FS での Uri の使用方法"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 305bf0cece742c961604dacda7e27b8eac8065e5
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/12/2017
---
>適用対象: Windows Server 2016、Windows Server 2012 R2

# <a name="how-uris-are-used-in-ad-fs"></a>AD FS での Uri の使用方法
Uniform Resource Identifier \(URI\) は、一意識別子として使用されている文字の文字列です。  AD FS で Uri を使用して、両方のパートナー ネットワーク アドレスと構成オブジェクトを識別します。  使用すると、パートナー ネットワーク アドレスを識別する、URI は常に、URL にです。  構成オブジェクトの識別に使用する場合は URN または URL の URI 可能性があります。  Uri の概要については、次を参照してください。 [RFC 2396](https://go.microsoft.com/fwlink/?LinkId=48289)と[RFC 3986](https://go.microsoft.com/fwlink/?LinkId=90453)します。  
  
## <a name="uris-as-partner-network-addresses"></a>パートナー ネットワーク アドレスとしての Uri  
AD FS で管理者がもっともよく処理ネットワーク アドレスの Url を次に示します。  
  
-   WS\ フェデレーション、SAML、WS\ 信頼、フェデレーション メタデータ、WS\ MetadataExchange、プライバシー、および組織などの Url を含む、フェデレーション サービスの Url  
  
-   証明書利用者信頼、WS\ フェデレーション、SAML、フェデレーション メタデータ Url などの Url  
  
-   WS\ フェデレーション、SAML、フェデレーション メタデータ Url など、要求プロバイダー信頼の Url  
  
## <a name="uris-as-object-identifiers"></a>オブジェクト識別子としての Uri  
次の表では、AD FS で管理者がもっともよく処理する id について説明します。  
  
|識別子名|説明|比較|  
|-------------------|---------------|---------------|  
|フェデレーション サービス識別子|この識別子を使用して、フェデレーション サービスを識別します。  このフェデレーション サービス、および要求このフェデレーション サービスを発行する要求プロバイダーから要求を使用する証明書利用者によって使用されます。|ユーザーは、このフェデレーション サービスの要求プロバイダーから要求を要求、要求の対象を識別する、フェデレーション サービス識別子が使用されます。<br /><br />このフェデレーション サービスは、要求プロバイダーから要求を受信したときに、要求が、フェデレーション サービス識別子を探してでそのスコープ指定されたことを確認することを確認します。<br /><br />証明書利用者がこのフェデレーション サービスからの信頼性情報を受信しているとき、証明書利用者は、要求の発行者がフェデレーション サービス識別子と一致することを確認します。|  
|証明書利用者識別子|この識別子を使用して、このフェデレーション サービスに証明書利用者を識別します。  証明書利用者に要求を発行するときに使用されます。|ユーザーは、このフェデレーション サービスから証明書利用者の要求を要求、要求の対象とする証明書利用者を識別する、証明書利用者の識別子が使用されます。  この比較は行われます一致する \(see below\) のプレフィックスを使用します。<br /><br />証明書利用者の要求を受信すると、ため、信頼性情報が対象としたことを確認するセキュリティ トークン内の id のことを確認できます。|  
|要求プロバイダー識別子|この識別子を使用して、このフェデレーション サービスに要求プロバイダーを識別します。  要求プロバイダーから要求を受信するときに使用されます。|このフェデレーション サービスが要求プロバイダーから要求を受信しているとき、このフェデレーション サービスは、要求の発行者が要求プロバイダーの識別子と一致することを確認します。|  
|要求の種類|この識別子を使用して、要求の種類を定義します。  このフェデレーション サービス、要求プロバイダー、および信頼性情報を送受信するときに証明書利用者によって使用されます。|フェデレーション サービスは、要求プロバイダーから要求を受け取るときに、対応する要求プロバイダー信頼に関連付けられている要求規則すると、管理者の要求の種類を比較し、要求を処理します。  証明書利用者信頼に関連付けられている要求規則もすると、管理者は、要求プロバイダー信頼規則からの要求から要求の種類を比較して、発行する要求を決定します。|  
  
## <a name="uri-prefix-matching-for-relying-party-identifiers"></a>証明書利用者のパーティ識別子に一致する URI プレフィックス  
URI のパス構文は階層構造でまとめは、すべてで区切られた"\/」文字だけまたは":"文字です。  したがって、パスは区切り文字に基づいてパス セクションに分割する可能性があります。  プレフィックス一致の場合、各セクションでは、一致規則に従う完全な一致である必要があります \ (これらの規則は、大文字小文字 matches\ の)。 一致ルールに関する詳細についてを参照してください、RFC を上記します。  
  
証明書利用者がフェデレーション サービスへの要求で識別されると、ときに AD FS を使ってプレフィックス一致ロジック、一致する証明書利用者の信頼で AD FS 構成データベースがないか確認します。  
  
たとえば場合は、AD FS 構成データベース内の証明書利用者のパーティ識別子 \(URI1\) は、証明書利用者のパーティ識別子、入力方向にプレフィックス要求の \(URI2\)、次の要件があります。  
  
-   末尾の区切り記号 \(slashes and colons\) のパス セクションまたは機関を無視します。  
  
-   URI1 と URI2 のスキームと機関の部分は大文字と小文字が完全に一致する必要があります。  
  
-   URI1 の各パス セクションは完全に一致する必要があります \ (大文字小文字の区別 chosen\ に基づく) には、URI2 の対応するパス セクション  
  
-   URI2、URI1 より多くのパス セクションがありますが、URI1 に URI2 より多くのパス セクションはいけません。  
  
-   URI1 に URI2 より多くのパス セクションを持つことはできません。  
  
-   URI1 にクエリ文字列がある場合は、それが URI2 のクエリ文字列と正確に一致する必要があります。  
  
-   URI1 にフラグメントがある場合は、それが URI2 のフラグメントと正確に一致する必要があります。  
  
次の表は、その他の例を示します。  
  
|証明書利用者の識別子の AD FS 構成データベース|証明書利用者の要求メッセージ内のパーティーの識別子|識別子と一致する構成の識別子を要求しますか。|理由|  
|------------------------------------------------------------|-----------------------------------------------|------------------------------------------------------------|----------|  
|http:///\/contoso.com|http:///\/contoso.com|場合は TRUE。|完全に一致します。|  
|http:///\/contoso.com\/|http:///\/contoso.com|場合は TRUE。|末尾のスラッシュは無視されます。|  
|http:///\/contoso.com|http:///\/contoso.com\/|場合は TRUE。|末尾のスラッシュは無視されます。|  
|http:///\/contoso.com|http:///\/contoso.com\/hr|場合は TRUE。|URI1 にパスと一致するスキームと機関を URI2 にはありません。|  
|http:///\/contoso.com\/hr|http:///\/contoso.com\/hr\/web|場合は TRUE。|最初のパス セクションが一致、URI1 に 2 番目のパス セクションがありません。|  
|http:///\/contoso.com\/hr|http:///\/contoso.com\/hr\/web\/?m\=t|場合は TRUE。|上記と同じ理由で、クエリ文字列は変化しません|  
|http:///\/contoso.com\/hr\/|http:///\/contoso.com\/hrw\/main|FALSE|URI1 のパス セクション 1 は、URI2 のパス セクション 1 と一致しません|  
|http:///\/contoso.com\/hr|http:///\/contoso.com|FALSE|URI1 に URI2 より多くのパス セクションがあります。|  
|http:///\/contoso.com\/hr|http:///\/contoso.com\/hrweb|FALSE|最初のパス セクションが一致しません。|  
|http:///\/contoso.com\/?m\=t|http:///\/contoso.com\/?m\=f|FALSE|クエリ文字列の部分が一致しません|  
|https:\/\/contoso.com|http:///\/contoso.com|FALSE|スキーム部分が一致しません|  
|http:///\/sts.contoso.com|http:///\/contoso.com|FALSE|機関部分が一致しません|  
|http:///\/contoso.com|http:///\/sts.contoso.com|FALSE|機関部分が一致しません|  
  

