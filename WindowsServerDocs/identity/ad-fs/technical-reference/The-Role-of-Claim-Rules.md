---
ms.assetid: 65e474b5-3076-4ba3-809d-a09160f7c2bd
title: "要求規則の役割"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: e47dbecdeee620d3a237ad8d8c41a550d3ef069c
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/12/2017
---
>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

# <a name="the-role-of-claim-rules"></a>要求規則の役割
Active Directory フェデレーション サービス \(AD FS\) 内のフェデレーション サービスの全体的な関数では、信頼性情報のセットを含むトークンを発行します。 AD FS が許可して発行は、どのようなクレームに関する決定は、要求規則によって左右されます。  
  
## <a name="what-are-claim-rules"></a>要求規則とは何ですか。  
要求規則は 1 つまたは複数の入力方向の要求を行う、条件を適用するビジネス ロジックのインスタンスを表します \ (し y\ x の場合)、条件のパラメーターに基づく 1 つまたは複数の送信要求を生成します。 着信および発信のクレームの詳細については、次を参照してください。[The Role of Claims](The-Role-of-Claims.md)します。  
  
要求パイプラインを通過する要求のフローを制御するビジネス ロジックを実装する必要がある場合は、要求規則を使用します。 要求パイプラインは、複数の論理概念の中に、エンド ツー エンド プロセス フローの要求は、要求規則は次の要求の発行プロセスを通過する要求のフローをカスタマイズに使用できる実際の管理用の要素。  
  
要求パイプラインの詳細については、次を参照してください。[The Role of the Claims Engine](The-Role-of-the-Claims-Engine.md)します。  
  
要求規則は、次の利点を提供します。  
  
-   管理者が要求プロバイダーからの要求を信頼する側の [時間のビジネス ロジックを適用するためのメカニズムを提供します。  
  
-   管理者がどの要求が証明書利用者にリリースされたを定義するためのメカニズムを提供します。  
  
-   許可するかを特定のユーザー アクセスを拒否する管理者に、多機能かつ詳細な claims\ ベースの承認機能を提供します。  
  
### <a name="how-claim-rules-are-processed"></a>要求規則の処理方法  
要求規則は、要求パイプラインを使用して処理、*要求エンジン*します。 要求エンジンは、ユーザーによって提示される入力方向の要求のセットを検査するフェデレーション サービスの論理コンポーネントであり、各規則のロジックによって生成されます、信頼性情報のセットが出力されます。  
  
同時に、要求規則エンジンと、特定のフェデレーションによる信頼に関連付けられた規則は、入力方向の要求は渡さを特定の条件を満たすためにフィルター処理されたまたは、フェデレーション サービスによって出力方向の要求として発行前に、まったく新しい信頼性情報のセットに変換をする必要があるかどうかを調べる要求のセットをします。  
  
このプロセスの詳細については、次を参照してください。[The Role of the Claims Engine](The-Role-of-the-Claims-Engine.md)します。  
  
## <a name="what-are-claim-rule-templates"></a>要求規則テンプレートとは何ですか。  
AD FS には、定義済みを容易に設計されたテンプレートを選択し、特定のビジネス ニーズに最も適切な要求規則を作成する要求規則のセットが含まれています。 要求規則のテンプレートは、要求規則の作成プロセス中にのみ使用します。  
  
AD FS の管理スナップインには、ルールのみを作成できます要求規則テンプレートを使用します。 要求規則テンプレートを選択し、規則のロジックに必要なデータを入力し、構成データベースに保存する、スナップインを使用した後はなります \ (からそのポイント forward\) で参照する要求規則として UI です。  
  
### <a name="how-claim-rule-templates-work"></a>要求規則テンプレートのしくみ  
一見、要求規則テンプレートは、入力方向の要求を特定のデータとプロセスのロジックを収集するスナップインによって提供されるだけ入力フォームが表示されます。 ただしより詳細なレベルでは、必要な要求規則言語フレームワーク言語を深く理解しなくても迅速に規則を作成するために必要な基本ロジックを構成する規則テンプレートのストアを要求します。  
  
ユーザー インターフェイスで提供される各テンプレート \(UI\) は、最も一般的に必要な管理タスクに基づいた、事前設定済みの要求の規則言語構文を表します。 規則テンプレートの 1 つただし、例外です。 このテンプレートは、カスタム規則テンプレートと呼ばれます。 このテンプレートを使用構文が事前に設定されていません。 代わりに、要求規則言語構文を使用して要求規則テンプレート フォームの本文に要求規則言語構文を直接作成する必要があります。  
  
要求規則言語構文を使用する方法の詳細については、次を参照してください。[要求規則言語の役割](The-Role-of-the-Claim-Rule-Language.md)AD FS 展開ガイドにします。  
  
> [!TIP]  
> をクリックして、いつでも規則に関連付けられた要求規則言語を表示することができます、**[規則言語の**要求規則のプロパティにボタンをクリックします。  
  
### <a name="how-to-create-a-claim-rule"></a>要求規則を作成する方法  
要求規則は、フェデレーション サービス内の各フェデレーションの信頼関係のとは別に作成され、複数の信頼間で共有されていません。 要求規則テンプレートから規則を作成、要求規則言語を使用する規則を作成して最初から始めるか Windows PowerShell を使用して、規則をカスタマイズします。  
  
これらのオプションは、所定のシナリオに対して適切な方法の選択の柔軟性を提供するために共存します。 要求規則を作成する方法の詳細については、次を参照してください。[要求規則を構成する](https://technet.microsoft.com/library/ee913571.aspx)AD FSDeployment ガイドです。  
  
#### <a name="using-claim-rule-templates"></a>要求規則テンプレートを使用します。  
要求規則のテンプレートは、要求規則の作成プロセス中にのみ使用します。 要求規則を作成するのにには、次のテンプレートのいずれかを使用します。  
  
-   パススルーまたは入力方向の要求をフィルター処理  
  
-   入力方向の要求を変換します。  
  
-   LDAP 属性を要求として送信します。  
  
-   グループのメンバーシップを要求として送信します。  
  
-   カスタム規則を使用して要求を送信します。  
  
-   許可または拒否の入力方向の要求に基づいてユーザー  
  
-   すべてのユーザーを許可します。  
  
これらの各を記述する詳細については、要求規則テンプレートは、「[決定、型の要求規則テンプレートを使用する](Determine-the-Type-of-Claim-Rule-Template-to-Use.md)します。  
  
#### <a name="using-the-claim-rule-language"></a>要求規則言語を使用します。  
標準的な要求規則テンプレートの範囲を超えるビジネス規則、一連の要求規則言語を使用して、複雑なロジック条件を表現するのにカスタム規則テンプレートを使用することができます。 詳細については、カスタム ルールを使用して、次を参照してください。[をカスタム要求規則を使用するタイミング](When-to-Use-a-Custom-Claim-Rule.md)します。  
  
#### <a name="using-windows-powershell"></a>Windows PowerShell を使用します。  
またを作成または AD FS で規則を管理する Windows PowerShell で ADFSClaimRuleSet コマンドレット オブジェクトを使用することができます。 このコマンドレットで Windows PowerShell を使用する方法の詳細については、次を参照してください。[Windows PowerShell による AD FS の管理](https://go.microsoft.com/fwlink/?LinkID=179634)します。  
  
## <a name="what-is-a-claim-rule-set"></a>要求規則セットとは何ですか。  
次の図に示すように、要求規則セットは、特定のフェデレーションによる信頼の要求規則エンジンによる要求を処理する方法を定義する規則を 1 つまたは複数のグループです。 入力方向の要求がフェデレーション サービスによって受信される、要求規則エンジンは、適切な要求規則セットで指定されたロジックを適用します。 特定の信頼全体の信頼性情報の発行方法を決定するセット内の各規則のロジックの最終的な合計です。  
  
![AD FS の役割](media/adfs2_claimruleset.gif)  
  
要求規則は、特定の規則セット内で時系列要求エンジンによって処理されます。 この順序は重要な 1 つの規則の出力は、次の規則セット内の入力として使用できます。  
  
## <a name="what-are-claim-rule-set-types"></a>タイプを設定する要求規則は何ですか。  
要求規則セットの種類が信頼性情報の発行、承認、受け入れの信頼に関連付けられている要求規則セットが使用するかどうかを明確に識別するフェデレーションによる信頼の論理セグメントします。 各フェデレーションによる信頼できる 1 つまたは複数の要求規則セットの種類が使用される信頼の種類に応じて、それに関連付けられています。  
  
次の表では、さまざまな種類の要求規則セットでの要求プロバイダー信頼または証明書利用者の信頼関係を示しますについて説明します。  
  
|要求規則セットの種類|説明|使用されます。|  
|-----------------------|---------------|-----------|  
|受け入れ変換規則セット|特定を使用する要求規則のセットは、要求プロバイダー組織によって受け入れられる入力方向の要求と証明書利用者信頼に送信される出力方向の要求を指定するプロバイダーの信頼を要求します。<br /><br />この規則セットのソースに使用される入力方向の要求発行変換規則が要求プロバイダー組織で指定されているセットによって出力される要求になります。<br /><br />既定では、要求プロバイダー信頼ノードがという名前の要求プロバイダー信頼を含む**Active Directory**受け入れ変換規則セットのソース属性ストアを表すために使用されます。 この信頼オブジェクトは、フェデレーション サービスからネットワーク上の Active Directory データベースへの接続を表すために使用します。 この既定の信頼は、Active Directory によって認証されたユーザーの要求を処理するものと、削除することはできません。|要求プロバイダー信頼|  
|発行変換規則セット|証明書利用者に対して発行が信頼性情報を指定する証明書利用者信頼に対して使用する要求規則のセット。<br /><br />この規則セットのソースに使用される入力方向の要求は受け入れ変換規則によって出力される要求を最初になります。|証明書利用者の信頼|  
|発行承認規則セット|証明書利用者のトークンを受信することが許可されるユーザーを指定する証明書利用者信頼に対して使用する要求規則のセット。<br /><br />これらのルールは、ユーザーが証明書利用者に証明書利用者とは、そのため、アクセス要求を受け取るかどうかを決定します。<br /><br />発行承認規則を指定する場合を除き、すべてのユーザー アクセスが拒否されます既定でします。|証明書利用者の信頼|  
|委任承認規則セット|証明書利用者に他のユーザーの代理人として振る舞うことが許可されるユーザーを指定する証明書利用者信頼に対して使用する要求規則のセット。<br /><br />これらのルールは、引き続き、証明書利用者に送信されるトークン内で要求元を識別するときにユーザーを偽装する、要求元が許可されているかどうかを決定します。<br /><br />発行承認規則を指定する場合を除き、ユーザーが代理人として振る舞う既定でします。|証明書利用者の信頼|  
|偽装承認規則セット|Windows PowerShell を使用して、ユーザーかどうかを決定する構成したルールが完全にできるクレームのセットは、証明書利用者に対して別のユーザーを偽装します。<br /><br />これらのルールは、要求元が、証明書利用者に送信されるトークン内で要求元を識別することがなくユーザーを偽装できるかどうかを決定します。<br /><br />証明書利用者は、ユーザーが偽装されていることを把握していないため、非常に強力な機能はこの方法で別のユーザーを偽装します。|証明書利用者の信頼|  
  
選択の詳細については、組織で使用する適切な要求規則を参照して[決定、型の要求規則テンプレートを使用する](Determine-the-Type-of-Claim-Rule-Template-to-Use.md)します。  
  

