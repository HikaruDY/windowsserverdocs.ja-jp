---
ms.assetid: 39ecc468-77c5-4938-827e-48ce498a25ad
title: "付録 A - AD FS 要件の確認"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: d5cfb5de77843eebfc152b9c79ac55bab1fa7727
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/12/2017
---
# <a name="appendix-a-reviewing-ad-fs-requirements"></a>付録 a: AD FS の要件を確認します。

>適用対象: Windows Server 2012

Active Directory フェデレーション サービス (AD FS)、展開内で組織パートナーが正常に連携させる、ように最初アカウント、名前解決、および証明書の AD FS の要件をサポートするために会社のネットワーク インフラストラクチャが構成されていることを確認する必要があります。 AD FS には、次の種類の要件があります。  
  
> [!TIP]  
> その他の AD FS リソース リンクを見つけることができます、 [AD FS コンテンツ マップ](https://social.technet.microsoft.com/wiki/contents/articles/2735.aspx)ページ、Microsoft TechNet Wiki にします。 このページは、AD FS コミュニティのメンバーによって管理され、AD FS 製品チームによって定期的に監視します。  
  
## <a name="hardware-requirements"></a>ハードウェア要件  
次の最小および推奨ハードウェア要件は、フェデレーション サーバーとフェデレーション サーバー プロキシ コンピューターに適用されます。  
  
|ハードウェアの要件|最小要件|推奨要件|  
|------------------------|-----------------------|---------------------------|  
|CPU の速度|単一コア、1 ギガ ヘルツ (GHz)|クアッド コア 2 GHz|  
|RAM|1 GB|4 GB|  
|ディスク領域|50 MB|100 MB|  
  
## <a name="software-requirements"></a>ソフトウェアの要件  
AD FS は、Windows Server® 2012 オペレーティング システムに組み込まれているサーバーの機能に依存します。  
  
> [!NOTE]  
> フェデレーション サービスとフェデレーション サービス プロキシ役割サービスは、同じコンピューター上に共存ことはできません。  
  
## <a name="certificate-requirements"></a>証明書の要件  
証明書では、フェデレーション サーバー、フェデレーション サーバー プロキシ、要求に対応するアプリケーション、および Web クライアント間の通信をセキュリティで保護するで最も重要な役割を果たします。 証明書の要件は、かどうかを設定しているフェデレーション サーバーまたはフェデレーション サーバー プロキシ コンピューターでは、このセクションで説明したによって異なります。  
  
### <a name="federation-server-certificates"></a>フェデレーション サーバーの証明書  
フェデレーション サーバーでは、次の表に、証明書が必要です。  
  
|証明書の種類|説明|展開する前に理解する必要があります。|  
|--------------------|---------------|------------------------------------------|  
|Secure Sockets Layer (SSL) 証明書|これは、フェデレーション サーバーとクライアント間の通信を保護するためには、標準的な Secure Sockets Layer (SSL) 証明書です。|この証明書がフェデレーション サーバーまたはフェデレーション サーバー プロキシの既定の Web サイトをインターネット インフォメーション サービス (IIS) をバインドする必要があります。  フェデレーション サーバー プロキシでは、バインド、フェデレーション サーバー プロキシ構成ウィザードを正常に実行する前に IIS で構成しなければなりません。<br /><br />**推奨事項:**ため、この証明書は、AD FS のクライアントから信頼されている必要があります、たとえば、VeriSign の公的 (第三者) 証明機関 (CA) によって発行されたサーバー認証証明書を使用します。 **ヒント:**展開される AD FS の各インスタンスのフェデレーション サービス名を表すためにこの証明書のサブジェクト名を使用します。 このため、会社またはパートナーに組織の名前を最も良く表すもので、新しい CA によって発行された証明書のサブジェクト名の選択を検討する可能性があります。|  
|サービス通信証明書|この証明書は、フェデレーション サーバー間の通信を保護するための WCF メッセージ セキュリティを使用します。|既定では、SSL 証明書は、サービス通信証明書として使用されます。  これは、AD FS 管理コンソールを使用して変更できます。|  
|トークン署名証明書|これは、標準の X509 証明書を安全にフェデレーション サーバーが発行するすべてのトークンの署名に使用します。|トークン署名証明書は、秘密キーを含める必要があり、フェデレーション サービスにおいて信頼されたルートにチェーンする必要があります。 既定では、AD FS は自己署名証明書を作成します。 ただし、変更できますこの後で CA によって発行された証明書に、AD FS 管理スナップインで、組織のニーズに応じてを使用しています。|  
|トークン暗号化解除証明書|これは、パートナーのフェデレーション サーバーによって暗号化されたトークンの暗号化を解除するために使用される標準的な SSL 証明書です。 また、フェデレーション メタデータで発行されます。|既定では、AD FS は自己署名証明書を作成します。 ただし、変更できますこの後で CA によって発行された証明書に、AD FS 管理スナップインで、組織のニーズに応じてを使用しています。|  
  
> [!CAUTION]  
> トークン署名やトークン暗号化解除に使用される証明書は、フェデレーション サービスの安定性にとって重要です。 損失またはこの目的のために構成されているすべての証明書の計画外の削除は、サービスを妨害したり、ために、この目的のために構成されているすべての証明書をバックアップする必要があります。  
  
フェデレーション サーバーで使用される証明書の詳細については、次を参照してください。[フェデレーション サーバーの証明書要件](Certificate-Requirements-for-Federation-Servers.md)します。  
  
### <a name="federation-server-proxy-certificates"></a>フェデレーション サーバー プロキシの証明書  
フェデレーション サーバー プロキシでは、次の表に、証明書が必要です。  
  
|証明書の種類|説明|展開する前に理解する必要があります。|  
|--------------------|---------------|------------------------------------------|  
|サーバー認証証明書|これは、フェデレーション サーバー プロキシとインターネット クライアント間の通信にコンピューターを保護するためには、標準的な Secure Sockets Layer (SSL) 証明書です。|AD FS フェデレーション サーバー プロキシ構成ウィザードを正常に実行する前にこの証明書を既定の Web サイトをインターネット インフォメーション サービス (IIS) にバインドする必要があります。<br /><br />**推奨事項:**ため、この証明書は、AD FS のクライアントから信頼されている必要があります、たとえば、VeriSign の公的 (第三者) 証明機関 (CA) によって発行されたサーバー認証証明書を使用します。<br /><br />**ヒント:**展開される AD FS の各インスタンスのフェデレーション サービス名を表すためにこの証明書のサブジェクト名を使用します。 このため、自分の会社またはパートナーに組織の名前を最もよく表しているサブジェクト名の選択を検討します。|  
  
フェデレーション サーバー プロキシで使用される証明書の詳細については、次を参照してください。[フェデレーション サーバー プロキシの証明書の要件](Certificate-Requirements-for-Federation-Server-Proxies.md)します。  
  
## <a name="browser-requirements"></a>ブラウザーの要件  
AD FS クライアントとして動作する JavaScript 機能で、現在の Web ブラウザーを実現できますが、既定で提供されている Web ページが Internet Explorer バージョン 7.0、8.0、9.0、Mozilla Firefox 3.0、および windows Safari 3.1 のみに対してテストします。 JavaScript を有効にする必要があります、および cookie はブラウザー ベースでのサインインを有効になっていると正常に動作するサインアウトする必要があります。  
  
マイクロソフトの AD FS 製品チームは、次の表で正常に、ブラウザーとオペレーティング システムの構成をテストします。  
  
|ブラウザー|Windows 7|Windows Vista|  
|-----------|-------------|-----------------|  
|Internet Explorer 7.0|X|X|  
|Internet Explorer 8.0|X|X|  
|Internet Explorer 9.0|X|テストされていません|  
|FireFox 3.0|X|X|  
|Safari 3.1|X|X|  
  
> [!NOTE]  
> AD FS では、上記の表で示したすべてのブラウザーの 32 ビットおよび 64 ビットの両方のバージョンをサポートします。  
  
### <a name="cookies"></a>Cookie  
AD FS では、サインイン、サインアウト、シングル サインオン (SSO)、およびその他の機能を提供するクライアント コンピューターに格納する必要があります、セッション ベースや永続的な cookie を作成します。 したがって、クライアントのブラウザーは cookie を受け入れるように構成する必要があります。 認証に使用される cookie は、常に、発信元サーバーを対象として記載されているセキュア ハイパー テキスト転送プロトコル (HTTPS) セッション cookie です。 クライアントのブラウザーが、これらの cookie を許可するように構成されていない、AD FS が正しく機能することはできません。 永続的な cookie を使用して、ユーザーによる要求プロバイダーの選択を保持します。 AD FS サインイン ページの構成ファイルで構成設定を使用して、それらを無効にすることができます。  
  
TLS/SSL のサポートは、セキュリティ上の理由から必要があります。  
  
## <a name="network-requirements"></a>ネットワークの要件  
次のネットワーク サービスを適切に構成することは、組織内の AD FS の展開の成功にとって重要です。  
  
### <a name="tcpip-network-connectivity"></a>TCP/IP ネットワーク接続  
クライアントの間に TCP/IP ネットワーク接続が存在する必要があります関数に、AD FS のドメイン コント ローラーです。フェデレーション サービス、フェデレーション サービス プロキシ (使用されている) 場合、および AD FS Web エージェントをホストするコンピューターを選択します。  
  
### <a name="dns"></a>DNS  
Active Directory ドメイン サービス (AD DS) 以外の AD FS の運用に不可欠なプライマリ ネットワーク サービスは、ドメイン ネーム システム (DNS) です。 DNS が展開されると、ユーザーは、コンピュータおよび IP ネットワーク上の他のリソースへの接続に覚えやすいフレンドリ コンピューター名を使用できます。  
  
 Windows Server 2008 では、Windows NT 4.0 ベースのネットワークで使用されていた Windows インターネット ネーム サービス (WINS) NetBIOS 名前解決ではなく、名前解決に DNS を使用します。 それはそれを必要とするアプリケーションに WINS を使用することも可能です。 ただし、AD DS および AD FS には、DNS 名前解決が必要です。  
  
AD FS をサポートするために DNS を構成するプロセスは、かどうかによって異なります。  
  
-   既存の DNS インフラストラクチャが存在します。 ほとんどのシナリオで DNS が既に構成されて、ネットワーク全体で企業ネットワーク内の Web ブラウザー クライアントがインターネットにアクセスできるようにします。 インターネット アクセスと名前解決は、AD FS の要件であるために、このインフラストラクチャは、AD FS の展開のために使用すると見なされます。  
  
-   企業ネットワークにフェデレーション サーバーを追加する予定があります。 企業ネットワーク内のユーザーを認証するために、フェデレーション サービスを実行している内部サーバーの CNAME を返す、企業ネットワーク フォレスト内の内部 DNS サーバーを構成する必要があります。 詳細については、次を参照してください。[フェデレーション サーバーの名前解決要件](Name-Resolution-Requirements-for-Federation-Servers.md)します。  
  
-   フェデレーション サーバー プロキシを境界ネットワークに追加する予定があります。 アイデンティティ パートナー組織の企業ネットワークに配置されているユーザー アカウントを認証できるようにするときに、内部のフェデレーション サーバー プロキシの CNAME を返す、企業ネットワーク フォレスト内の内部 DNS サーバーを構成する必要があります。 フェデレーション サーバー プロキシの追加に対応するために DNS を構成する方法については、次を参照してください。[フェデレーション サーバー プロキシの名前解決要件](Name-Resolution-Requirements-for-Federation-Server-Proxies.md)します。  
  
-   テスト ラボ環境の DNS を設定します。 AD FS を使ってテスト ラボ環境で、単一のルート権威 DNS サーバーがない場合は、次の 2 つまたは複数のフォレスト間で名前のクエリは適切に転送できるように、DNS フォワーダーをセットアップする必要がある可能性が。 AD FS テスト ラボ環境をセットアップする方法の詳細については、次を参照してください。 [AD FS ステップ バイ ステップとハウツー ガイド](https://go.microsoft.com/fwlink/?LinkId=180357)します。  
  
## <a name="attribute-store-requirements"></a>属性ストアの要件  
AD FS には、ユーザーを認証し、それらのユーザーのセキュリティ クレームを抽出するためには、少なくとも 1 つの属性ストアが必要です。 AD FS をサポートしているストアは、属性の一覧を参照してください[、属性ストアの役割](../../ad-fs/technical-reference/The-Role-of-Attribute-Stores.md)AD FS 設計ガイドにします。  
  
> [!NOTE]  
> AD FS は、既定では、Active Directory 属性ストアを自動的に作成します。  
  
属性ストアの要件は、組織が、アカウント パートナー (フェデレーション ユーザーをホストしている) またはリソース パートナー (フェデレーション アプリケーションをホストしている) として機能するかどうかによって異なります。  
  
### <a name="ad-ds"></a>AD DS  
正常に機能する AD FS のいずれか、アカウント パートナー組織とリソース パートナー組織のドメイン コント ローラーで Windows Server 2003 SP1、Windows Server 2003 R2、Windows Server 2008、または Windows Server 2012 が実行されている必要があります。  
  
AD FS がインストールされているし、ドメインに参加しているコンピューターで構成された、そのドメインの Active Directory ユーザー アカウント ストアが利用可能に選択可能な属性ストアとして。  
  
> [!IMPORTANT]  
> AD FS には、インターネット インフォメーション サービス (IIS) のインストールが必要であるために、セキュリティのための運用環境でドメイン コント ローラーでない AD FS ソフトウェアをインストールすることをお勧めします。 ただし、Microsoft カスタマー サービス サポートによって、この構成がサポートされています。  
  
#### <a name="schema-requirements"></a>スキーマの要件  
AD FS は、スキーマの変更や AD DS への機能レベルの変更は必要ありません。  
  
#### <a name="functional-level-requirements"></a>機能レベルの要件  
AD FS の機能のほとんどには、正常に機能する AD DS の機能レベルの変更は不要です。 ただし、Windows Server 2008 ドメインの機能レベル、またはそれ以上はクライアント証明書の認証証明書が明示的に AD DS 内のユーザーのアカウントにマッピングされている場合、正常に機能するために必要です。  
  
#### <a name="service-account-requirements"></a>サービス アカウントに関する要件  
フェデレーション サーバー ファームを作成する場合は、フェデレーション サービスで使用できる AD DS で専用のドメイン ベースのサービス アカウントを作成する必要があります。 その後、このアカウントを使用して、ファーム内の各フェデレーション サーバーを構成します。 これを行う方法の詳細については、次を参照してください。[フェデレーション サーバー ファームのサービス アカウントを手動で構成](../../ad-fs/deployment/Manually-Configure-a-Service-Account-for-a-Federation-Server-Farm.md)AD FS 展開ガイドにします。  
  
### <a name="ldap"></a>LDAP  
その他のライトウェイト ディレクトリ アクセス プロトコルの LDAP ベースの属性ストアを使用する場合は、Windows 統合認証をサポートしている LDAP サーバーに接続する必要があります。 RFC 2255 での手順に従って、LDAP 接続文字列を LDAP URL の形式で記述もする必要があります。  
  
### <a name="sql-server"></a>SQL Server  
AD FS が正常に機能する、Structured Query Language (SQL) Server 属性ストアをホストするコンピューターで Microsoft SQL Server 2005 または SQL Server 2008 のいずれかが実行されている必要があります。 SQL ベースの属性ストアを使用する場合は、接続文字列も構成する必要があります。  
  
### <a name="custom-attribute-stores"></a>カスタム属性ストア  
高度なシナリオを有効にするカスタム属性ストアを開発することができます。 AD FS に組み込まれているポリシー言語は、次のシナリオのいずれか強化できるように、カスタム属性ストアを参照できます。  
  
-   ローカルで認証されるユーザーの信頼性情報を作成します。  
  
-   外部で認証されたユーザーの信頼性情報を補足します。  
  
-   トークンを取得するユーザーを承認します。  
  
-   ユーザーの行動に基づいてトークンを取得するサービスを承認します。  
  
カスタム属性ストアを使用する場合は、接続文字列を構成する必要がありますもします。 このような状況では、カスタム属性ストアに接続できるようにするようにカスタム コードを入力できます。 このような状況で、接続文字列は、カスタム属性ストアの開発者によって実装されているように解釈される名前/値ペアのセットです。  
  
開発とカスタム属性ストアの使用に関する詳細については、次を参照してください。[属性ストアの概要](https://go.microsoft.com/fwlink/?LinkId=190782)します。  
  
## <a name="application-requirements"></a>アプリケーションの要件  
フェデレーション サーバーと通信でき、信頼性情報に対応するアプリケーションなどのフェデレーション アプリケーションを保護することができます。  
  
## <a name="authentication-requirements"></a>認証要件  
Kerberos 認証、NTLM、スマート カード、X.509 v3 クライアント側の証明書および、AD FS はたとえば、当然ながら、既存の Windows 認証と統合されます。 フェデレーション サーバーでは、標準の Kerberos 認証を使用して、ドメインに対するユーザーを認証します。 フォーム ベース認証、スマート カード認証、および認証の構成方法によって、統合 Windows 認証を使用してクライアントを認証できます。  
  
AD FS フェデレーション サーバー プロキシの役割により、ユーザーが SSL クライアント認証を使用して外部が認証シナリオできます。 SSL クライアント認証を要求するように、フェデレーション サーバーの役割を構成することも、通常最もシームレスなユーザー エクスペリエンスが Windows 統合認証のため、アカウント フェデレーション サーバーを構成することによって実現するとします。 このような状況では、AD FS には、ユーザーが Windows デスクトップ ログオン資格情報の内容の制御がありません。  
  
### <a name="smart-card-logon"></a>スマート カード ログオン  
AD FS は、(パスワード、SSL クライアント認証、または Windows 統合認証) の認証に使用する資格情報の種類を強制できますが、直接は強制されませんスマート カードによる認証。 そのため、AD FS は、スマート カードの個人識別番号 (PIN) 資格情報を取得するクライアント側ユーザー インターフェイス (UI) を渡さないです。 これは意図的に Windows ベースのクライアントがフェデレーション サーバーまたは Web サーバーへのユーザー資格情報の詳細提供されないためです。  
  
### <a name="smart-card-authentication"></a>スマート カード認証  
スマート カード認証では、Kerberos プロトコルを使用して、アカウント フェデレーション サーバーを認証します。 新しい認証方法を追加するには、AD FS を拡張することはできません。 スマート カードの証明書は、クライアント コンピューター上の信頼されたルートまでチェーンする必要はありません。 AD FS によるスマート カード ベースの証明書の使用には、次の条件が必要です。  
  
-   リーダーとスマート カードの暗号化サービス プロバイダー (CSP) は、ブラウザーが配置されているコンピューターで動作する必要があります。  
  
-   スマート カード証明書は必要がありますまで、アカウント フェデレーション サーバーと、アカウント フェデレーション サーバー プロキシの信頼されたルート チェーンでつながっています。  
  
-   証明書は、によって、次のいずれかを AD DS でユーザー アカウントにマップする必要があります。  
  
    -   証明書のサブジェクト名は、AD DS 内のユーザー アカウントの LDAP 識別名に対応します。  
  
    -   証明書のサブジェクト別名拡張機能は、AD DS 内のユーザー アカウントのユーザー プリンシパル名 (UPN) を持ちます。  
  
一部のシナリオで特定の認証強度要件をサポートするためにも、ユーザーの認証方法を示すクレームを作成する AD FS を構成することもできます。 証明書利用者は、承認決定を行うために、このクレームを使用できます。  
  
## <a name="see-also"></a>参照してください。
[Windows Server 2012 で AD FS 設計ガイドします。](AD-FS-Design-Guide-in-Windows-Server-2012.md)
