---
ms.assetid: ef91f1d8-2991-4d90-b687-5fa189737c88
title: AD FS サーバーの容量計画
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 484dd08edef85b91e777f8963f175a6172c75430
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59847393"
---
# <a name="planning-for-ad-fs-server-capacity"></a>AD FS サーバーの容量計画

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

  
> [!NOTE]  
> このトピックの内容は、Windows Server 2012 を実行しているサーバーに対して実行された実際のテストには反映されません。 このトピックは、必要なテストの実行が完了したら更新される予定です。  
  
Active Directory フェデレーション サービスのキャパシティ プランニング\(AD FS\)をフェデレーション サービスの使用量ピーク期間を予測し、計画またはスケーリング プロセスは、\-それらを満たすために、AD FS サーバーの配置を読み込む要件。  
  
このセクションでは、フェデレーション サーバーとフェデレーション サーバー プロキシの役割の両方のデプロイ ガイドラインについて説明し、ラボでの Microsoft の AD FS 製品チームが実行されたテストに基づきます。 このコンテンツの目的は、次の作業に役立てていただくことです。  
  
-   AD FS サーバーの数などの組織の特定 AD FS 展開に必要なハードウェアを正確に見積もる。  
  
-   記号の予想されるピーク時使用量を正確にプロジェクト\-の要求で、拡張のための計画し、AD FS のデプロイが予想ピーク時使用量を処理できることを確認します。  
  
キャパシティ プランニングに関するこのコンテンツを読み始める前に、次の 2 つの表のタスクを、ここに示した順序で実行することをお勧めします。 最初の表には、ここで説明するキャパシティ プランニングに関連する背景情報を知るうえで役立つタスクへのリンクがあります。  
  
|推奨されるタスク|説明|リファレンス|  
|--------------------|---------------|-------------|  
|AD FS フェデレーション サーバーとフェデレーション サーバー プロキシの展開の要件を理解します。|フェデレーション サーバーとフェデレーション サーバー プロキシを展開するために必要な、ハードウェアとソフトウェアに関する重要な要件を確認します。|[付録 a:AD FS の要件の確認](Appendix-A--Reviewing-AD-FS-Requirements.md)|  
|組織で展開する AD FS 構成データベースの種類を選択します|最初に AD FS 構成を確認する必要があるこのセクションでのキャパシティ プランニングのデータの使用を開始するには、前にデータベースの種類を展開するか Windows Internal Database \(WID\)または構造化照会言語\(SQL\)データベース。|[AD FS 構成データベースのロール](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md);<br /><br />[AD FS 展開トポロジに関する考慮事項](AD-FS-Deployment-Topology-Considerations.md)|  
|選択した新しい AD FS 構成データベースと共に使用するトポロジ レイアウトのタイプを決定する|展開内で使用する AD FS 構成データベースのタイプを決定したら、運用環境内でのフェデレーション サーバーとフェデレーション サーバー プロキシの配置に関して、どの展開トポロジが最も要望に近いかを検討する必要があります。|[AD FS 展開トポロジを決定します。](Determine-Your-AD-FS-Deployment-Topology.md)|  
|キー AD FS に関連するキャパシティ プランニング用語を理解します。|共通のキャパシティ プランニングは AD FS キャパシティ プランニングの説明で使用する用語の定義を確認します。|このトピックの「[AD FS キャパシティ プランニングの用語](Planning-for-AD-FS-Server-Capacity.md#bk_terms)」をご覧ください。|  
  
前の表に示したコンテンツの確認が完了したら、次の表に示す、前提条件となるタスクを行ってください。  
  
|前提条件となるタスク|説明|リファレンス|  
|---------------------|---------------|-------------|  
|AD FS キャパシティ プランニング サイジング スプレッドシートをダウンロードします。|AD FS キャパシティ プランニング サイジング スプレッドシートを使用して、AD FS フェデレーション サーバー ファーム展開に必要なフェデレーション サーバーの数を決定することができます。 このスプレッドシートの使い方は、次のタスクの下に示したリンク先にあります。|[AD FS キャパシティ プランニング スプレッドシート](http://adfsdocs.blob.core.windows.net/adfs/ADFSCapacityPlanning.xlsx)|  
|シングル サインオンを必要とするユーザーの数に関するデータを収集\-で\(SSO\)ターゲット要求へのアクセス\-対応のアプリケーションと、このアクセスに関連付けられている使用量の予想されるピーク期間|ここで集めるユーザー データは、AD FS キャパシティ プランニング サイジング スプレッドシートの入力値として使用します。|[組織のフェデレーション サーバーの数を見積もる](Planning-for-Federation-Server-Capacity.md#bk_estimatefs)|  
|Windows Server 2016 の AD FS キャパシティ プランニング スプレッドシート|Windows Server 2016 の更新の計画ワークシート|[AD FS Windows Server 2016 の容量計画](http://adfsdocs.blob.core.windows.net/adfs/ADFSCapacity2016.xlsx)  
  
## <a name="bk_terms"></a>AD FS キャパシティ プランニングの用語  
次の表では、多くの場合、この容量の計画、AD FS 設計ガイドのセクションで使用される重要な用語について説明します。 AD FS の用語の詳細については、次を参照してください。 [Understanding Key AD FS Concepts](../../ad-fs/technical-reference/Understanding-Key-AD-FS-Concepts.md)します。  
  
|用語|定義|  
|--------|--------------|  
|同時ユーザー数|サービスへの要求を送信するユーザーの数の、所定の時間当たりの見積もり。通常はピーク アクティビティ期間の数値です。|  
|アクティブ ユーザー数|システム上でアクティブであるユーザー (要求を送信するとは限らない) の数の、所定の時間当たりのおおよその平均値。|  
|定義済みユーザー数|理論上の最大ユーザー数。通常は、そのシステム内でアカウントが定義済みであるユーザーの数に基づいています。|  
|1 秒当たりの要求数|クライアントによって送信されたか、要求の数\(負荷に関するシステムと対話するとき\)またはサーバーによって処理できる\(サーバーのスループットと対話するとき\)1 秒あたり。 この数値は、サーバー プロセッサとメモリのキャパシティの計画を立てるときに使用します。|  
|サーバーの応答性と使用率の目標値|許容されるサーバー パフォーマンスの範囲を規定する数値。 一般的に、応答性が目標値を下回ったときや使用率が目標値を上回ったときは、システムが過負荷であると見なされ、キャパシティ拡大が必要になります。|  
|Windows Internal Database \(WID\)|特定の AD FS デプロイで SQL Server への代替として使用できる既定の AD FS 構成データベース。|  
  
## <a name="configuration-environment-used-during-ad-fs-testing"></a>AD FS テスト時に使用される構成環境  
このセクションでは、AD FS 製品チームは、そのテストを実行するために使用される構成環境について説明します。 フェデレーション サーバーのテストにおいてパフォーマンスと拡張性のデータを収集するのに使用されたコンピューター ハードウェア、ソフトウェア、およびネットワーク構成は次のとおりです。  
  
-   デュアル クアッド コア 2.27 ギガヘルツ\(GHz\) \(8 コア\)  
  
-   16\-GB RAM  
  
-   Windows Server 2008 R2 Enterprise Edition  
  
-   ギガビット ネットワーク  
  
> [!NOTE]  
> 16 GB の RAM がフェデレーション サーバーで使用されますがテスト中に、ほとんどの AD FS 展開のフェデレーション サーバーあたりの RAM の 4 つの GB など、もっと低めのメモリ サイズを使用できます。 この AD FS キャパシティ プランニング AD FS の容量計画スプレッドシートで提供される結果と共にコンテンツが約の各フェデレーション サーバーを使用する前提条件に基づきに用意されている推奨事項 4 GB の RAM のほとんどの AD FS の運用環境環境。  
  
フェデレーション サーバー プロキシのテストでパフォーマンスと拡張性のデータを収集するのに使用された構成は次のとおりです。  
  
-   デュアル クアッド コア 2.24 GHz \(4 コア\)  
  
-   4\-GB RAM  
  
-   Windows Server 2008 R2 Enterprise Edition  
  
-   ギガビット ネットワーク  
  
> [!NOTE]  
> AD FS サーバーの容量に関する推奨事項は、特定の環境で使用されるハードウェアおよびネットワークの構成用に選択した仕様によって大きく異なります。 参考までに、このコンテンツで示すサイジングのガイダンスでは、前述のコンピューターでの使用率目標を 80% としています。  
  
## <a name="measure-ad-fs-server-capacity"></a>AD FS サーバーのキャパシティを測定する  
一般的に、ハードウェア コンポーネントのうち、サーバーのパフォーマンスと拡張性に影響を及ぼすのは、CPU、メモリ、ディスク、ネットワーク アダプターです。 さいわい、ほとんどのオンデマンド メモリとディスク領域の各 AD FS コンポーネントが必要 します。 ネットワーク接続は明らかに要件の 1 つです。 したがって、負荷テストをフェデレーション サーバーとフェデレーション サーバー プロキシに対して実行するときは、次の 2 つの主要領域にしぼってサーバー キャパシティを測定することになります。  
  
-   **1 秒あたりのピーク時 AD FS の要求:** 記号の数\-でフェデレーション サーバーで 1 秒あたりに処理される要求。 この測定値は、1 つのサーバーに同時にサインインできるユーザーの数を特定するのに役立ちます。 この測定値を CPU 使用量の測定値と組み合わせると、この測定値がパフォーマンスに及ぼす影響を理解するのに役立ちます。  
  
-   **CPU 使用量:** CPU のキャパシティのうち、何パーセントが使用されているかを測定します。 この測定値を使用して、着信サインインの数に基づいて全体的な CPU 負荷が発生したかを判断できます\-1 秒あたりの要求数。  
  
## <a name="continue-reading-more-about-ad-fs-capacity-planning"></a>AD FS キャパシティ プランニングに関して次に参照するコンテンツ  
推奨されるに必要な AD FS サーバーの数を判断するのに役立つコンテンツを計画する次の追加の容量を使用するには前提条件となるタスクが完了して関連する契約条件とハードウェア要件を理解した後、展開:  
  
-   [フェデレーション サーバーのキャパシティ プランニング](Planning-for-Federation-Server-Capacity.md)  
  
-   [フェデレーション サーバー プロキシの容量を計画します。](Planning-for-Federation-Server-Proxy-Capacity.md)  
  
## <a name="see-also"></a>関連項目
[Windows Server 2012 で AD FS 設計ガイドします。](AD-FS-Design-Guide-in-Windows-Server-2012.md)
