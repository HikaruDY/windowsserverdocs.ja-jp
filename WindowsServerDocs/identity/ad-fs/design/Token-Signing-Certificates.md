---
ms.assetid: 98c5ef45-2bcb-4f87-86c8-5ac6c16a6097
title: トークン署名証明書
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: a047b94906cf703bb934c93f517b8874af91e092
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59864063"
---
# <a name="token-signing-certificates"></a>トークン署名証明書

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

フェデレーション サーバーは、トークンを要求するよう\-を攻撃者が改ざんまたはフェデレーション リソースに不正にアクセスするためにセキュリティ トークンを偽造を防ぐために証明書に署名します。 プライベート\/トークンを使用してペアリングされる公開キーが使用される\-これらのキーは、セキュリティ トークンが有効なパートナーによって発行されたことを確認するため、フェデレーション パートナーシップの最も重要な検証機構は、証明書の署名フェデレーション サーバーと、トークンが転送中に変更されていません。  
  
## <a name="token-signing-certificate-requirements"></a>トークン\-署名証明書の要件  
トークン\-署名証明書で AD FS と連動する次の要件を満たす必要があります。  
  
-   トークンの\-署名証明書が正常にセキュリティ トークン、トークンに署名を\-署名証明書で秘密キーを含める必要があります。  
  
-   トークンに、AD FS サービス アカウントにアクセスする必要があります\-ローカル コンピューターの個人用ストアに証明書の秘密キーを署名します。 これは隠メ諶セットアップします。 AD FS 管理スナップインを使用することもできます。\-の後に、トークンを変更した場合、このアクセスを確保する\-署名証明書。  
  
> [!NOTE]  
> 公開キー基盤は\(PKI\)ベスト プラクティスを共有しない複数の目的の秘密キー。 したがって、トークンとフェデレーション サーバーにインストールされているサービス通信証明書を使用しないで\-署名証明書。  
  
## <a name="how-token-signing-certificates-are-used-across-partners"></a>どのトークン\-署名証明書は、パートナー間で使用されます  
すべてのトークン\-秘密キーの暗号化とデジタル署名に使用される公開キー署名証明書が含まれています\(、秘密キーによって\)セキュリティ トークン。 後で、パートナーのフェデレーション サーバーで受信した後、これらのキーを検証信頼性\(、公開キーによって\)の暗号化されたセキュリティ トークン。  
  
各セキュリティ トークンに、アカウント パートナーによってデジタル署名があるため、リソース パートナーはセキュリティ トークンが実際には、アカウント パートナーによって発行されたことと、変更されていないことを確認できます。 パートナーのトークンの公開キー部分によってデジタル署名が検証\-署名証明書。 署名を検証すると、リソース フェデレーション サーバーが、組織の独自のセキュリティ トークンを生成、独自のトークンを使用してセキュリティ トークンに署名\-署名証明書。  
  
フェデレーション パートナー環境では、ときにトークン\-署名証明書が CA によって発行されたことを確認します。  
  
1.  証明書の失効リスト\(Crl\)の証明書は証明書利用者のパーティとフェデレーション サーバーを信頼する Web サーバーにアクセスできます。  
  
2.  ルート CA 証明書は、証明書利用者のパーティとフェデレーション サーバーを信頼する Web サーバーによって信頼されています。  
  
リソース パートナー内の Web サーバーは、トークンの公開キーを使用して\-セキュリティ トークンが、リソース フェデレーション サーバーによって署名されていることを確認する署名証明書。 Web サーバーには、クライアントに適切なアクセスが許可されます。  
  
## <a name="deployment-considerations-for-token-signing-certificates"></a>トークンの展開に関する考慮事項\-証明書の署名  
新しい AD FS のインストールの最初のフェデレーション サーバーを展開するときに、トークンを取得する必要があります\-署名証明書し、そのフェデレーション サーバーのローカル コンピューター個人証明書ストアにインストールします。 トークンを取得することができます\-企業からの要求元のいずれかで CA またはパブリック CA に証明書署名するか、自己を作成して\-証明書に署名します。  
  
AD FS ファームを展開するときにトークン\-署名証明書は、サーバー ファームを作成する方法に応じて異なる方法でインストールします。  
  
2 つのサーバー ファーム オプションを取得する場合に考慮することがあるトークン\-デプロイ用の証明書の署名します。  
  
-   1 つのトークンから秘密キー\-ファーム内のすべてのフェデレーション サーバー間で共有される署名証明書。  
  
    フェデレーション サーバー ファーム環境では、推奨すべてのフェデレーション サーバーを共有する\(再利用または\)同じトークン\-署名証明書。 1 つのトークンをインストールする\-フェデレーション サーバー上の CA から証明書の署名および発行された証明書がエクスポート可能としてマークされている限り、秘密キーをエクスポートします。  
  
    次の図では、1 つの秘密キーのトークンに示すように\-署名証明書は、ファーム内のすべてのフェデレーション サーバーに共有できます。 このオプション — 次と比較して"一意のトークン\-署名証明書"オプション: トークンを取得する予定の場合は、コストを削減\-パブリック CA から証明書の署名します。  
  
![トークンの署名](media/adfs2_fedserver_certstory_3.gif)  
  
-   一意のトークンがある\-ファーム内の各フェデレーション サーバー用の証明書を署名します。  
  
    複数を使用すると、ファームでは、ファーム内の各サーバー全体で一意の証明書は、独自の一意の秘密キーでトークンを署名します。  
  
    次の図に示すように、別々 のトークンを取得できます\-ファーム内のすべての単一のフェデレーション サーバー用の証明書を署名します。 このオプションは、トークンを取得する予定の場合は、高価\-パブリック CA から証明書に署名します。  
  
![トークンの署名](media/adfs2_fedserver_certstory_4.gif)  
  
エンタープライズ CA として Microsoft Certificate Services を使用する場合は、証明書をインストールする方法については、次を参照してください。 [IIS 7.0。ドメインのサーバー証明書を IIS 7.0 で作成](https://go.microsoft.com/fwlink/?LinkId=108548)です。  
  
パブリック CA から証明書をインストールする方法の詳細については、次を参照してください。 [IIS 7.0。インターネット サーバー証明書を要求](https://go.microsoft.com/fwlink/?LinkId=108549)します。  
  
自動インストールする方法について\-署名証明書を参照してください[IIS 7.0。自動作成\-IIS 7.0 でサーバー証明書を署名](https://go.microsoft.com/fwlink/?LinkID=108271)します。  
  
## <a name="see-also"></a>関連項目
[Windows Server 2012 で AD FS 設計ガイドします。](AD-FS-Design-Guide-in-Windows-Server-2012.md)
