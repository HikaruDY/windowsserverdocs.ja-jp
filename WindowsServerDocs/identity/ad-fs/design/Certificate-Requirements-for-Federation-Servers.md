---
ms.assetid: 9831b421-8fb7-4e15-ac27-c013cbca6d05
title: フェデレーション サーバーの証明書の要件
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 7eeff82ef3311f18c8252c44c96310fcf3c18217
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71359183"
---
# <a name="certificate-requirements-for-federation-servers"></a>フェデレーション サーバーの証明書の要件

Active Directory フェデレーションサービス (AD FS) \(AD FS @ no__t の設計では、通信をセキュリティで保護し、インターネットクライアントとフェデレーションサーバー間のユーザー認証を容易にするために、さまざまな証明書を使用する必要があります。 各フェデレーションサーバーは、AD FS 通信に参加するには、サービス通信証明書とトークン @ no__t-0signing 証明書を持っている必要があります。 次の表では、フェデレーションサーバーに関連付けられている証明書の種類について説明します。  
  
|証明書の種類|説明|  
|--------------------|---------------|  
|Token @ no__t-0signing 証明書|トークン @ no__t-0signing 証明書は X509 証明書です。 フェデレーションサーバーは、関連付けられているパブリック @ no__t の秘密キーのペアを使用して、生成されるすべてのセキュリティトークンにデジタル署名します。 これには、公開されたフェデレーション メタデータとアーティファクト解決要求の署名が含まれます。<br /><br />1つの証明書の有効期限が近づいたときに証明書のロールオーバーを可能にするために、AD FS Management snap @ no__t で構成された複数のトークン @ no__t-0signing 証明書を持つことができます。 既定では、一覧にあるすべての証明書が公開されますが、実際にトークンに署名するために AD FS によって使用されるのは、プライマリトークン @ no__t-0signing 証明書のみです。 選択するすべての証明書には、対応する秘密キーが必要です。<br /><br />詳細については、「 [Token-Signing Certificates](Token-Signing-Certificates.md) 」と「 [Add a Token-Signing Certificate](../../ad-fs/deployment/Add-a-Token-Signing-Certificate.md)」を参照してください。|  
|サービス通信証明書|フェデレーションサーバーは、サーバー認証証明書を使用します。これは、Windows Communication Foundation @no__t 0WCF @ no__t-1 メッセージセキュリティのサービス通信とも呼ばれます。 既定では、これは、フェデレーションサーバーがインターネットインフォメーションサービス \(IIS @ no__t で Secure Sockets Layer \(SSL @ no__t 証明書として使用するのと同じ証明書です。 **注:** AD FS Management snap @ no__t-0in は、サービス通信証明書としてフェデレーションサーバーのサーバー認証証明書を参照します。<br /><br />詳細については、「[サービス通信証明](Service-Communications-Certificates.md)書」と「[サービス通信証明書の設定](../../ad-fs/deployment/Set-a-Service-Communications-Certificate.md)」を参照してください。<br /><br />サービス通信証明書はクライアントコンピューターによって信頼されている必要があるため、信頼された証明 @no__t 機関によって署名された証明書 (0CA @ no__t) を使用することをお勧めします。 選択するすべての証明書には、対応する秘密キーが必要です。|  
|Secure Sockets Layer \(SSL @ no__t 証明書|フェデレーション サーバーは、SSL 証明書を使用して Web クライアントとフェデレーション サーバー プロキシとの SSL 通信で Web サービス トラフィックを保護します。<br /><br />SSL 証明書はクライアント コンピューターから信頼されている必要があるので、信頼されている CA が署名した証明書の使用が推奨されます。 選択するすべての証明書には、対応する秘密キーが必要です。|  
|Token @ no__t-0decryption 証明書|この証明書は、このフェデレーションサーバーが受信するトークンの暗号化を解除するために使用されます。<br /><br />複数の暗号化解除証明書を使用することができます。 これにより、新しい証明書がプライマリ暗号化解除証明書として設定された後に、リソースフェデレーションサーバーが古い証明書で発行されたトークンの暗号化を解除できるようになります。 すべての証明書は復号化に使用できますが、実際には、プライマリトークン @ no__t-0decrypting 解除証明書のみがフェデレーションメタデータで公開されます。 選択するすべての証明書には、対応する秘密キーが必要です。<br /><br />詳細については、「[トークン暗号化解除証明書の追加](../../ad-fs/deployment/Add-a-Token-Decrypting-Certificate.md)」を参照してください。|  
  
SSL 証明書またはサービス通信証明書を要求してインストールするには、Microsoft 管理コンソールを使用してサービス通信証明書を要求するか \(MMC @ no__t-1 snap @ no__t-2in IIS を使用します。 SSL 証明書の使用に関する一般的な情報については、「[IIS 7.0:IIS 7.0 で Secure Sockets Layer を構成する @ no__t-0 および [ IIS 7.0:IIS 7.0 でサーバー証明書を構成する @ no__t-0  
  
> [!NOTE]  
> AD FS では、デジタル署名に使用さ\(れる\)セキュリティで保護されたハッシュアルゴリズムの sha\-レベルを、\-sha 1 また\)は sha 256 \(の安全性が高くなるように変更できます。 AD FSdoes、他のハッシュ方式での証明書の使用をサポートしていません。たとえば、Makecert コマンド @ no__t-1line no__t に使用される既定のハッシュアルゴリズムである MD5 \(the です。 セキュリティのベストプラクティスとして、すべての署名に\-既定\(\)で設定されている SHA 256 を使用することをお勧めします。 SHA @ no__t-01 は、SHA @ no__t-1256 を使用した通信をサポートしていない製品と相互運用する必要があるシナリオでのみ使用することをお勧めします。たとえば、@ no__t-2Microsoft 製品や AD FS 1 などです。 *x* があります。  
  
## <a name="determining-your-ca-strategy"></a>CA 戦略の決定  
AD FS では、証明書が CA によって発行される必要はありません。 ただし、SSL 証明書 @no__t は、サービス通信証明書 @ no__t-1 として既定で使用される証明書が、AD FS クライアントによって信頼されている必要があります。 これらの証明書の種類では、自己 @ no__t-0signed 証明書を使用しないことをお勧めします。  
  
> [!IMPORTANT]  
> 運用環境で自己 @ no__t-0signed, SSL 証明書を使用すると、アカウントパートナー組織の悪意のあるユーザーがリソースパートナー組織のフェデレーションサーバーを制御できるようになります。 このセキュリティリスクが存在するのは、自己 @ no__t に署名された証明書がルート証明書であるためです。 これらは、別のフェデレーション @no__t サーバーの信頼されたルートストアに追加する必要があります (たとえば、リソースフェデレーションサーバー @ no__t)。これにより、サーバーが攻撃に対して脆弱になる可能性があります。  
  
CA から証明書を受け取ったら、すべての証明書がローカル コンピューターの個人証明書ストアにインポートされていることを確認してください。 証明書 MMC スナップイン\-を使用して、個人用ストアに証明書をインポートできます。  
  
の証明書スナップ @ no__t を使用する代わりに、ssl 証明書を既定の Web サイトに割り当てるときに、IIS マネージャースナップ @ no__t を使用して SSL 証明書をインポートすることもできます。 詳細については、「[サーバー認証証明書を既定の Web サイトにインポートする](../../ad-fs/deployment/Import-a-Server-Authentication-Certificate-to-the-Default-Web-Site.md)」を参照してください。  
  
> [!NOTE]  
> フェデレーションサーバーとなるコンピューターに AD FS ソフトウェアをインストールする前に、両方の証明書がローカルコンピューターの個人証明書ストアにあり、SSL 証明書が既定の Web サイトに割り当てられていることを確認してください。 フェデレーションサーバーのセットアップに必要なタスクの順序の詳細については、「@no__t」を参照してください。フェデレーションサーバー @ no__t をセットアップしています。  
  
セキュリティと予算の要件に応じて、どの証明書をパブリック CA または企業 CA から取得するかを慎重に検討してください。 次の図は、特定の種類の証明書に推奨される CA 発行者を示しています。 この推奨事項は、セキュリティとコストに関する @ no__t のベストプラクティスアプローチを反映しています。  
  
![証明書の要件](media/adfs2_fedserver_certstory_1.png)  
  
## <a name="certificate-revocation-lists"></a>証明書失効リスト  
使用するいずれかの証明書に CRL が指定されている場合、構成済みの証明書が存在するサーバーは CRL を配布するサーバーと通信できる必要があります。  
  
## <a name="see-also"></a>関連項目
[Windows Server 2012 での AD FS 設計ガイド](AD-FS-Design-Guide-in-Windows-Server-2012.md)
