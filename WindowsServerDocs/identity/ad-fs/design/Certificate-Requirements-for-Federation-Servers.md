---
ms.assetid: 9831b421-8fb7-4e15-ac27-c013cbca6d05
title: フェデレーション サーバーの証明書の要件
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: ce301f6320ed3347b1ee802f57c2b2ebd4394970
ms.sourcegitcommit: 0b5fd4dc4148b92480db04e4dc22e139dcff8582
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/24/2019
ms.locfileid: "66191640"
---
# <a name="certificate-requirements-for-federation-servers"></a>フェデレーション サーバーの証明書の要件

任意の Active Directory フェデレーション サービスで\(AD FS\)デザイン、通信を保護し、インターネット クライアントとのフェデレーション サーバー間のユーザー認証を容易にさまざまな証明書を使用する必要があります。 各フェデレーション サーバーは、サービス通信証明書とトークンが必要\-AD FS の通信に参加する前に証明書に署名します。 次の表では、フェデレーション サーバーに関連付けられている証明書の種類について説明します。  
  
|証明書の種類|説明|  
|--------------------|---------------|  
|トークン\-証明書の署名|トークン\-X509 署名証明書が証明書。 フェデレーション サーバーを使用して、関連付けられているパブリック\/によって生成されるすべてのセキュリティ トークンにデジタル署名に秘密キーの組。 これには、公開されたフェデレーション メタデータとアーティファクト解決要求の署名が含まれます。<br /><br />複数のトークンを取得できる\-署名証明書が AD FS 管理スナップインで構成されている\-の 1 つの証明書が期限切れ間近の近くにあるときに証明書のロール オーバーします。 既定では、一覧内のすべての証明書は発行されますが、プライマリのトークンのみ\-実際にトークンの署名に AD FS によって使用されるが署名証明書。 選択するすべての証明書には、対応する秘密キーが必要です。<br /><br />詳細については、「 [Token-Signing Certificates](Token-Signing-Certificates.md) 」と「 [Add a Token-Signing Certificate](../../ad-fs/deployment/Add-a-Token-Signing-Certificate.md)」を参照してください。|  
|サービス通信証明書|フェデレーション サーバーを使用して、サーバー認証証明書、Windows Communication Foundation のサービスの通信とも呼ばれます\(WCF\)メッセージ セキュリティ。 既定では、Secure Sockets Layer としてフェデレーション サーバーを使用する同じ証明書は、 \(SSL\)インターネット インフォメーション サービス内の証明書\(IIS\)します。 **注:** AD FS 管理スナップイン\-サービス通信証明書としてフェデレーション サーバーのサーバー認証証明書を参照しています。<br /><br />詳細については、次を参照してください。[サービス通信証明書](Service-Communications-Certificates.md)と[サービス通信証明書を設定](../../ad-fs/deployment/Set-a-Service-Communications-Certificate.md)します。<br /><br />信頼された証明機関によって署名されている証明書を使用することをお勧め、サービス通信証明書は、クライアント コンピューターによって信頼する必要があります、ため\(CA\)します。 選択するすべての証明書には、対応する秘密キーが必要です。|  
|Secure Sockets Layer \(SSL\)証明書|フェデレーション サーバーは、SSL 証明書を使用して Web クライアントとフェデレーション サーバー プロキシとの SSL 通信で Web サービス トラフィックを保護します。<br /><br />SSL 証明書はクライアント コンピューターから信頼されている必要があるので、信頼されている CA が署名した証明書の使用が推奨されます。 選択するすべての証明書には、対応する秘密キーが必要です。|  
|トークン\-復号化証明書|この証明書は、このフェデレーション サーバーが受け取るトークンの復号化に使用されます。<br /><br />複数の暗号化解除証明書を使用することができます。 これにより、リソース フェデレーション サーバーが、新しい証明書をプライマリ暗号化解除証明書として設定した後、古い証明書によって発行されたトークンを復号化できるようにします。 すべての証明書は、復号化は、プライマリのトークンのみ使用できます\-フェデレーション メタデータで実際に公開証明書を復号化されます。 選択するすべての証明書には、対応する秘密キーが必要です。<br /><br />詳細については、次を参照してください。[トークン暗号化解除証明書の追加](../../ad-fs/deployment/Add-a-Token-Decrypting-Certificate.md)します。|  
  
要求して、Microsoft 管理コンソールで、サービス通信証明書を要求することで、SSL 証明書またはサービス通信証明書をインストール\(MMC\)スナップ\-で IIS 用です。 SSL 証明書を使用して一般的なについては、次を参照してください。 [IIS 7.0。IIS 7.0 のレイヤーを構成、セキュリティで保護されたソケット](https://go.microsoft.com/fwlink/?LinkID=108544)と[IIS 7.0。Configuring Server Certificates in IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=108545)します。  
  
> [!NOTE]  
> AD FS では、セキュリティで保護されたハッシュ アルゴリズムを変更できます\(SHA\)か SHA にデジタル署名に使用されるレベル\-1 または SHA\-256\(より安全な\)します。 AD FSdoes MD5 などの他のハッシュ方式と一緒に証明書の使用はできません\(Makecert.exe コマンドで使用される既定のハッシュ アルゴリズム\-ライン ツール\)します。 セキュリティのベスト プラクティスとして SHA を使用することをお勧めします。\-256\(既定で設定されている\)のすべての署名。 SHA\-SHA を使用して通信をサポートしない製品と相互運用する必要があるシナリオでのみ使用する 1 をお勧め\-非などの 256\-Microsoft 製品や AD FS 1。 *x* があります。  
  
## <a name="determining-your-ca-strategy"></a>CA 戦略の決定  
AD FS では、CA 証明書を発行することは必要ありません。 ただし、SSL 証明書\(サービス通信証明書としても既定で使用される証明書\)AD FS クライアントによって信頼されている必要があります。 使用しないことセルフことをお勧めします。\-署名証明書がこれらの証明書の種類。  
  
> [!IMPORTANT]  
> 使用して自身の\-署名済み、運用環境での SSL 証明書できる悪意のあるユーザーがリソース パートナー組織のフェデレーション サーバーを制御するアカウント パートナー組織。 このセキュリティ リスクが存在するためセルフ\-署名証明書はルート証明書。 別のフェデレーション サーバーの信頼されたルート ストアに追加する必要があります\(リソース フェデレーション サーバーではたとえば、\)、それによってそのサーバーが攻撃に対して脆弱になります。  
  
CA から証明書を受け取ったら、すべての証明書がローカル コンピューターの個人証明書ストアにインポートされていることを確認してください。 証明書 MMC スナップインを使用して個人用ストアに証明書をインポートできる\-でします。  
  
証明書を使用する代わりにスナップ\-で、IIS マネージャー スナップインで SSL 証明書をインポートすることも\-で SSL の割り当て時に証明書を既定の Web サイト。 詳細については、次を参照してください。[既定の Web サイトにサーバー認証証明書をインポート](../../ad-fs/deployment/Import-a-Server-Authentication-Certificate-to-the-Default-Web-Site.md)します。  
  
> [!NOTE]  
> フェデレーション サーバーは、両方の証明書がローカル コンピューターの個人証明書ストアであることを確認するコンピューターの AD FS ソフトウェアをインストールする前に SSL 証明書には、既定の Web サイトには割り当てられます。 フェデレーション サーバーをセットアップするために必要なタスクの順序の詳細については、次を参照してください。[チェックリスト。フェデレーション サーバーを設定する](../../ad-fs/deployment/Checklist--Setting-Up-a-Federation-Server.md)します。  
  
セキュリティと予算の要件に応じて、どの証明書をパブリック CA または企業 CA から取得するかを慎重に検討してください。 次の図は、特定の種類の証明書に推奨される CA 発行者を示しています。 この推奨事項、ベストを反映して\-セキュリティおよびコストに関する取り組みを実践します。  
  
![証明書の要件](media/adfs2_fedserver_certstory_1.png)  
  
## <a name="certificate-revocation-lists"></a>証明書失効リスト  
使用するいずれかの証明書に CRL が指定されている場合、構成済みの証明書が存在するサーバーは CRL を配布するサーバーと通信できる必要があります。  
  
## <a name="see-also"></a>関連項目
[Windows Server 2012 での AD FS 設計ガイド](AD-FS-Design-Guide-in-Windows-Server-2012.md)
