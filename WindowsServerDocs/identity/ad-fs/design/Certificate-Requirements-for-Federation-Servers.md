---
ms.assetid: 9831b421-8fb7-4e15-ac27-c013cbca6d05
title: "フェデレーション サーバーの証明書の要件"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 369c0e9e7ab1ef25baee1c35379cc66b886f20d8
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/12/2017
---
# <a name="certificate-requirements-for-federation-servers"></a>フェデレーション サーバーの証明書の要件

>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

設計では、Active Directory フェデレーション サービス \(AD FS\)、通信をセキュリティで保護し、インターネット クライアントとフェデレーション サーバー間のユーザー認証を容易にするためにさまざまな証明書を使用する必要があります。 各フェデレーション サーバーは、AD FS の通信に参加する前に、サービス通信証明書と token\ 署名証明書が必要です。 次の表では、フェデレーション サーバーに関連付けられている証明書の種類について説明します。  
  
|証明書の種類|説明|  
|--------------------|---------------|  
|Token\ 署名証明書|Token\ 署名証明書は X509 証明書。 フェデレーション サーバーでは、関連付けられている public\/秘密キーのペアを使用して、生成されるすべてのセキュリティ トークンにデジタル署名します。 これは、公開されたフェデレーション メタデータとアーティファクト解決の要求の署名が含まれます。<br /><br />複数 token\ 署名の証明書スナップインを許可する証明書のロール オーバー 1 つの証明書が期限切れ間近の場合、AD FS 管理で構成されていることができます。 既定では、一覧内のすべての証明書公開されますが、のみプライマリ token\ 署名証明書が実際にトークンに署名する AD FS によって使用されます。 選択したすべての証明書は、対応する秘密キーに必要です。<br /><br />詳細については、次を参照してください。[トークン署名証明書](Token-Signing-Certificates.md)と[トークン署名証明書の追加](../../ad-fs/deployment/Add-a-Token-Signing-Certificate.md)します。|  
|サービス通信証明書|フェデレーション サーバーとも呼ばれるサービス通信 Windows Communication Foundation \(WCF\) のメッセージのセキュリティ、サーバー認証証明書を使用します。 既定では、これは、同じ証明書インターネット インフォメーション サービス \(IIS\) で Secure Sockets Layer \(SSL\) 証明書としてフェデレーション サーバーを使用します。 **注:**の AD FS 管理スナップインは、サービス通信証明書としてフェデレーション サーバーのサーバー認証証明書を指します。<br /><br />詳細については、次を参照してください。[サービス通信証明書](Service-Communications-Certificates.md)と[サービス通信証明書の設定](../../ad-fs/deployment/Set-a-Service-Communications-Certificate.md)します。<br /><br />信頼された証明機関によって署名されている証明書を使用することをお勧めサービス通信証明書は、クライアント コンピューターによって信頼されている必要があります、ため \(CA\) します。 選択したすべての証明書は、対応する秘密キーに必要です。|  
|Secure Sockets Layer \(SSL\) 証明書|フェデレーション サーバーは、Web クライアントとフェデレーション サーバー プロキシの SSL 通信用の Web サービス トラフィックをセキュリティで保護するのに SSL 証明書を使用します。<br /><br />クライアント コンピューターで SSL 証明書を信頼する必要があります、ため、信頼された CA によって署名されている証明書を使用することをお勧めします。 選択したすべての証明書は、対応する秘密キーに必要です。|  
|Token\ 暗号化解除証明書|この証明書は、このフェデレーション サーバーによって受信され、トークン暗号化解除に使用されます。<br /><br />複数の暗号化解除証明書を持つことができます。 これにより、リソース フェデレーション サーバーが、新しい証明書がプライマリ暗号化解除証明書として設定された後、古い証明書によって発行されたトークン暗号化解除できるようにします。 復号化のすべての証明書を使用できますが、のみプライマリ token\ 暗号化解除証明書がフェデレーション メタデータで実際に公開します。 選択したすべての証明書は、対応する秘密キーに必要です。<br /><br />詳細については、次を参照してください。[トークン暗号化解除証明書の追加](../../ad-fs/deployment/Add-a-Token-Decrypting-Certificate.md)します。|  
  
要求および Microsoft 管理コンソール \(MMC\) snap\ を通じて、サービス通信証明書を要求することによって、SSL 証明書またはサービス通信証明書をインストールする-で IIS のします。 SSL 証明書の使用に関するより一般的な情報を参照してください。 [IIS 7.0: IIS 7.0 で Secure Sockets Layer の構成](https://go.microsoft.com/fwlink/?LinkID=108544)と[IIS 7.0: IIS 7.0 でサーバー証明書を構成](https://go.microsoft.com/fwlink/?LinkID=108545)します。  
  
> [!NOTE]  
> AD FS で SHA\ 1 または SHA\ 256 \(more secure\) にデジタル署名に使用されるセキュア ハッシュ アルゴリズム \(SHA\) レベルを変更することができます。 AD FSdoes MD5 など、他のハッシュ方式と一緒に証明書の使用はサポートされて \ (Makecert.exe コマンド ラインされます \ で使用される既定ハッシュ アルゴリズム)。 セキュリティのベスト プラクティスとして SHA\ 256 を使用することをお勧め \ (default\ によって設定されます) のすべての署名します。 シナリオでは、Microsoft 以外の製品や AD FS 1 など、SHA\ 256 を使用して通信がサポートされない製品と相互作用が必要でのみ使用には、SHA\ 1 を使用することをお勧めします。 *x*.  
  
## <a name="determining-your-ca-strategy"></a>CA 戦略の決定  
AD FS では、証明書が CA によって発行されているは必要ありません。 ただし、SSL 証明書 \ (証明書サービス通信 certificate\ としても既定で使用される) は、AD FS のクライアントから信頼されている必要があります。 これらの証明書の種類の自己署名証明書を使用しないことをお勧めします。  
  
> [!IMPORTANT]  
> 自己署名の使用、実稼働環境での SSL 証明書は、リソース パートナー組織のフェデレーション サーバーを制御する、アカウント パートナー組織の悪意のあるユーザーを許可できます。 自己署名証明書がルート証明書であるために、このセキュリティ リスクが存在します。 別のフェデレーション サーバーの信頼されたルート ストアに追加する必要があります、\ (たとえば、リソース フェデレーション サーバー \)、それによってそのサーバーの攻撃に対して脆弱になります。  
  
CA から証明書を受信した後は、すべての証明書がローカル コンピューターの個人用証明書ストアにインポートすることを確認します。 証明書 MMC スナップインを使用して個人用ストアに証明書をインポートすることができます。  
  
証明書スナップインを使用する代わりに、既定の Web サイトに SSL 証明書を割り当てる時に、IIS マネージャー スナップインで SSL 証明書をインポートすることもできます。 詳細については、次を参照してください。[既定の Web サイトにサーバー認証証明書をインポート](../../ad-fs/deployment/Import-a-Server-Authentication-Certificate-to-the-Default-Web-Site.md)します。  
  
> [!NOTE]  
> フェデレーション サーバーとなるコンピューターに AD FS ソフトウェアをインストールする前に、両方の証明書がローカル コンピューターの個人用証明書ストアにあると、SSL 証明書が既定の Web サイトに割り当てられていることを確認してください。 フェデレーション サーバーを設定するために必要なタスクの順番の詳細については、次を参照してください。[チェックリスト: フェデレーション サーバーの設定](../../ad-fs/deployment/Checklist--Setting-Up-a-Federation-Server.md)します。  
  
ユーザーのセキュリティと予算の要件に応じて慎重に、証明書のうちどのから取得するか、パブリック CA または企業 CA を検討します。 次の図は、特定の証明書の種類の推奨される CA 発行者を示します。 この推奨事項は、セキュリティとコストに関する best\ プラクティス アプローチが反映されます。  
  
![証明書の要件](media/adfs2_fedserver_certstory_1.png)  
  
## <a name="certificate-revocation-lists"></a>証明書失効リスト  
使用する任意の証明書に Crl がある場合は、構成された証明書で、サーバーは、Crl を配布するサーバーに接続できる必要があります。  
  
## <a name="see-also"></a>参照してください。
[Windows Server 2012 で AD FS 設計ガイドします。](AD-FS-Design-Guide-in-Windows-Server-2012.md)
