---
ms.assetid: 7013fc21-9ced-4f9d-9588-cb04d6d60924
title: "フェデレーション サーバーの容量計画"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 618dc9419be965dedaaf7dc946da436a5001f121
ms.sourcegitcommit: 70c1b6cedad55b9c7d2068c9aa4891c6c533ee4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2017
---
# <a name="planning-for-federation-server-capacity"></a>フェデレーション サーバーの容量計画

>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

フェデレーション サーバーの容量計画を予測するのに役立ちます。  
  
-   どの要素では、AD FS 構成データベースのサイズを拡大します。  
  
-   各フェデレーション サーバーの適切なハードウェア要件です。  
  
-   各組織に配置するフェデレーション サーバーの数。  
  
フェデレーション サーバーは、ユーザーにセキュリティ トークンを発行します。 これらのトークンは、消費の証明書利用者に提示されます。 フェデレーション サーバーは、ユーザーを認証した後、またはパートナーのフェデレーション サービスによって事前に発行されたセキュリティ トークンを受信した後に、セキュリティ トークンを発行します。 ユーザーは最初フェデレーション アプリケーションにログオンする場合、または、セキュリティ トークンには、フェデレーション アプリケーションにアクセスしているときに有効期限が切れるときに、フェデレーション サービスからセキュリティ トークンが要求されます。  
  
フェデレーション サーバーは、Microsoft Network Load Balancing \(NLB\) テクノロジを使用して高可用性サーバー ファームの構成に対応するために設計されています。 ファーム構成内のフェデレーション サーバー要求を処理できるいない独立して、要求ごとに、一般的なファーム コンポーネントにアクセスしなくてもします。 そのため、オーバーヘッドが少ないスケール アウト、フェデレーション サーバーの展開に関連します。  
  
**推奨事項:**  
  
-   Mission\ 重大または高可用性展開では、ことをお勧めフォールト トレランスを提供する、ファームごとに少なくとも 2 台のフェデレーション サーバーと各パートナー組織では、小規模のフェデレーション サーバー ファームを作成することです。  
  
-   高可用性とスケール アウトのフェデレーション サーバーの簡単操作のニーズと、多数の特定のフェデレーション サービスに対する 1 秒あたりの要求を処理するための推奨される方法は、スケール アウトします。 このガイドの基本構成を超えるスケール アップでは、大容量の処理の向上を生成する可能性があります。  
  
## <a name="ad-fs-configuration-database-size-and-growth"></a>AD FS 構成データベースのサイズと増加率  
AD FS 構成データベースのサイズが、通常と見なされる小さく、およびデータベースのサイズはしないする傾向がある AD FS の展開での主な考慮事項です。  AD FS 構成データベースの正確なサイズは、信頼関係と関連付けられている trust\ に関連するメタデータの数に大きく依存できます — などの信頼性情報、要求規則、および各信頼に対して構成された設定を監視します。 構成データベースに信頼エントリの数が増えるにつれて、追加のディスク領域の必要性もします。  
  
AD FS 構成データベースの追加の展開については、次を参照してください。[AD FS 展開トポロジに関する考慮事項](AD-FS-Deployment-Topology-Considerations.md)します。  
  
## <a name="memory-cpu-and-disk-space-requirements"></a>メモリ、CPU およびディスク領域の要件  
さいわい、フェデレーション サーバーのメモリ、CPU およびディスク領域の要件が適切であるとされないハードウェアの意思決定の最重要要素がある可能性があります。 ハードウェア要件の詳細については、次を参照してください。[付録 a: 確認 AD FS の要件](Appendix-A--Reviewing-AD-FS-Requirements.md)します。  
  
> [!NOTE]  
> フェデレーション サーバー ファーム専用の SQL Server を使用して構成を使用して、AD FS 構成データベースを格納する AD FS 製品チームによって実行されたテストでは、SQL Server の全体的な負荷する傾向が不足しているにします。 単一の SQL Server を使用するように構成された four\ federation\-サーバーのファームを使用して、1 つのテストで CPU 使用率超えていないテスト対象の使用率をフェデレーション サーバーに関係なく、10% です。  
  
## <a name="bk_estimatefs"></a>組織のフェデレーション サーバーの数を見積もり  
計画プロセスのフェデレーション サーバーのハードウェアを簡素化するために、AD FS 製品チームは、AD FS キャパシティ プランニング サイジング スプレッドシートを開発します。 この Excel スプレッドシートには、予期される使用状況データ、組織内のユーザーは提供して、AD FS の運用環境のフェデレーション サーバーの推奨される最適な数を返すことになります calculator\ のような機能が含まれています。  
  
> [!NOTE]  
> このスプレッドシートは推奨事項をフェデレーション サーバーの数は、AD FS 製品チームがテスト中に使用するハードウェアとネットワークの仕様に基づいています。 そのため、このコンテキスト内で、スプレッドシートは推奨事項をフェデレーション サーバーの数を理解する必要があります。  テスト中に使用される仕様に関する詳細については、」のトピックを参照してください。[AD FS サーバーの容量計画](Planning-for-AD-FS-Server-Capacity.md)します。  
  
### <a name="using-the-ad-fs-capacity-planning-sizing-spreadsheet"></a>AD FS キャパシティ プランニング サイジング スプレッドシートを使用します。  
このワークシートを使用する場合は値を選択する必要があります。\ (どちら**40%**、**60%**、または**80%**\) ベストが期待する合計ユーザーの割合を表すことは認証要求を送信をフェデレーション サーバー使用量ピーク期間中にします。  
  
値を選択する必要が次に、\ (いずれか**1 分**、**15 分**、または**1 時間**\) ベストが最後に、ピーク時使用量期間が予想される時間の長さを表します。 たとえば、15 分の期間内のログインはユーザーまたはユーザーの 60% は 1 時間の期間内でログイン ユーザーの合計数の値として 40% を見積もることがあります。 同時に、これらの値は、サイズ変更の推奨事項を計算されるピーク ロード プロファイルを定義します。  
  
次に、かどうかに基づいて、ユーザー、対象の claims\ に対応したアプリケーションを 1 つの sign\ にアクセスする必要がユーザーの合計数を指定する必要があります。  
  
-   企業ネットワークに物理的に接続されているローカル コンピューターから Active Directory へのログイン \ (を通じて Windows 統合 authentication\)  
  
-   企業ネットワークに物理的に接続されていないコンピューターからリモートで Active Directory にログイン \ (windows 統合認証またはユーザー名および password\)  
  
-   信頼できるパートナーからターゲット claims\ に対応したアプリケーションにアクセスしようとしてから、別の組織とは  
  
-   ターゲット claims\ に対応したアプリケーションにアクセスしようとしてから、SAML 2.0 ID プロバイダーとは  
  
#### <a name="how-to-use-this-spreadsheet"></a>このワークシートを使用する方法  
各フェデレーション サーバー ファーム インスタンスのフェデレーション サーバーの推奨される数の決定を展開しようとして、次の手順を使用することができます。  
  
1.  ダウンロードして開き、[For Windows Server 2012 R2 AD FS キャパシティ プランニング サイジング スプレッドシート](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacityPlanning.xlsx)または[Windows Server 2016 の AD FS キャパシティ プランニング サイジング スプレッドシート](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacity2016.xlsx)します。
  
2.  右のセルに、**ピーク システムの使用期間中に自分のユーザーを認証するのには、この割合を期待どおり**セル、セルをクリックし、ドロップダウン矢印を使用して、いずれかに目安となるシステム使用率レベルを選択**40%**、**60%**または**80%**の展開。  
  
3.  右のセルに、**次の期間内で**セル、セルをクリックし、ドロップダウン矢印を使用して、いずれかを選択**1 分**、**15 分**、または**1 時間**ピーク時の負荷の期間を選択します。  
  
4.  右のセルに、**Enter 内部アプリケーションの数の見積もり \ (SharePoint など \(2007 or 2010\) 要求の対応する Web applications \ または)**セルを組織で使用する内部アプリケーションの数を入力します。  
  
5.  右のセルに、**Enter オンライン アプリケーションの数の見積もり \ (Office 365 Exchange Online、SharePoint Online または Lync Online\) など**セル、オンライン アプリケーションや、組織で使用するには、サービスの数を入力します。  
  
6.  という名前のセル**ユーザー数**、種類、ユーザーをアプリケーションのシナリオ例に適用される各行の番号は sign\ 上へのアクセスを単一する必要があります。 この列には、1 秒あたり最大ユーザーではなく、定義されているユーザーの数を含める必要があります。 アプリケーションに対するアクセスを試行は、ホーム領域検出ページを経由しなければならない最初場合、は、入力**Y**します。これを選択したのことを確認していない場合は、入力**Y**します。  
  
7.  次の推奨提供されている値を確認します。  
  
    1.  推奨されるフェデレーション サーバーの合計数、灰色で強調表示されている、右下のセルを参照してください。  
  
    2.  各アプリケーション シナリオの例の推奨されるサーバーの数、灰色で強調表示されている行のセルを参照してください。  
  
> [!NOTE]  
> 値」というタイトルのセルの右のセルに自動的に計算される**推奨のフェデレーション サーバーの合計数**スプレッドシートの下部にはそれぞれ個別の行がそれより前のすべての値の合計に追加の 20% バッファーを追加する判別式が含まれています。 追加する判別式、**推奨のフェデレーション サーバーの合計数**全く想像できないのは、ファームの全体的な負荷がその飽和点にヒットはこれまでに配置されたフェデレーション サーバーの数をお勧め合計には、このバッファー内のセルを構築します。  
  
## <a name="see-also"></a>参照してください。
[Windows Server 2012 で AD FS 設計ガイドします。](AD-FS-Design-Guide-in-Windows-Server-2012.md)
