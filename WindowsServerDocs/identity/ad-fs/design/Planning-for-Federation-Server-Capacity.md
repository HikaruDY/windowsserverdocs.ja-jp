---
ms.assetid: 7013fc21-9ced-4f9d-9588-cb04d6d60924
title: フェデレーション サーバーの容量計画
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 618dc9419be965dedaaf7dc946da436a5001f121
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59839633"
---
# <a name="planning-for-federation-server-capacity"></a>フェデレーション サーバーの容量計画

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

フェデレーション サーバーの容量計画では、予測するのに役立ちます。  
  
-   どの要素には、AD FS 構成データベースのサイズが増加します。  
  
-   各フェデレーション サーバーの適切なハードウェア要件。  
  
-   各組織に配置するフェデレーション サーバーの数。  
  
フェデレーション サーバーは、ユーザーにセキュリティ トークンを発行します。 証明書利用者の消費量には、これらのトークンが表示されます。 フェデレーション サーバーは、ユーザーを認証した後、またはパートナーのフェデレーション サービスによって以前に発行されたセキュリティ トークンを受信した後にセキュリティ トークンを発行します。 ユーザーがフェデレーション アプリケーションを最初にサインインするときに、またはセキュリティ トークンには、フェデレーション アプリケーションにアクセスしているときに有効期限が切れる、フェデレーション サービスからセキュリティ トークンが要求されます。  
  
フェデレーション サーバーが高に対応するように設計\-可用性サーバーのファームの構成には、Microsoft Network Load Balancing を使用して、 \(NLB\)テクノロジ。 フェデレーション サーバー ファームの構成をできるサービスを要求個別に、要求ごとに、一般的なファーム コンポーネントにアクセスすることがなく。 そのため、オーバーヘッドはほとんどありませんスケール アウト フェデレーション サーバーの展開に関連します。  
  
**推奨事項:**  
  
-   ミッション\-重大または高\-可用性の展開をお勧めのフォールト トレランスを提供するファームごとに少なくとも 2 つのフェデレーション サーバーで、各パートナー組織に小規模のフェデレーション サーバー ファームを作成することです。  
  
-   、高可用性とスケール アウト フェデレーション サーバーの容易さが必要数、特定のフェデレーション サービスの 1 秒あたりの要求の非常に多くを処理するための推奨される方法は、スケール アウトします。 このガイドの基本構成を超えるスケール アップでは、大きな容量の処理の向上を生成する可能性があります。  
  
## <a name="ad-fs-configuration-database-size-and-growth"></a>AD FS 構成データベースのサイズと拡張  
AD FS 構成データベースのサイズは通常、小規模でと見なされます、データベースのサイズは AD FS の展開の重要な考慮事項ではありませんが。  AD FS 構成データベースの正確なサイズは、信頼関係と関連付けられている信頼の数に大きく依存できます\-関連するメタデータ、信頼性情報などの要求規則、および各信頼の構成設定を監視します。 構成データベース内の信頼のエントリの数が増えるより多くのディスク領域の必要性をも。  
  
AD FS 構成データベースの追加の配置については、次を参照してください。 [AD FS 展開トポロジに関する考慮事項](AD-FS-Deployment-Topology-Considerations.md)します。  
  
## <a name="memory-cpu-and-disk-space-requirements"></a>メモリ、CPU、ディスク領域の要件  
さいわい、フェデレーション サーバーのメモリ、CPU、ディスク領域の要件が適切であると、ハードウェアの判断での推進要因である可能性はありません。 ハードウェア要件の詳細については、次を参照してください[付録 a:。AD FS の要件の確認](Appendix-A--Reviewing-AD-FS-Requirements.md)します。  
  
> [!NOTE]  
> AD FS 構成データベースを格納する専用の SQL Server で構成されているフェデレーション サーバー ファームを使用して、AD FS 製品チームによって実行されたテストで SQL Server の全体的な負荷する傾向に不足しています。 4 つを使用して、テストのいずれかで\-フェデレーション\-CPU 使用率が 1 つの SQL Server を使用するように構成されたサーバー ファームがターゲット使用率にフェデレーション サーバーを移動するテストも 10% を超えないようにします。  
  
## <a name="bk_estimatefs"></a>組織のフェデレーション サーバーの数を見積もる  
フェデレーション サーバーのプロセスを計画、ハードウェアを効率化するために、AD FS 製品チームは開発 AD FS キャパシティ プランニング サイジング スプレッドシートです。 この Excel スプレッドシートには、電卓が含まれています\-予想される使用状況データが取得する機能など、組織内のユーザーに関する提供と、AD FS の運用環境のフェデレーション サーバーの推奨される最適な数を返す.  
  
> [!NOTE]  
> このスプレッドシートを提案するフェデレーション サーバーの数は、AD FS 製品チームがテスト中に使用するハードウェアとネットワークの仕様に基づいています。 そのため、このコンテキスト内でスプレッドシートが提案するフェデレーション サーバーの数を理解する必要があります。  テスト中に使用される仕様の詳細については、」のトピックを参照してください。 [AD FS サーバーのキャパシティ プランニング](Planning-for-AD-FS-Server-Capacity.md)します。  
  
### <a name="using-the-ad-fs-capacity-planning-sizing-spreadsheet"></a>AD FS キャパシティ プランニング サイジング スプレッドシートを使用します。  
このスプレッドシートを使用する場合は、値を選択する必要があります\(か**40%**、 **60%**、または**80%** \)最も的確に表すの割合。期待するユーザーの合計は、認証要求を使用量ピーク期間中に、フェデレーション サーバーに送信されます。  
  
値を選択する必要がありますが、\(か**1 分**、 **15 分**、または**1 時間**\)最も的確に表すはずの時間の長さ最後にピーク使用率の時間。 たとえば、15 分の期間内はログイン ユーザーまたはユーザーの 60% は 1 時間の期間内でログインのユーザーの合計数の値として 40% を見積もる場合があります。 同時に、これらの値は、サイズ変更の推奨事項を計算される、ピーク ロード プロファイルを定義します。  
  
次に、シングル サインオンが必要になるユーザーの合計数を指定する必要がありますには\-ターゲット要求へのアクセスに\-ユーザーがいるかどうかに基づいて、対応するアプリケーション。  
  
-   企業ネットワークに物理的に接続されているローカル コンピューターから Active Directory へのログイン\(Windows 統合認証を通じて\)  
  
-   Active Directory への企業ネットワークに物理的に接続されていないコンピューターからリモートでログイン\(を通じて Windows 統合認証またはユーザー名とパスワード\)  
  
-   別の組織とは対象要求へのアクセスを試みる\-信頼できるパートナーから対応するアプリケーション  
  
-   SAML 2.0 id プロバイダーからターゲット要求へのアクセスを試みる\-対応のアプリケーション  
  
#### <a name="how-to-use-this-spreadsheet"></a>このスプレッドシートを使用する方法  
各フェデレーション サーバー ファーム インスタンスのフェデレーション サーバーの推奨される数を決定する展開する予定の次の手順を使用することができます。  
  
1.  ダウンロードを開き、 [Windows Server 2012 R2 の AD FS キャパシティ プランニング サイジング スプレッドシート](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacityPlanning.xlsx)または[Windows Server 2016 の AD FS キャパシティ プランニング サイジング スプレッドシート](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacity2016.xlsx)します。
  
2.  右側にあるセルで、**システム使用率のピーク時間中にこのパーセンテージを認証するユーザーの期待**セルやセルをクリックし、ドロップダウンを使用して\-下向きの矢印を推定システム使用率を選択します。レベル、か**40%**、 **60%** または**80%** 展開します。  
  
3.  右側にあるセルで、**次の期間内で**セルやセルをクリックし、ドロップダウンを使用して\-下向きの矢印を選択するか**1 分**、 **15 分**、または**1 時間**ピーク時の負荷の期間を選択します。  
  
4.  右側にあるセルで、 **Enter 内部アプリケーションの数を推定する\(など SharePoint \(2007 または 2010\)対応の web アプリケーションを要求または\)** セルの番号を入力します内部アプリケーションは、組織内で使用します。  
  
5.  右側にあるセルで、 **Enter オンライン アプリケーションの数を推定する\(など、Office 365 Exchange Online、SharePoint Online または Lync Online\)** セルに、オンライン アプリケーションの数を入力またはサービスは、組織で使用します。  
  
6.  という名前のセル**ユーザーの数**、型、ユーザーをアプリケーション シナリオの例に適用される各の行の数はサインオン シングルする必要があります\-へのアクセスにします。 この列には、1 秒あたり最大ユーザーではなく、定義済みのユーザーの数を含める必要があります。 場合は、アプリケーションへのアクセス試行をする必要があります、ホーム領域検出ページ経由最初に、入力**Y**します。この選択の確信できない場合は、入力**Y**します。  
  
7.  次の推奨が提供する値を確認します。  
  
    1.  推奨されるフェデレーション サーバーの総数、灰色で強調表示されている下限の右側のセルを参照してください。  
  
    2.  各例のアプリケーション シナリオの推奨サーバー数、灰色で反転表示された行のセルを参照してください。  
  
> [!NOTE]  
> という名前のセルの右側にあるセルで自動的に計算される値**推奨のフェデレーション サーバーの合計数**スプレッドシートの下部にある数式が含まれていますする追加の 20% のバッファーが追加されますが、。前に、個々 の行のそれぞれのすべての値の合計。 追加された数式、**推奨フェデレーション サーバーの総数**ファームの全体的な負荷が打ったこと可能性がかなり低いように配置されたフェデレーション サーバーの数をお勧めします合計には、このバッファー内のセルのビルド。その彩度ポイント。  
  
## <a name="see-also"></a>関連項目
[Windows Server 2012 で AD FS 設計ガイドします。](AD-FS-Design-Guide-in-Windows-Server-2012.md)
