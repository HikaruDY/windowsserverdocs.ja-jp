---
ms.assetid: 7013fc21-9ced-4f9d-9588-cb04d6d60924
title: フェデレーション サーバーの容量計画
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 418bc5d53a2bd11afa8563b07bbff76c89495715
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71407978"
---
# <a name="planning-for-federation-server-capacity"></a>フェデレーション サーバーの容量計画

フェデレーションサーバーの容量計画では、次のことを見積もることができます。  
  
-   AD FS 構成データベースのサイズを増やす要因。  
  
-   各フェデレーションサーバーの適切なハードウェア要件。  
  
-   各組織に配置するフェデレーションサーバーの数。  
  
フェデレーションサーバーは、ユーザーにセキュリティトークンを発行します。 これらのトークンは、使用のために証明書利用者に提示されます。 フェデレーションサーバーは、ユーザーを認証した後、または以前にパートナーフェデレーションサービスによって発行されたセキュリティトークンを受信した後に、セキュリティトークンを発行します。 ユーザーがフェデレーションアプリケーションに初めてサインインしたとき、またはセキュリティトークンがフェデレーションアプリケーションにアクセスしている間に期限切れになったときに、フェデレーションサービスからセキュリティトークンが要求されます。  
  
フェデレーションサーバーは、Microsoft ネットワーク負荷分散 \(NLB @ no__t テクノロジを使用する高 @ no__t-0availability サーバーファーム構成に対応するように設計されています。 ファーム構成のフェデレーションサーバーは、要求ごとに共通のファームコンポーネントにアクセスすることなく、個別に要求を処理できます。 そのため、フェデレーションサーバーの展開をスケールアウトする際には、オーバーヘッドがほとんど発生しません。  
  
**推奨事項**  
  
-   ミッション @ no__t-0critical または high @ no__t 可用性のデプロイの場合は、フォールトトレランスを提供するために、各パートナー組織に小規模のフェデレーションサーバーファームを作成し、ファームごとに少なくとも2つのフェデレーションサーバーを作成することをお勧めします。  
  
-   高可用性を必要とし、フェデレーションサーバーを簡単にスケールアウトできるようにするために、特定のフェデレーションサービスに対して1秒あたりの要求の数が多い場合は、スケールアウトを使用することをお勧めします。 このガイドで基本構成を超えてスケールアップすると、容量の処理能力が大幅に向上することはほとんどありません。  
  
## <a name="ad-fs-configuration-database-size-and-growth"></a>構成データベースのサイズと拡張の AD FS  
AD FS 構成データベースのサイズは、通常は小さいと見なされ、AD FS の配置ではデータベースのサイズが大きな考慮事項になるとは限りません。  AD FS 構成データベースの正確なサイズは、信頼関係の数と、各信頼に対して構成されている要求、要求規則、監視設定などの関連する信頼関係の no__t によって大きく左右されます。 構成データベース内の信頼エントリの数が増えるにつれて、より多くのディスク領域が必要になります。  
  
AD FS 構成データベースのその他の展開情報については、「 [AD FS 展開トポロジに関する考慮事項](AD-FS-Deployment-Topology-Considerations.md)」を参照してください。  
  
## <a name="memory-cpu-and-disk-space-requirements"></a>メモリ、CPU、およびディスク領域の要件  
幸いにも、フェデレーションサーバーのメモリ、CPU、およびディスク領域の要件は適度であり、ハードウェアの決定に推進要因となることはほとんどありません。 ハードウェア要件の詳細については、「[Appendix A:AD FS の要件 @ no__t を確認しています。  
  
> [!NOTE]  
> AD FS 構成データベースを格納するために専用の SQL Server で構成されたフェデレーションサーバーファームを使用して AD FS 製品チームによって実行されたテストでは、SQL Server の全体的な負荷は低くなります。 1つの SQL Server を使用するように構成された4つの @ no__t-0federation @ no__t-1server ファームを使用しているテストでは、CPU 使用率が 10% を超えることはありませんでした。これは、フェデレーションサーバーをターゲットの使用率にします。  
  
## <a name="bk_estimatefs"></a>組織のフェデレーションサーバーの数を推定する  
フェデレーションサーバーのハードウェア計画プロセスを効率化するための取り組みとして、AD FS 製品チームは、AD FS 容量計画のサイジングスプレッドシートを開発しました。 この Excel スプレッドシートには、組織内のユーザーについて提供する予想される使用状況データを取得し、AD FS 運用環境で推奨される最適なフェデレーションサーバーの数を返す、電卓 @ no__t の機能が含まれています。  
  
> [!NOTE]  
> このスプレッドシートで推奨されるフェデレーションサーバーの数は、AD FS 製品チームがテスト時に使用したハードウェアとネットワークの仕様に基づいています。 そのため、このコンテキストでは、スプレッドシートで推奨されるフェデレーションサーバーの数を理解する必要があります。  テスト中に使用される仕様の詳細については、「 [Planning for AD FS Server Capacity](Planning-for-AD-FS-Server-Capacity.md)」を参照してください。  
  
### <a name="using-the-ad-fs-capacity-planning-sizing-spreadsheet"></a>AD FS 容量計画のサイジングスプレッドシートの使用  
このスプレッドシートを使用する場合は、@no__t- **0either%** 、 **60%** 、または**80%** \) のいずれかの値を選択する必要があります。これは、予想されるユーザーのうち、必要なユーザーのうち、フェデレーションサーバーに認証要求を送信するユーザーの総数の割合を表します。ピーク時の使用期間。  
  
次に、ピーク時の使用期間が最後に予想される時間の長さを最もよく表す**1 分**、 **15 分**、 **1 @no__t 時間**のいずれかの @no__t 値を選択する必要があります。 たとえば、15分間にログインするユーザーの総数の値として 40% を推定する場合や、ユーザーの 60% が1時間以内にログインする場合があります。 これらの値を一緒に使用して、サイズ設定の推奨を計算するピーク時の読み込みプロファイルを定義します。  
  
次に、ユーザーが次のいずれであるかに基づいて、ターゲット要求 @ no__t 対応アプリケーションへのアクセス時に、シングルサインオンを必要とするユーザーの合計数を指定する必要があります。  
  
-   企業ネットワークに物理的に接続されているローカルコンピューターから Active Directory にログインするには \(through 統合認証 @ no__t-1  
  
-   企業 @no__t ネットワークに物理的に接続されていないコンピューターからリモートで Active Directory にログインするには、Windows 統合認証またはユーザー名とパスワード @ no__t-1 を使用します。  
  
-   別の組織から、信頼されたパートナーからターゲットの要求 @ no__t 対応アプリケーションにアクセスしようとしています  
  
-   SAML 2.0 id プロバイダーから、ターゲット要求 @ no__t 対応アプリケーションにアクセスしようとしています  
  
#### <a name="how-to-use-this-spreadsheet"></a>このスプレッドシートの使用方法  
展開を計画しているフェデレーションサーバーファームインスタンスごとに、次の手順を使用して、推奨されるフェデレーションサーバーの数を決定できます。  
  
1.  [Windows server 2012 R2 の AD FS 容量計画のサイジングスプレッドシート](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacityPlanning.xlsx)をダウンロードして開き、 [Windows server 2016 用の AD FS 容量計画のサイジングスプレッドシート](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacity2016.xlsx)を開きます。
  
2.  システムのピーク時に、の右側のセルで、**この割合のユーザーがセルを認証する**ことを想定しています。セルをクリックし、drop @ no__t-1down 矢印を使用して、システムの推定使用率のレベル ( **40%** ) を選択します。展開では、 **60%** または**80%** 。  
  
3.  **次の期間内**のの右側のセルで、セルをクリックし、drop @ no__t-1down 矢印を使用して**1 分**、 **15 分**、または**1 時間**のいずれかを選択して、ピーク時の負荷の期間を選択します。  
  
4.  **SharePoint \(2007、2010 @ no__t、要求に対応する web アプリケーション @ no__t のように、[内部アプリケーションの推定推定数] @no__t**の右側のセルに、で使用する内部アプリケーションの数を入力します。部門.  
  
5.  **Office 365 Exchange online、SharePoint online、Lync online @ no__t など、[オンライン @no__t アプリケーションの推定数を入力してください]** の右側のセルに、組織で使用するオンラインアプリケーションまたはサービスの数を入力します。  
  
6.  **[Number Of Users]** というタイトルのセルに、サンプルアプリケーションシナリオに適用される行ごとに数字を入力します。ユーザーは、へのアクセスにシングルサイン @ no__t-1 を必要とします。 この列には、1秒あたりのピークユーザーではなく、定義されたユーザーの数が含まれている必要があります。 アプリケーションへのアクセスの試行を最初に [ホーム領域検出] ページで行う必要がある場合は、「 **Y**」と入力します。この選択がわからない場合は、「 **Y**」と入力します。  
  
7.  次の推奨値を確認してください。  
  
    1.  推奨されるフェデレーションサーバーの合計数については、灰色で強調表示されている右下のセルを参照してください。  
  
    2.  各サンプルアプリケーションシナリオで推奨されるサーバー数については、灰色で強調表示されている行のセルを参照してください。  
  
> [!NOTE]  
> スプレッドシートの下部で推奨されている**フェデレーションサーバーの合計数**に関するセルの右側のセルで自動的に計算される値には、20% のバッファーがすべての合計に追加される数式が含まれています。前にある個々の各行の値。 このバッファーには、ファームの全体的な負荷が飽和状態になることがほとんどないようにするために、このバッファーで推奨されるフェデレーションサーバーの合計数に対して、推奨されるセルの合計**数**に対して、推奨される合計数のセルが追加されます。  
  
## <a name="see-also"></a>関連項目
[Windows Server 2012 での AD FS 設計ガイド](AD-FS-Design-Guide-in-Windows-Server-2012.md)
