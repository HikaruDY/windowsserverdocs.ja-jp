---
title: ソフトウェアの制限のポリシーのトラブルシューティング
description: Windows Server のセキュリティ
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-software-restriction-policies
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4fd53736-03e7-4bf9-ba90-d1212d93e19a
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: abf592930f5347fa10e83c644671f68f9dc1a3f6
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59872383"
---
# <a name="troubleshoot-software-restriction-policies"></a>ソフトウェアの制限のポリシーのトラブルシューティング

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

ここでは、Windows Server 2008 および Windows Vista 以降のソフトウェア制限ポリシー (SRP) のトラブルシューティングを行うときの一般的な問題とその解決方法を説明します。

## <a name="introduction"></a>概要
ソフトウェアの制限のポリシー (SRP) はグループ ポリシー ベースの機能で、ドメイン内のコンピューターで実行されているソフトウェア プログラムを識別し、これらのプログラムを実行する機能を制御します。 ソフトウェアの制限のポリシーを使えば、コンピューターの構成に厳格な制限を加え、指定したアプリケーションに限って実行を許可することができます。 これらは、Microsoft Active Directory Domain Services とグループ ポリシーに統合されますが、スタンドアロン コンピューター上で構成することもできます。 SRP の詳細については、次を参照してください。、[ソフトウェア制限ポリシー](software-restriction-policies.md)します。

Windows Server 2008 R2 および Windows 7 以降、Windows AppLocker できますの代わりに、または SRP と連携してアプリケーション制御戦略の一部。

### <a name="windows-cannot-open-a-program"></a>Windows でプログラムを開くことはできません。
ユーザーには、"Windows プログラムをこのため、開けませんソフトウェア制限ポリシーによって許可されていませんことを示すメッセージが表示されます。 詳細については、イベント ビューアーを開くまたはシステム管理者に問い合わせてください。" または、「システムは、指定したプログラムを実行できません」のメッセージをコマンドラインで質問

**原因:** ソフトウェア プログラムとして設定されるように既定のセキュリティ レベル (またはルール) が作成された**許可しない**、し、その結果は開始されません。

**解決方法:** 詳細については、メッセージのイベント ログを確認します。 イベント ログ メッセージは、どのようなソフトウェア プログラムは、設定を示します**許可しない**とプログラムにどのようなルールを適用します。

### <a name="modified-software-restriction-policies-are-not-taking-effect"></a>変更されたソフトウェアの制限のポリシーが有効になっていません。
**原因:** グループ ポリシーによってドメインで指定されているソフトウェアの制限のポリシーは、ローカルに構成されているポリシーの設定をオーバーライドします。 これは可能性があります、ポリシー設定をオーバーライドしているドメインからのポリシー設定があることを意味します。

**原因:** グループ ポリシーは、しない、ポリシーの設定を更新している可能性があります。 グループ ポリシー変更を適用ポリシーの設定に定期的にします。したがって、あるディレクトリで行われたポリシーの変更がまだ更新されていない可能性があります。

**ソリューション:**

1.  ネットワークのソフトウェア制限ポリシーを変更するコンピューターは、ドメイン コント ローラーに接続できる必要があります。 コンピューターがドメイン コント ローラーに接続できることを確認します。

2.  ネットワークからログインし、再度ログオンし、ネットワークにもう一度によってポリシーを更新します。 グループ ポリシーを通じて任意のポリシーが適用される場合、再度ログインと、これらのポリシーが更新されます。

3.  コマンド ライン ユーティリティ gpupdate をまたはからログオフしてもう一度ログオン、コンピューターにログオンし、ポリシー設定を更新することができます。 最良の結果を gpupdate を実行およびからログオフし、コンピューターに再びログオンします。 一般に、セキュリティ設定は、ワークステーションまたはサーバーでは 90 分ごとと、ドメイン コント ローラーでは 5 分ごとに更新されます。 変更の有無にかかわらず、設定は 16 時間ごとにも更新されます。 これらは、更新間隔は、ドメインごとに異なる可能性がありますので、構成可能な設定です。

4.  適用するポリシーをチェックします。 ドメイン レベルのポリシーを確認してください。**上書きなし**設定します。

5.  グループ ポリシーによってドメインで指定されているソフトウェアの制限のポリシーは、ローカルに構成されているすべてのポリシーをオーバーライドします。 Gpresult コマンド ライン ツールを使用して、ポリシーの実質的な効果を確認します。 これは、ローカル設定をオーバーライドしているドメインからのポリシーがあることを意味可能性があります。

6.  SRP と AppLocker ポリシーの設定が、同じ GPO である場合は、AppLocker の設定が優先で Windows 7、Windows Server 2008 R2、およびそれ以降。 SRP と AppLocker のポリシー設定を別の Gpo に配置することをお勧めします。

### <a name="after-adding-a-rule-through-srp-you-cannot-log-on-to-your-computer"></a>SRP でルールを追加した後は、コンピューターにログオンすることはできません。
**原因:** お使いのコンピューターは、開始時に多くのプログラムとファイルにアクセスします。 誤って設定したこれらのプログラムまたはファイルのいずれかの**許可しない**します。 コンピューターは、プログラムまたはファイルにアクセスできない、ため、正しく開始できません。

**解決方法:** コンピューターをセーフ モードで起動、ローカルの管理者としてログオンおよびプログラムまたはファイルが実行を許可するソフトウェア制限ポリシーを変更します。

### <a name="a-new-policy-setting-is-not-applying-to-a-specific-file-name-extension"></a>新しいポリシー設定が特定のファイル名拡張子には適用されません。
**原因:** ファイル名拡張子は、サポートされているファイルの種類の一覧にないです。

**解決方法:** SRP でサポートされているファイルの種類の一覧にファイル名拡張子を追加します。

ソフトウェア制限ポリシーは、不明または信頼できないコードの規制の問題に対処します。 ソフトウェア制限ポリシーは、ソフトウェアを識別し、サイト、ドメイン、または OU 内のローカルのコンピューターで実行するには、その機能を制御するセキュリティ設定し、GPO を実装することができます。

### <a name="a-default-rule-is-not-restricting-as-expected"></a>既定のルールが期待どおりに制限します。
**原因:** 特定のルールで上書きする既定の規則が可能性がある特定の順序で適用される規則です。 SRP では、([全般] に最も固有) 次の順序で規則が適用されます。

1.  ハッシュの規則

2.  証明書の規則

3.  パスの規則

4.  インターネット ゾーンの規則

5.  既定の規則

**解決方法:** アプリケーションを制限する規則を評価し、該当する場合は、既定の規則以外はすべて削除します。

### <a name="unable-to-discover-which-restrictions-are-applied"></a>どの制限が適用されるかを検出できません。
**原因:** 明らかな原因は、予期しない動作ではありませんし、さらに調査が必要なために、GPO の更新は、問題を解決できませんがします。

**ソリューション:**

1.  「ソフトウェア制限ポリシー」のソースにフィルター処理、システム イベント ログの調査します。 エントリは、どのルールを各アプリケーションの実装は明示的に記述します。

2.  高度なログ記録を有効にします。 参照してください[許可/拒否リストを確認し、ソフトウェア制限ポリシーのアプリケーション インベントリを](software-restriction-policies.md)詳細についてはします。


