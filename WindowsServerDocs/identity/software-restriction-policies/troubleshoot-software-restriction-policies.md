---
title: "ソフトウェアの制限のポリシーをトラブルシューティングします。"
description: "Windows Server のセキュリティ"
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-software-restriction-policies
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4fd53736-03e7-4bf9-ba90-d1212d93e19a
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: abf592930f5347fa10e83c644671f68f9dc1a3f6
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/12/2017
---
# <a name="troubleshoot-software-restriction-policies"></a>ソフトウェアの制限のポリシーをトラブルシューティングします。

>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

このトピックでは、ソフトウェア制限ポリシー (SRP) 以降は、Windows Server 2008 および Windows Vista でのトラブルシューティングを行うときの一般的な問題とその解決策をについて説明します。

## <a name="introduction"></a>概要
ソフトウェア制限ポリシー (SRP) は、ドメイン内のコンピューターで実行されているソフトウェア プログラムを指定し、これらのプログラムを実行する機能を制御する、グループ ポリシー ベースの機能です。 厳しく制限されているしたアプリケーションに限って実行を許可する、コンピューターの構成を作成するのにには、ソフトウェアの制限のポリシーを使用します。 これらは、Microsoft Active Directory Domain Services とグループ ポリシーに統合されているが、スタンドアロン コンピューター上で構成することもあります。 SRP の詳細については、次を参照してください。、 [Software Restriction Policies](software-restriction-policies.md)します。

Windows Server 2008 R2 および Windows 7 以降、Windows AppLocker を使用できるの代わりに、または SRP と連動してアプリケーション制御戦略の一部を受け取ります。

### <a name="windows-cannot-open-a-program"></a>Windows は、プログラムを開くことができません。
ユーザーには、"Windows このプログラムために開けませんソフトウェア制限ポリシーによって許可されていませんというメッセージが表示されます。。 詳細については、イベント ビューアーを開くまたはシステム管理者に問い合わせてください。" または、コマンド ラインでというメッセージが「システムは、指定したプログラムを実行できません」

**原因:**ソフトウェア プログラムが設定されるように既定のセキュリティ レベル (または規則) が作成された**許可しない**、し、その結果は開始されません。

**解決策:**メッセージの詳細については、イベント ログがないか調べます。 イベント ログ メッセージでは、どのようなソフトウェア プログラムは、設定を示します**許可しない**プログラムにどのような規則が適用されるとします。

### <a name="modified-software-restriction-policies-are-not-taking-effect"></a>変更されたソフトウェアの制限のポリシーが反映されません。
**原因:**グループ ポリシーによってドメインで指定されているソフトウェアの制限のポリシーがローカルに構成されているすべてのポリシー設定を上書きします。 これは可能性があります、ポリシー設定よりも優先されるドメインからのポリシー設定があることを意味します。

**原因:**グループ ポリシーのポリシー設定が更新されない可能性があります。 グループ ポリシー変更を適用ポリシー設定を定期的にします。したがって、いるディレクトリで行われたポリシーの変更がまだ更新されていない可能性がします。

**解決方法:**

1.  ネットワークのソフトウェアの制限のポリシーを変更するコンピューターは、ドメイン コントローラーに接続できる必要があります。 コンピューターがドメイン コントローラーに接続できることを確認します。

2.  ネットワークから切断のログとにログオンし、ネットワークにもう一度、ポリシーを更新します。 グループ ポリシーを介してすべてのポリシーが適用される場合、ログに戻ると、これらのポリシーが更新されます。

3.  コマンド ライン ユーティリティ gpupdate またはからログオフし、もう一度ログオンお使いのコンピューターにログオンし、ポリシー設定を更新することができます。 最良の結果を gpupdate を実行およびからログオフし、もう一度コンピューター ログオンします。 一般に、セキュリティ設定は、ワークステーションまたはサーバーでは 90 分ごとおよびドメイン コントローラーで 5 分ごとに更新されます。 設定も更新 16 時間ごとに、変更があるかどうか。 これらは、更新間隔は、ドメインごとに異なる可能性がありますので、構成可能な設定です。

4.  適用されるポリシーを確認します。 ドメイン レベルのポリシーを確認して**上書きしない**設定します。

5.  グループ ポリシーによってドメインで指定されているソフトウェアの制限のポリシーは、ローカルに構成されているすべてのポリシーを上書きします。 Gpresult コマンド ライン ツールを使用すると、ポリシーの最終的な効果が何かを判断できます。 これは、ドメイン、ローカル設定が上書きされてからポリシーがあることを意味可能性があります。

6.  SRP と AppLocker ポリシーの設定が同じ GPO 内にある場合は、AppLocker の設定が優先 Windows 7、Windows Server 2008 R2 では、上かそれ以降。 SRP と AppLocker のポリシー設定を別の Gpo に配置することをお勧めします。

### <a name="after-adding-a-rule-through-srp-you-cannot-log-on-to-your-computer"></a>SRP でルールを追加した後は、コンピューターにログオンすることはできません。
**原因:**開始時に多くのプログラムとファイルをコンピューターがアクセスできます。 誤って設定したこれらのプログラムまたはファイルのいずれかの**許可しない**します。 コンピューターは、プログラムまたはファイルにアクセスできない、ため正しく起動できません。

**解決策:**セーフ モードでコンピューターを起動、ローカルの管理者としてログオンし、プログラムまたはファイルが実行を許可するようにソフトウェアの制限のポリシーを変更します。

### <a name="a-new-policy-setting-is-not-applying-to-a-specific-file-name-extension"></a>特定のファイル名拡張子を新しいポリシー設定が適用されていません
**原因:**ファイル名拡張子がサポートされているファイルの種類の一覧にありません。

**解決策:** SRP によってサポートされるファイルの種類の一覧にファイル名拡張子を追加します。

ソフトウェアの制限のポリシーは、不明または信頼されていないコードの規制の問題を解決します。 ソフトウェア制限ポリシーは、ソフトウェアを特定し、サイト、ドメイン、または OU 内のローカル コンピューター上で実行するには、その機能を制御するセキュリティ設定し、GPO を介して実装することができます。

### <a name="a-default-rule-is-not-restricting-as-expected"></a>既定の規則が期待どおりに制限はありません。
**原因:**特定の規則で上書きするための既定の規則が発生する特定の順序で適用されるルールです。 SRP では、次の順序 (最もに固有の全般的な) 内の規則が適用されます。

1.  ハッシュの規則

2.  証明書の規則

3.  パスの規則

4.  インターネット ゾーンの規則

5.  既定の規則

**解決策:**アプリケーションを制限する規則を評価し、該当する場合を除くすべての既定の規則を削除します。

### <a name="unable-to-discover-which-restrictions-are-applied"></a>どのような制限が適用されたを検出できません。
**原因:**明らかな原因は、予期しない動作ではありませんし、GPO の更新がない問題が解決されたため、さらに調査が必要です。

**解決方法:**

1.  Investigate the System Event Log, filtering on source of "Software Restriction Policy." エントリは、アプリケーションごとに実装されているルールに明示的に記述します。

2.  高度なログ記録を有効にします。 参照してください[許可/拒否リストを確認し、ソフトウェアの制限のポリシーのアプリケーションのインベントリ](software-restriction-policies.md)詳細についてはします。


