---
title: "ソフトウェアの制限のポリシー規則を使用します。"
description: "Windows Server のセキュリティ"
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-software-restriction-policies
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4a8047d5-9bb9-4bed-bc8f-583a237731e2
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 2dd1810b50f4f02be99eb2e2c0893501f99d1e93
ms.sourcegitcommit: 70c1b6cedad55b9c7d2068c9aa4891c6c533ee4c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2017
---
# <a name="work-with-software-restriction-policies-rules"></a>ソフトウェアの制限のポリシー規則を使用します。

>適用対象: Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

このトピックでは、ソフトウェアの制限のポリシーを使用してゾーンおよびハッシュの規則を証明書、パス、インターネットの操作手順について説明します。

## <a name="introduction"></a>概要
ソフトウェアの制限のポリシーを識別および実行を許可するソフトウェアを指定して、信頼されていないソフトウェアからコンピューティング環境を保護できます。 既定のセキュリティ レベルを定義する**無制限**または**許可しない**グループ ポリシー オブジェクト (GPO) ソフトウェアが、許可または拒否できるように許可すると、既定では実行します。 ソフトウェアの制限のポリシーの特定のソフトウェアの規則を作成することで、この既定のセキュリティ レベルに対する例外を行うことができます。 たとえば、既定のセキュリティ レベルに設定されて**許可しない**を実行する特定のソフトウェアを許可する規則を作成することができます。 ルールの種類は次のとおりです。

-   **証明書の規則**

    手順については、次を参照してください。[の証明書の規則の操作](#BKMK_Cert_Rules)します。

-   **ハッシュの規則**

    手順については、次を参照してください。[のハッシュの規則の操作](#BKMK_Hash_Rules)します。

-   **インターネット ゾーンの規則**

    手順については、次を参照してください。[のインターネット ゾーンの規則の操作](#BKMK_Internet_Zone_Rules)します。

-   **パスの規則**

    手順については、次を参照してください。[のパスの規則の操作](#BKMK_Path_Rules)します。

ソフトウェアの制限のポリシーを管理するには、その他のタスクについては、次を参照してください。[ソフトウェア制限ポリシーの管理](administer-software-restriction-policies.md)します。

## <a name="BKMK_Cert_Rules"></a>証明書の規則の操作
ソフトウェアの制限のポリシーの署名証明書によってソフトウェアを識別できます。 ソフトウェアを識別し、または実行するには、セキュリティ レベルに応じてソフトウェアを許可しない証明書の規則を作成することができます。 たとえば、ドメインで信頼されるソースからソフトウェアをユーザーに確認しないで自動的に信頼するのに証明書の規則を使用することができます。 また、オペレーティング システムの許可されていない領域でファイルを実行するのに証明書の規則を使用することができます。 証明書の規則は、既定では無効です。

グループ ポリシーを使用してドメインの規則が作成されると、作成またはグループ ポリシー オブジェクトを変更するアクセス許可が必要です。 ローカル コンピューターの規則を作成する場合は、そのコンピューターで管理者の資格情報が必要です。

#### <a name="to-create-a-certificate-rule"></a>証明書の規則を作成するには

1.  ソフトウェアの制限のポリシーを開きます。

2.  コンソール ツリーまたは詳細ウィンドウで右クリック**の追加ルール**、] をクリックし、**新しい証明書の規則**します。

3.  をクリックして**参照**、証明書または署名されたファイルを選択します。

4.  **セキュリティ レベル**、] をクリックするか**許可しない**または**無制限**します。

5.  **説明**この規則の説明を入力し、[クリックして**OK**します。

> [!NOTE]
> -   されていない場合、新しいソフトウェアの制限のポリシー設定のグループ ポリシー オブジェクト (GPO) を作成する必要がある場合があります。
> -   証明書の規則は、既定では無効です。
> -   証明書の規則の影響を受けるファイルの種類に記載されている**ファイルの種類を指定**ソフトウェア制限ポリシーの詳細ウィンドウでします。 指定されたファイルの種類のすべてのルールによって共有されている 1 つのリストがあります。
> -   ソフトウェアの制限のポリシーを有効にする、ユーザーがログオフしてからログオンし、自分のコンピューターにログオンしてポリシー設定を更新する必要があります。
> -   ポリシーの設定に複数のソフトウェアの制限のポリシー規則を適用する場合は、競合を処理するための規則の優先順位があります。

### <a name="enabling-certificate-rules"></a>証明書の規則を有効にします。
これには、環境に応じて証明書の規則を有効にするためのさまざまな手順があります。

-   [ローカル コンピューターに対して](#BKMK_1)

-   [グループ ポリシー オブジェクトを使用しているドメインに参加しているサーバー上の](#BKMK_2)

-   [グループ ポリシー オブジェクトを使用しているドメイン コント ローラーまたはリモート サーバー管理ツールがインストールされているワークステーション上の](#BKMK_3)

-   [のみのドメイン コント ローラー、またはしているドメイン コント ローラーでリモート サーバー管理ツール パックがインストールされたワークステーション上](#BKMK_4)

#### <a name="BKMK_1"></a>ローカル コンピューターの証明書の規則を有効にするには

1.  ローカル セキュリティ設定を開きます。

2.  コンソール ツリーでクリックして**セキュリティ オプション**セキュリティの設定/ローカル ポリシーの下にあります。

3.  詳細ウィンドウでダブルクリック**システム設定: ソフトウェア制限ポリシーの Windows 実行可能ファイルに対して証明書の規則を使用**します。

4.  クリックして、次のいずれかの操作**OK**:

    -   証明書の規則を有効にする] をクリックして**有効**します。

    -   証明書の規則を無効にするには、**無効になっている**します。

#### <a name="BKMK_2"></a>証明書の規則を有効にするには、のグループ ポリシー オブジェクトを使用しているドメインに参加しているサーバー上で

1.  Microsoft 管理コンソール (MMC) を開きます。

2.  **ファイル**] メニューのをクリックして**スナップインの追加/削除**、] をクリックし、**追加**します。

3.  をクリックして**ローカル グループ ポリシー オブジェクト エディター**、] をクリックし、**追加**します。

4.  **グループ ポリシー オブジェクトの選択**、] をクリックして**参照**します。

5.  **グループ ポリシー オブジェクトの参照**、適切なドメイン、サイト、または組織単位にグループ ポリシー オブジェクト (GPO) を選択、または、新しいものを作成し、をクリックして**完了**します。

6.  をクリックして**閉じる**、] をクリックし、 **OK**します。

7.  コンソール ツリーでクリックして**セキュリティ オプション**の下にある*GroupPolicyObject* [*ComputerName*] ポリシー/コンピューターの構成/windows の設定/セキュリティの設定/ローカル ポリシー/します。

8.  詳細ウィンドウでダブルクリック**システム設定: ソフトウェア制限ポリシーの Windows 実行可能ファイルに対して証明書の規則を使用**します。

9. このポリシー設定が定義されていない場合は、選択、**これらのポリシー設定を定義する**チェック ボックスをオンします。

10. クリックして、次のいずれかの操作**OK**:

    -   証明書の規則を有効にする] をクリックして**有効**します。

    -   証明書の規則を無効にするには、**無効になっている**します。

#### <a name="BKMK_3"></a>グループ ポリシー オブジェクトでは、ルールの証明書を有効にして、ドメイン コント ローラーで、またはリモート サーバー管理ツールがインストールされているワークステーション

1.  Active Directory ユーザーとコンピューターを開きます。

2.  コンソール ツリーで、証明書の規則を有効にするグループ ポリシー オブジェクト (GPO) を右クリックします。

3.  をクリックして**プロパティ**、クリックして、**グループ ポリシー** ] タブ。

4.  をクリックして**編集**を編集する GPO を開きます。 クリックすることも**新規**、新しい GPO を作成し、をクリックする**編集**します。

5.  コンソール ツリーでクリックして**セキュリティ オプション**の下にある*GroupPolicyObject*[*ComputerName*] ポリシー/コンピューター構成/windows の設定/セキュリティの設定/ローカル ポリシー。

6.  詳細ウィンドウでダブルクリック**システム設定: ソフトウェア制限ポリシーの Windows 実行可能ファイルに対して証明書の規則を使用**します。

7.  このポリシー設定が定義されていない場合は、選択、**これらのポリシー設定を定義する**チェック ボックスをオンします。

8.  クリックして、次のいずれかの操作**OK**:

    -   証明書の規則を有効にする] をクリックして**有効**します。

    -   証明書の規則を無効にするには、**無効になっている**します。

#### <a name="BKMK_4"></a>有効にするには、ドメイン コント ローラー、およびのみの証明書の規則は、ドメイン コント ローラー上またはリモート サーバー管理ツールがインストールされているワークステーション上

1.  ドメイン コント ローラーのセキュリティ設定を開きます。

2.  コンソール ツリーでクリックして**セキュリティ オプション**の下にある*GroupPolicyObject* [*ComputerName*] ポリシー/コンピューター構成/windows の設定/セキュリティの設定/ローカル ポリシー。

3.  詳細ウィンドウでダブルクリック**システム設定: ソフトウェア制限ポリシーの Windows 実行可能ファイルに対して証明書の規則を使用**します。

4.  このポリシー設定が定義されていない場合は、選択、**これらのポリシー設定を定義する**チェック ボックスをオンします。

5.  クリックして、次のいずれかの操作**OK**:

    -   証明書の規則を有効にする] をクリックして**有効**します。

    -   証明書の規則を無効にするには、**無効になっている**します。

> [!NOTE]
> 証明書の規則を有効にするには、この手順を実行する必要があります。

### <a name="set-trusted-publisher-options"></a>信頼された発行元のオプションを設定します。
ソフトウェアの署名されている、増え続けるソフトウェア発行者およびアプリケーション開発者によって、アプリケーションの発行元が信頼できることを確認します。 ただし、多くのユーザーが理解しない、またはほとんど関心が署名証明書をインストールするアプリケーションに関連付けられているしないでください。

ポリシーの設定、**信頼された発行元**の証明書パス検証ポリシーのタブを使用して管理者が制御する証明書を信頼された発行元からのものとして受け入れられることができます。

##### <a name="to-configure-the-trusted-publishers-policy-settings-for-a-local-computer"></a>ローカル コンピューターの信頼された発行元ポリシー設定を構成するには

1.  **開始**画面で「**gpedit.msc**し、ENTER キーを押します。

2.  コンソール ツリーの [**ローカル コンピューター ポリシーの構成 \windows 設定 \ セキュリティ設定**、] をクリックして**公開キーのポリシー**します。

3.  をダブルクリック**証明書パス検証の設定**、クリックして、**信頼される発行元**] タブ。

4.  選択、**これらのポリシー設定を定義する**チェック ボックスをオンで、クリックして、適用するポリシー設定を選択**OK**新しい設定を適用します。

##### <a name="to-configure-the-trusted-publishers-policy-settings-for-a-domain"></a>ドメインの信頼された発行元ポリシー設定を構成するには

1.  開いている**グループ ポリシー管理**します。

2.  コンソール ツリーで、ダブルクリック**グループ ポリシー オブジェクト**フォレストおよびドメインを含む、 **Default Domain Policy**編集するグループ ポリシー オブジェクト (GPO)。

3.  右クリックし、 **Default Domain Policy** GPO をクリックして**編集**します。

4.  コンソール ツリーの [**コンピューターの構成 \windows 設定 \ セキュリティの設定**、] をクリックして**公開キーのポリシー**します。

5.  をダブルクリック**証明書パス検証の設定**、クリックして、**信頼される発行元**] タブ。

6.  選択、**これらのポリシー設定を定義する**チェック ボックスをオンで、クリックして、適用するポリシー設定を選択**OK**新しい設定を適用します。

##### <a name="to-allow-only-administrators-to-manage-certificates-used-for-code-signing-for-a-local-computer"></a>ローカル コンピューターのコード署名に使用される証明書を管理する管理者のみを許可するには

1.  **開始**] 画面で、種類、 **gpedit.msc**で、**プログラムとファイルを検索**または Windows 8 でデスクトップ、およびし、ENTER キーを押します。

2.  コンソール ツリーの [**既定のドメイン ポリシー**または**ローカル コンピューター ポリシー**、] をダブルクリック**コンピューターの構成**、 **Windows 設定**、および**セキュリティ設定**、] をクリックし、**公開キーのポリシー**します。

3.  をダブルクリック**証明書パス検証の設定**、クリックして、**信頼される発行元**] タブ。

4.  選択、**これらのポリシー設定を定義する**チェック ボックスをオンします。

5.  下にある**発行元の管理を信頼された**、] をクリックして**信頼される発行元を管理するすべての管理者のみを許可する**、] をクリックし、 **[ok]**新しい設定を適用します。

##### <a name="to-allow-only-administrators-to-manage-certificates-used-for-code-signing-for-a-domain"></a>ドメインのコード署名に使用される証明書を管理する管理者のみを許可するには

1.  開いている**グループ ポリシー管理**します。

2.  コンソール ツリーで、ダブルクリック**グループ ポリシー オブジェクト**フォレストおよびドメインを含む、 **Default Domain Policy** GPO を編集します。

3.  右クリックし、 **Default Domain Policy** GPO をクリックして**編集**します。

4.  コンソール ツリーの [**コンピューターの構成 \windows 設定 \ セキュリティの設定**、] をクリックして**公開キーのポリシー**します。

5.  をダブルクリック**証明書パス検証の設定**、クリックして、**信頼される発行元**] タブ。

6.  選択、**これらのポリシー設定を定義する**チェック ボックスをオン、し、をクリックし、変更を実装**OK**新しい設定を適用します。

## <a name="BKMK_Hash_Rules"></a>ハッシュの規則の操作
ハッシュは、一連のソフトウェア プログラムまたはファイルを一意に識別する固定長のバイトです。 ハッシュ アルゴリズムでは、ハッシュが計算されます。 ソフトウェア プログラムのハッシュの規則が作成されると、ソフトウェアの制限のポリシーは、プログラムのハッシュを計算します。 ユーザーは、ソフトウェア プログラムを開こうとすると、プログラムのハッシュがソフトウェアの制限のポリシーの既存のハッシュの規則と比較されます。 ソフトウェア プログラムのハッシュは、常に、コンピューター上のプログラムの場所に関係なく同じです。 ただし、ソフトウェア プログラムを何らかの形で変更した場合、そのハッシュも変更し、ソフトウェアの制限のポリシーのハッシュの規則のハッシュと一致しなくします。

たとえば、ハッシュの規則を作成して、セキュリティ レベルを設定**許可しない**ユーザーが特定のファイルを実行できないようにします。 ファイルの名前を変更または別のフォルダーに移動できますとハッシュ値が同一になります。 ただし、ファイル自体に対するすべての変更はまた、ハッシュ値を変更し、ファイルの制限をバイパスするします。

#### <a name="to-create-a-hash-rule"></a>ハッシュの規則を作成するには

1.  ソフトウェアの制限のポリシーを開きます。

2.  コンソール ツリーまたは詳細ウィンドウで右クリック**の追加ルール**、] をクリックし、**新しいハッシュの規則**します。

3.  をクリックして**参照**ファイルを検索します。

    > [!NOTE]
    > Windows XP では内の事前計算されるハッシュ値を貼り付ける**ファイル ハッシュ**します。 Windows Server 2008 R2、Windows 7 およびそれ以降のバージョンでは、このオプションは使用できません。

4.  **セキュリティ レベル**、] をクリックするか**許可しない**または**無制限**します。

5.  **説明**この規則の説明を入力し、[クリックして**OK**します。

> [!NOTE]
> -   されていない場合、新しいソフトウェアの制限のポリシー設定のグループ ポリシー オブジェクト (GPO) を作成する必要がある可能性があります。
> -   ウイルスやトロイの木馬の実行を防ぐことをに対しては、ハッシュの規則を作成することができます。
> -   ウイルスが実行されないように、ハッシュの規則を使用するには、他のユーザーを設定する場合は、ソフトウェアの制限のポリシーを使用して、ウイルスのハッシュを計算し、他のユーザー ハッシュ値を電子メールします。 ウイルス自体を電子メールことはありません。
> -   ウイルスが電子メールで送信された場合、は、電子メールの添付ファイルの実行を防止するためのパス規則を作成することもできます。
> -   名前を変更したり別のフォルダーでも、同じハッシュに移動したファイル。 ファイル自体への変更は、異なるハッシュになります。
> -   ハッシュの規則の影響を受けるファイルの種類に記載されている**指定されたファイルの種類**ソフトウェア制限ポリシーの詳細ウィンドウでします。 指定されたファイルの種類のすべてのルールによって共有されている 1 つのリストがあります。
> -   ソフトウェアの制限のポリシーを有効にする、ユーザーがログオフしてからログオンし、自分のコンピューターにログオンしてポリシー設定を更新する必要があります。
> -   ポリシーの設定に複数のソフトウェアの制限のポリシー規則を適用する場合は、競合を処理するための規則の優先順位があります。

## <a name="BKMK_Internet_Zone_Rules"></a>インターネット ゾーンの規則の操作
インターネット ゾーンの規則は、Windows インストーラー パッケージにのみ適用されます。 ゾーンの規則は、Internet Explorer で指定されているゾーンからのソフトウェアを識別できます。 ゾーンには、インターネット、イントラネット、制限付きサイト、信頼済みサイト、および [マイ コンピューターです。 インターネット ゾーンの規則をダウンロードして、ソフトウェアのインストールからユーザーを防ぐために設計されています。

#### <a name="to-create-an-internet-zone-rule"></a>インターネット ゾーンの規則を作成するには

1.  ソフトウェアの制限のポリシーを開きます。

2.  コンソール ツリーまたは詳細ウィンドウで右クリック**の追加ルール**、] をクリックし、**新しいインターネット ゾーンの規則**します。

3.  **インターネット ゾーン**、インターネット ゾーン] をクリックします。

4.  **セキュリティ レベル**、] をクリックするか**許可しない**または**[制限なし]**、] をクリックし、 **OK**します。

> [!NOTE]
> -   されていない場合、新しいソフトウェアの制限のポリシー設定のグループ ポリシー オブジェクト (GPO) を作成する必要がある可能性があります。
> -   ゾーンの規則は、Windows インストーラー パッケージの .msi ファイルの種類、ファイルにのみ適用されます。
> -   ソフトウェアの制限のポリシーを有効にする、ユーザーがログオフしてからログオンし、自分のコンピューターにログオンしてポリシー設定を更新する必要があります。
> -   ポリシーの設定に複数のソフトウェアの制限のポリシー規則を適用する場合は、競合を処理するための規則の優先順位があります。

## <a name="BKMK_Path_Rules"></a>パスの規則の操作
パスの規則は、ファイル パスによってソフトウェアを識別します。 既定のセキュリティ レベルを持つコンピューターがある場合など、**許可しない**、各ユーザーの特定のフォルダーに無制限のアクセスを付与できます。 パスの規則を作成するにはファイルのパスを使用するパスの規則のセキュリティ レベルを設定して**無制限**します。 この種類の規則のいくつかの一般的なパスは、%userprofile%、%windir%、%appdata%、%programfiles%、および %temp% です。 レジストリは、そのパスとして、ソフトウェアのレジストリ キーを使用してパスの規則も作成できます。

ソフトウェア プログラムが移動した場合、これらのルールは、パスで指定されている、ため、パスの規則が適用されなくなります。

#### <a name="to-create-a-path-rule"></a>パスの規則を作成するには

1.  ソフトウェアの制限のポリシーを開きます。

2.  コンソール ツリーまたは詳細ウィンドウで右クリック**の追加ルール**、] をクリックし、**新しいパスの規則**します。

3.  **パス**、パスを入力するか] をクリックして**参照**ファイルまたはフォルダーを検索します。

4.  **セキュリティ レベル**、] をクリックするか**許可しない**または**無制限**します。

5.  **説明**この規則の説明を入力し、[クリックして**OK**します。

> [!CAUTION]
> -   特定のフォルダーで、Windows フォルダーなど、セキュリティ設定レベルを**許可しない**オペレーティング システムの動作に影響する悪影響を及ぼすことができます。 オペレーティング システムまたはその依存プログラムのいずれかの重要なコンポーネントを許可しないしないことを確認します。

> [!NOTE]
> -   されていない場合、新しいソフトウェアの制限のポリシーのグループ ポリシー オブジェクト (GPO) を作成する必要がある可能性があります。
> -   かどうかルールを作成するパスのあるソフトウェア、セキュリティのレベル**許可しない**、別の場所にコピーすることにより、ソフトウェアを実行できます。
> -   パスの規則でサポートされているワイルドカード文字は、* と? です。
> -   パスの規則では、%programfiles%、%systemroot% などの環境変数を使用できます。
> -   ここで、コンピューター上に格納されてが、そのレジストリ キーがわからない場合、ソフトウェアのパス規則を作成する場合は、レジストリ パスの規則を作成できます。
> -   ユーザーが電子メールの添付ファイルを実行することを防ぐには、電子メールの添付ファイルを実行できないように、電子メール プログラムの添付ファイルのディレクトリ パスの規則を作成できます。
> -   パスの規則の影響を受けるファイルの種類に記載されている**指定されたファイルの種類**ソフトウェア制限ポリシーの詳細ウィンドウでします。 指定されたファイルの種類のすべてのルールによって共有されている 1 つのリストがあります。
> -   ソフトウェアの制限のポリシーを有効にする、ユーザーがログオフしてからログオンし、自分のコンピューターにログオンしてポリシー設定を更新する必要があります。
> -   ポリシーの設定に複数のソフトウェアの制限のポリシー規則を適用する場合は、競合を処理するための規則の優先順位があります。

#### <a name="to-create-a-registry-path-rule"></a>レジストリ パスの規則を作成するには

1.  **開始**画面で、「regedit」ように入力します。

2.  では、規則を作成し、をクリックするレジストリ キーを右クリックし、コンソール ツリーで、**キー名のコピー**します。 詳細ウィンドウで、値の名前に注意してください。

3.  ソフトウェアの制限のポリシーを開きます。

4.  コンソール ツリーまたは詳細ウィンドウで右クリック**の追加ルール**、] をクリックし、**新しいパスの規則**します。

5.  **パス**、レジストリ キーの名前、続いて値名を貼り付けます。

6.  レジストリ パス パーセント記号 (%)、たとえば、%hkey_local_machine\software\microsoft\platformsdk\directories\installdir% で囲みます。

7.  **セキュリティ レベル**、] をクリックするか**許可しない**または**無制限**します。

8.  **説明**この規則の説明を入力し、[クリックして**OK**します。


