---
ms.assetid: 75cc1d24-fa2f-45bd-8f3b-1bbd4a1aead0
title: "クラスター対応更新の要件とベスト プラクティス"
ms.prod: windows-server-threshold
ms.topic: article
ms.manager: dongill
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 4/28/2017
description: "クラスター対応更新を使用して、Windows Server を実行しているクラスターで更新プログラムをインストールするための要件です。"
ms.openlocfilehash: 8517466d58345077af446c1b2c1e2aeb3b17aaa1
ms.sourcegitcommit: 583355400f6b0d880dc0ac6bc06f0efb50d674f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2017
---
# <a name="cluster-aware-updating-requirements-and-best-practices"></a>クラスター対応更新の要件とベスト プラクティス

>適用対象: Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

このセクションの要件とを使用するために必要な依存関係について説明[Cluster-aware Updating](cluster-aware-updating.md) Windows Server を実行しているフェールオーバー クラスターに更新プログラムを適用するには、(CAU)。
  
> [!NOTE]  
> クラスター環境が以外のプラグインを使用する場合は、更新プログラムを適用する準備があると独立して検証する必要があります**Microsoft.WindowsUpdatePlugin**します。 プラグインを以外 Microsoft を使用している場合は、詳細については、発行元にお問い合わせください。 プラグイン アドインに関する詳細については、次を参照してください。[プラグイン プラグインのしくみ](cluster-aware-updating-plug-ins.md)します。   
  
## <a name="BKMK_REQ_CLUS"></a>フェールオーバー クラスタ リング機能とフェールオーバー クラスタ リング ツールをインストールします。  
CAU には、フェールオーバー クラスタ リング機能とフェールオーバー クラスタ リング ツールのインストールが必要です。 フェールオーバー クラスタ リング ツールには、CAU ツール \(clusterawareupdating.dll\)、フェールオーバー クラスタ リング コマンドレット、CAU 操作に必要なその他のコンポーネントが含まれます。 フェールオーバー クラスタ リング機能をインストールする手順については、次を参照してください。[フェールオーバー クラスタ リング機能とツールのインストール](http://go.microsoft.com/fwlink/p/?LinkId=253342)します。  
  
フェールオーバー クラスタ リング ツールの厳密なインストール要件は、CAU がフェールオーバー クラスターでクラスター化された役割として更新プログラムを調整するかどうかによって異なります \ (を使用して自己更新 mode\) またはリモート コンピューターからです。 さらに、CAU の自己更新モードでは、CAU ツールを使用して、フェールオーバー クラスターで CAU のクラスター化された役割のインストールが必要です。    
  
次の表は、次の 2 つの CAU 更新モードの CAU 機能インストール要件をまとめたものです。  
  
|インストールされているコンポーネント|自己更新モード|Remote\ 更新モード|  
|-----------------------|-----------------------|-------------------------|  
|フェールオーバー クラスタ リング機能|すべてのクラスター ノードで必要|すべてのクラスター ノードで必要|  
|フェールオーバー クラスタ リング ツール|すべてのクラスター ノードで必要|-Remote\ 更新コンピューターで必要な<br />必要なすべてのクラスター ノードで実行する、[Save-caudebugtrace](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/save-caudebugtrace)コマンドレット|  
|CAU のクラスター化された役割|必須|必須ではありません。|  
  
## <a name="obtain-an-administrator-account"></a>管理者アカウントを取得します。  
次の管理者要件は、CAU の機能を使用する必要があります。  
  
-   プレビューまたは CAU ユーザー インターフェイスを使用して更新アクションを適用 \(UI\) またはクラスター対応更新のコマンドレットで、すべてのクラスター ノードにローカルの管理者権限とアクセス許可を持つドメイン アカウントを使用する必要があります。 場合は、アカウントは、すべてのノードに十分な特権を持っていない、これらの操作を実行する場合に必要な資格情報を提供するクラスター対応更新のウィンドウで求められます。 使用する、[Cluster-aware Updating](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating)コマンドレット、コマンドレット パラメーターとして必要な資格情報を指定することができます。  
  
-   クラスター ノードでローカル管理者権限とアクセス許可がないアカウントを使用してログインしているときに remote\ 更新モードで CAU を使用する場合する必要があります、CAU ツール管理者として実行またはを持つアカウントを使用して、Update Coordinator コンピューターでローカル管理者アカウントを使用して、**認証後にクライアントを偽装**ユーザー権限。 
  
-   CAU ベスト プラクティス アナライザーを実行するには、クラスター ノードに対して管理者特権と実行に使用されるコンピューター上のローカルの管理者特権を持つアカウントを使用する必要があります、[Test-causetup](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/test-causetup)コマンドレットに、またはクラスター更新のクラスター対応更新のウィンドウを使用して準備を分析します。 詳細については、次を参照してください。[クラスター更新の準備のテスト](#BKMK_BPA)します。  
  
## <a name="verify-the-cluster-configuration"></a>クラスター構成を確認します。  
CAU を使用して更新プログラムをサポートするために、フェールオーバー クラスターの一般的な要件を次に示します。 リモート管理のノードの追加の構成要件は、「[ノードのリモート管理を構成する](#BKMK_NODE_CONFIG)このトピックで後述します。  
  
-   十分なクラスター ノードは、クラスターがあるクォーラムをオンラインである必要があります。  
  
-   すべてのクラスター ノードが同じ Active Directory ドメインにする必要があります。  
  
-   DNS を使用してネットワーク上で、クラスター名を解決する必要があります。  
  
-   Remote\ 更新モードで CAU を使用する場合、Update Coordinator コンピューターは、フェールオーバー クラスター ノードへのネットワーク接続が必要し、フェールオーバー クラスターと同じ Active Directory ドメインにあります。  
  
-   クラスタ サービスは、すべてのクラスター ノードで実行されている必要があります。 既定では、このサービスはすべてのクラスター ノードにインストールされている場合は、自動的に開始するように構成します。  
  
-   CAU 更新実行中にファイルの更新または post\ 更新の PowerShell スクリプトを使用するには、スクリプトがすべてのクラスター ノードにインストールされているか、可用性の高いネットワーク ファイル共有ですべてのノードにアクセスできることを確認します。 スクリプトは、ネットワーク ファイル共有に保存する場合、すべてのユーザーに対する読み取りアクセス許可に対応するフォルダーを構成するグループです。  
  
## <a name="BKMK_NODE_CONFIG"></a>ノードのリモート管理を構成します。  
クラスター対応更新を使用するには、リモート管理、クラスターのすべてのノードを構成する必要があります。 既定では、タスクだけ行う必要がありますをリモート管理のノードを構成する[自動再起動を許可するファイアウォール規則を有効にする](#BKMK_FW)します。 

次の表は、場合に、既定値からお客様の環境と見なすと完全なリモート管理の要件を示します。

これらの要件は次のインストール要件に加え、[フェールオーバー クラスタ リング機能とフェールオーバー クラスタ リング ツールのインストール](#BKMK_REQ_CLUS)と一般的なクラスタ リングでは、このトピックの前のセクションで説明されている要件。  
  
|要件|既定の状態|自己更新モード|Remote\ 更新モード|  
|---------------|---|-----------------------|-------------------------|  
|[自動再起動を許可するファイアウォール規則を有効にします。](#BKMK_FW)|無効になっています。|ファイアウォールが使用されている場合は、すべてのクラスター ノードで必要|ファイアウォールが使用されている場合は、すべてのクラスター ノードで必要|  
|[Windows Management Instrumentation を有効にします。](#BKMK_WMI)|有効になっています。|すべてのクラスター ノードで必要|すべてのクラスター ノードで必要|  
|[Windows PowerShell 3.0 または 4.0 と Windows PowerShell リモート処理を有効にします。](#BKMK_PS)|有効になっています。|すべてのクラスター ノードで必要|次を実行するすべてのクラスター ノードで必要です。<br /><br />- [Save-caudebugtrace](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/save-caudebugtrace)コマンドレット<br />の更新実行中に PowerShell ファイルの更新および post\ 更新スクリプト<br />クラスター更新のクラスター対応更新のウィンドウを使用して準備のテストまたは[よう CauSetup](http://go.microsoft.com/fwlink/p/?LinkId=242384) Windows PowerShell コマンドレット|  
|[.NET Framework 4.6 または 4.5 をインストールします。](#BKMK_NET)|有効になっています。|すべてのクラスター ノードで必要|次を実行するすべてのクラスター ノードで必要です。<br /><br />- [Save-caudebugtrace](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/save-caudebugtrace)コマンドレット<br />の更新実行中に PowerShell ファイルの更新および post\ 更新スクリプト<br />クラスター更新のクラスター対応更新のウィンドウを使用して準備のテストまたは[よう CauSetup](http://go.microsoft.com/fwlink/p/?LinkId=242384) Windows PowerShell コマンドレット|  

### <a name="BKMK_FW"></a>自動再起動を許可するファイアウォール規則を有効にします。  
更新プログラムの適用後に自動再起動を許可するように \ (かどうかは、更新プログラムのインストールが必要な restart\)、次のトラフィックを許可する各ノードでファイアウォール規則を有効にする必要があります Windows ファイアウォールまたはマイクロソフト以外のファイアウォールを使用して、クラスター ノードの場合。  
  
-   プロトコル: TCP  
  
-   方向: 受信  
  
-   プログラム: wininit.exe  
  
-   ポート: RPC 動的ポート  
  
-   プロファイル: ドメイン  
  
クラスター ノードで Windows ファイアウォールを使用する場合は、これを行うを有効にして、**リモート シャット ダウン**各クラスター ノードで Windows ファイアウォール規則グループ。 ウィンドウを使用する、クラスター対応更新の更新プログラムを適用して、自己更新オプションを構成するときに、**リモート シャット ダウン**Windows ファイアウォール規則グループが各クラスター ノードで自動的に有効にします。  
  
> [!NOTE]  
> **リモート シャット ダウン**Windows ファイアウォールが構成されているグループ ポリシー設定と競合する場合、Windows ファイアウォール規則グループを有効にすることはできません。    
  
**リモート シャット ダウン**を指定してファイアウォール規則グループが有効になっても、**– EnableFirewallRules**次の CAU コマンドレットを実行している場合は、パラメーター: [Add-cauclusterrole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/add-cauclusterrole)、[Invoke-caurun](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/invoke-causcan)、および[SetCauClusterRole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/set-cauclusterrole)します。  
  
次の PowerShell の例では、クラスター ノードで自動再起動を有効にするための追加方法を示します。  
  
```PowerShell  
Set-NetFirewallRule -Group "@firewallapi.dll,-36751" -Profile Domain -Enabled true  
```  

### <a name="BKMK_WMI"></a>Windows Management Instrumentation (WMI) を有効にします。 
Windows Management Instrumentation \(WMI\) を使用したリモート管理のすべてのクラスター ノードを構成する必要があります。 これは既定で有効にします。  
  
リモート管理を手動で有効にするには、次の操作を行います。  
  
1.  サービス コンソールで、開始、**Windows リモート管理**サービス、およびスタートアップの種類を設定**自動**します。  
  
2.  実行、[Set-wsmanquickconfig](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.wsman.management/set-wsmanquickconfig)コマンドレットか、次のコマンド管理者特権のコマンドからプロンプトで実行します。  
  
    ```PowerShell  
    winrm quickconfig -q  
    ```  
  
Windows ファイアウォールが、クラスター ノードで使用される場合、WMI リモート処理をサポートする受信ファイアウォール規則を**Windows リモート管理 \(HTTP\-In\)**各ノードで有効にする必要があります。  既定では、このルールが有効にします。  
  
### <a name="BKMK_PS"></a>Windows PowerShell および Windows PowerShell リモート処理を有効にします。  
自己更新モードと remote\ 更新モードで特定の CAU 機能を有効にするには、PowerShell をインストールしてすべてのクラスター ノードでリモート コマンドを実行する有効にしてする必要があります。 既定では、PowerShell がインストールされ、リモート処理を有効にします。  
  
PowerShell リモート処理を有効にするには、次の方法のいずれかを使用します。  
  
-   実行、[Enable-psremoting](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/enable-psremoting)コマンドレット。  
  
-   Windows リモート管理 \(WinRM\) の \servername レベルのグループ ポリシー設定を構成します。  
  
詳細については、PowerShell リモート処理を有効にすると、次を参照してください。[about\_Remote\_Requirements](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_remote_requirements)します。  
  
### <a name="BKMK_NET"></a>.NET Framework 4.6 または 4.5 をインストールします。  
自己更新モードと remote\ 更新モード、.NET Framework 4.6 では、または (Windows Server 2012 R2) 上の .NET Framework 4.5 で特定の CAU 機能を有効には、すべてのクラスター ノードにインストールする必要があります。 既定では、NET Framework がインストールされています。  

まだインストールされていない場合は、PowerShell を使用して、.NET Framework 4.6 (または 4.5) をインストールするには、次のコマンドを使用します。

```PowerShell
Install-WindowsFeature -Name NET-Framework-45-Core
```

## <a name="BKMK_BEST_PRAC"></a>ベスト プラクティス クラスター対応更新を使用するための推奨事項 
  
### <a name="BKMK_BP_WUA"></a>Microsoft 更新プログラムを適用するための推奨事項

お勧め、既定の更新を適用する CAU の使用を開始するときに**Microsoft.WindowsUpdatePlugin**プラグインをクラスターで、使用を停止するその他の方法、クラスター ノードで、Microsoft からソフトウェア更新プログラムをインストールします。  
  
> [!CAUTION]  
> 個々 のノードを自動的に更新する手段と CAU を組み合わせると \ (固定されたタイム schedule\) 上のサービスと計画外のダウンタイムの中断を含め、予期しない結果になることができます。  
  
次のガイドラインに従うことをお勧めします。  
  
-   最適な結果を得るには、無効にすることの自動更新では、クラスター ノードの設定などのコントロール パネルで、またはグループ ポリシーを使用して構成されている設定では、自動更新設定をお勧めします。  
  
    > [!CAUTION]  
    > クラスター ノードで更新プログラムの自動インストールは、CAU による更新のインストールを妨げることができ、CAU にエラーが発生することができます。  
  
    必要な場合、管理者は、更新プログラムのインストールのタイミングを制御できるため、次の自動更新設定は、CAU との互換性。  
  
    -   設定とインストールの前に通知するために更新プログラムをダウンロードする前に通知するには  
  
    -   設定を自動的に更新プログラムをダウンロードして、インストール前に通知するには  
  
    ただし、自動更新が CAU 更新実行と同時に更新プログラムをダウンロードする場合、Updating Run かかる可能性がありますを完了します。  
  
-   更新プログラムを自動的に適用する Windows Server Update Services \(WSUS\) などの更新システムを構成しない \ (固定されたタイム schedule\) 上のクラスター ノードにします。  
  
-   すべてのクラスター ノードは、同じ更新元、たとえば、WSUS サーバー、Windows Update、または Microsoft Update を使用する一様に構成する必要があります。  
  
-   構成管理システムを使用して、ネットワーク上のコンピューターにソフトウェア更新プログラムを適用する場合は、すべての必須または自動更新からクラスター ノードを除外します。 構成管理システムの例には、Microsoft System Center Configuration Manager 2007 と Microsoft System Center Virtual Machine Manager 2008 が含まれます。  
  
-   場合は内部のソフトウェア配布サーバー \ (たとえば、WSUS \software\microsoft\sms\components\sms_site_component_manager\component servers \) が含まれている、更新プログラムを展開し、それらのサーバーがクラスター ノードに対して承認済み更新プログラムを正しく識別することを確認するために使用されます。  
  
#### <a name="BKMK_PROXY"></a>ブランチ オフィスのシナリオのマイクロソフト更新を適用します。  
特定の支店シナリオでのクラスター ノードに Microsoft Update または Windows Update からの Microsoft 更新プログラムをダウンロードするには、各ノードで、ローカル システム アカウントのプロキシ設定を構成する必要があります。 たとえば、支店のクラスターをローカル プロキシ サーバーを使用して更新プログラムをダウンロードするには、Microsoft Update または Windows Update にアクセスする場合に実行する必要があります。  
  
必要に応じて、ローカル プロキシ サーバーを指定して、ローカル アドレス例外を構成するには、各ノードの WinHTTP プロキシ設定を構成 \ (ローカル addresses\ 用のバイパス リスト)。 これを行うには、管理者特権のコマンド プロンプトから、各クラスター ノードで、次のコマンドを実行できます。  
  
```  
netsh winhttp set proxy <ProxyServerFQDN >:<port> "<local>"  
```  
  
ここで <*ProxyServerFQDN*> はプロキシ サーバーの完全修飾ドメイン名と <*ポート*> 経由で通信に使用するポートは、(通常はポート 443)。  
  
たとえば、プロキシ サーバーを指定する、ローカル システム アカウントの WinHTTP プロキシ設定を構成する*MyProxy.CONTOSO.com*、ポート 443 とローカル アドレス例外では、次のコマンドを入力します。  
  
```  
netsh winhttp set proxy MyProxy.CONTOSO.com:443 "<local>"  
```  
  
### <a name="BKMK_BP_HF"></a>Microsoft.HotfixPlugin の使用に関する推奨事項  
  
-   ローカル管理者はこれらのファイルを格納するために使用するコンピューターにのみへの書き込みアクセス権を制限する修正プログラム構成ファイルと修正プログラム ルート フォルダーにアクセス許可を構成することをお勧めします。 これにより、修正プログラムを適用すると、フェールオーバー クラスターの機能を損なうおそれのある承認されていないユーザーによってこれらのファイルの改ざんを防止します。  
  
-   修正プログラム ルート フォルダーのアクセスに使用されるサーバー メッセージ ブロック \(SMB\) 接続のデータの整合性を確保するために、よう構成する可能性がある場合、SMB 共有フォルダーに SMB 暗号化を構成する必要があります。 **Microsoft.HotfixPlugin**、SMB 接続のデータの整合性を確保するために SMB 署名または SMB 暗号化が構成されている必要があります。 
  
    詳細については、次を参照してください。[、修正プログラム ルート フォルダーと修正プログラム構成ファイルへのアクセスを制限](cluster-aware-updating-plug-ins.md#BKMK_ACL)します。
  
### <a name="additional-recommendations"></a>追加の推奨事項  
  
-   CAU 更新実行を同時にスケジュールすることがありますを邪魔しないように、スケジュールされたメンテナンス期間中にクラスター名オブジェクトと仮想コンピューター オブジェクトにパスワードの変更をスケジュールしないでいます。  
  
-   承認されていないユーザーによってこれらのファイルと潜在的な改ざんを防ぐためのネットワーク共有フォルダーに保存されるファイルの更新プログラムと post\ 更新プログラムのスクリプトに関する適切なアクセス許可を設定する必要があります。  
  
-   仮想コンピューター オブジェクト、自己更新モードで CAU を構成するには、Active Directory で CAU のクラスター化された役割 \(VCO\) を作成する必要があります。 CAU できますこのオブジェクトを自動的に作成時点で CAU のクラスター化された役割を追加すると、フェールオーバー クラスターに十分なアクセス許可がある場合。 ただし、一部の組織でセキュリティ ポリシーのために必要がありますを Active Directory 内のオブジェクトを事前設定します。 手順については、これを行うを参照してください。[クラスター化された役割のアカウントを事前登録するための手順](http://go.microsoft.com/fwlink/p/?LinkId=237624)します。  
  
-   保存し、フェールオーバー クラスターとの間で更新実行の設定を再利用と同様、IT 組織のニーズを更新することができます作成更新実行プロファイル。 さらに、更新モードに応じて保存でき、すべてのリモート Update Coordinator コンピューターまたはフェールオーバー クラスターにアクセスできるファイル共有に更新実行プロファイルを管理できます。 詳細については、次を参照してください。[高度なオプションとに対して CAU 更新実行プロファイル](cluster-aware-updating-options.md)します。  
  
## <a name="BKMK_BPA"></a>クラスター更新の準備のテスト  
ネットワーク環境を満たすソフトウェア更新プログラムが CAU によって適用するための要件の多くと、フェールオーバー クラスターかどうかをテストする CAU ベスト プラクティス アナライザー \(BPA\) モデルを実行できます。 プラグインを既定値を使用して Microsoft 更新プログラムを適用する準備が環境でテストの多く確認**Microsoft.WindowsUpdatePlugin**します。  
  
> [!NOTE]  
> クラスター環境が以外のプラグインを使用してソフトウェア更新プログラムを適用する準備ができていると独立して検証する必要があります**Microsoft.WindowsUpdatePlugin**します。 以外の Microsoft プラグインでは、いずれかのハードウェアの製造元によって提供されるなどを使用している場合は、詳細については、発行元にお問い合わせください。  
  
BPA は、次の 2 つの方法で実行できます。  
  
1.  選択**クラスター更新の準備の分析**CAU コンソールでします。 BPA が準備度テストを完了したら、テスト レポートが表示されます。 クラスター ノードで問題が検出された場合、具体的な問題と問題が表示されるノードは識別ので是正措置を取ることです。 テストを完了するまでに数分がかかります。  
  
2.  実行、[Test-causetup](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/test-causetup)コマンドレット。 コマンドレットは、フェールオーバー クラスタ リングの Windows PowerShell モジュール (フェールオーバー クラスタ リング ツールの一部) がインストールされているローカルまたはリモート コンピューターで実行できます。 フェールオーバー クラスターのノードでコマンドレットを実行することもできます。  
  
> [!NOTE]  
> -   クラスター ノードに対して管理者特権と実行に使用されるコンピューター上のローカルの管理者特権を持つアカウントを使用する必要があります、**よう CauSetup**コマンドレットに、またはクラスター更新のクラスター対応更新のウィンドウを使用して準備を分析します。 クラスター対応更新のウィンドウを使用してテストを実行するには、必要な資格情報でコンピューターにログオンする必要があります。  
> -   テストでは、プレビューし、ソフトウェア更新プログラムを適用するために使用される CAU ツールは、実行する同じコンピューターから同じユーザー資格情報を持つクラスター更新の準備をテストするために使用されるものとします。  
  
> [!IMPORTANT]  
> 更新の準備は、次の状況でのクラスターをテストすることを強くお勧めします。  
>   
> -   ソフトウェア更新プログラムを適用するのにため、初めて CAU を使用する前にします。  
> -   クラスターにノードを追加した後、またはクラスター ウィザードの検証を実行する必要がクラスター内の他のハードウェアの変更を実行します。  
> -   更新元を変更または更新の設定や構成を変更した後 \(other than CAU\)、ノード上で更新プログラムのアプリケーションに影響することができます。  
  
### <a name="tests-for-cluster-updating-readiness"></a>クラスター更新の準備のテスト  
次の表は、クラスターの準備のテスト、一般的な問題と解決手順を更新します。  
  
|テスト|考えられる問題と影響|解決手順|  
|--------|-------------------------------|--------------------|  
|フェールオーバー クラスターを使用する必要があります。|フェールオーバー クラスター名または 1 つまたは複数のクラスター ノードにアクセスできませんを解決できません。 BPA は、クラスターの準備のテストを実行できません。|-BPA 実行中に指定したクラスターの名前の綴りを確認します。<br />-クラスターのすべてのノードがオンラインで、実行中であることを確認します。<br />-ことの検証の構成ウィザードを正常に実行、フェールオーバー クラスターで確認します。|  
|WMI 経由でリモート管理のため、フェールオーバー クラスター ノードを有効にする必要があります。|Windows Management Instrumentation \(WMI\) を使用して、1 つまたは複数のフェールオーバー クラスター ノードはリモート管理を有効になりません。 リモート管理のノードが構成されていない場合、CAU はクラスター ノードを更新できません。|すべてのフェールオーバー クラスター ノードが WMI 経由のリモート管理を有効になっていることを確認します。 詳細については、次を参照してください。[ノードのリモート管理を構成する](#BKMK_NODE_CONFIG)このトピックの「します。|  
|各フェールオーバー クラスター ノードで、PowerShell リモート処理を有効にする必要があります。|PowerShell がインストールされていないか、1 つまたは複数のフェールオーバー クラスター ノードでリモート処理が有効になっています。 CAU は、自己更新モードを構成できないか、remote\ 更新モードで特定の機能を使用します。|PowerShell がすべてのクラスター ノードにインストールされて、リモート処理が有効になっていることを確認します。<br /><br />詳細については、次を参照してください。[ノードのリモート管理を構成する](#BKMK_NODE_CONFIG)このトピックの「します。|  
|フェールオーバー クラスター バージョン|フェールオーバー クラスター内の 1 つまたは複数のノードには、Windows Server 2016、Windows Server 2012 R2、または Windows Server 2012 を実行しないでください。 CAU は、フェールオーバー クラスターを更新できません。|Windows Server 2016、Windows Server 2012 R2、または Windows Server 2012 BPA 実行中に指定されているフェールオーバー クラスターが実行されていることを確認します。<br /><br />詳細については、次を参照してください。[クラスター構成の検証](#BKMK_REQ_CLUS)このトピックの「します。|  
|すべてのフェールオーバー クラスター ノードで、必要なバージョンの .NET Framework と Windows PowerShell をインストールする必要があります。|.NET framework 4.6、4.5 または Windows PowerShell は、1 つまたは複数のクラスター ノードにインストールされていません。 一部の CAU 機能が動作しない可能性があります。|必要な場合は、すべてのクラスター ノードに .NET Framework 4.6 または 4.5 と Windows PowerShell がインストールされていることを確認します。<br /><br />詳細については、次を参照してください。[ノードのリモート管理を構成する](#BKMK_NODE_CONFIG)このトピックの「します。|  
|すべてのクラスター ノードでクラスタ サービスが実行されている必要があります。|1 つまたは複数のノードでは、クラスタ サービスが実行されていません。 CAU は、フェールオーバー クラスターを更新できません。|クラスター内のすべてのノード クラスター サービス \(clussvc\) は開始され、自動的に開始することが構成されていることを確認します。<br />-ことの検証の構成ウィザードを正常に実行、フェールオーバー クラスターで確認します。<br /><br />詳細については、次を参照してください。[クラスター構成の検証](#BKMK_REQ_CLUS)このトピックの「します。|  
|自動更新が自動的に任意のフェールオーバー クラスター ノードで更新プログラムをインストールする構成されていない必要があります。|少なくとも 1 つのフェールオーバー クラスター ノードにそのノード上の Microsoft 更新プログラムを自動的にインストールする自動更新を設定します。 その他の更新方法と CAU を組み合わせるが計画外のダウンタイムまたは予測できない結果あります。|Windows Update の機能が 1 つまたは複数のクラスター ノードで、自動更新の構成されている場合は、自動的に更新プログラムをインストールする自動更新が構成されていないことを確認します。<br /><br />詳細については、次を参照してください。[Microsoft 更新プログラムを適用するための推奨事項](#BKMK_BP_WUA)します。|  
|フェールオーバー クラスター ノードが同じ更新元を使用する必要があります。|1 つまたは複数のフェールオーバー クラスター ノードは、更新元を使用して、残りのノードとは異なる Microsoft 更新プログラム用に構成されます。 更新プログラム可能性があります適用されません一様に、クラスター ノードに CAU でします。|すべてのクラスター ノードが同じ更新元をなど、WSUS サーバー、Windows Update、または Microsoft Update を使用する構成されていることを確認します。<br /><br />詳細については、次を参照してください。[Microsoft 更新プログラムを適用するための推奨事項](#BKMK_BP_WUA)します。|  
|フェールオーバー クラスター内の各ノードでリモート シャット ダウンを許可するファイアウォール規則を有効にする必要があります。|1 つまたは複数のフェールオーバー クラスター ノードには、リモート シャット ダウンを許可するファイアウォール規則を有効になっているはありません。または、グループ ポリシー設定が有効になってからこのルールをできないようにします。 更新実行のノードを自動的に再起動が必要な更新プログラムを適用することがあります正しく完了していません。|Windows ファイアウォールまたはマイクロソフト以外のファイアウォールを使用して、クラスター ノードの場合は、リモート シャット ダウンを許可するファイアウォール規則を構成します。<br /><br />詳細については、次を参照してください。[自動再起動を許可するファイアウォール規則を有効にする](#BKMK_FW)このトピックの「します。|  
|各フェールオーバー クラスター ノードでプロキシ サーバー設定をローカル プロキシ サーバーを設定する必要があります。|1 つまたは複数のフェールオーバー クラスター ノードでは、正しくないプロキシ サーバーの構成があります。<br /><br />ローカル プロキシ サーバーが使用中の場合は、Microsoft Update または Windows Update にアクセスするクラスターの各ノードでプロキシ サーバー設定を正しく構成しなければなりません。|各クラスター ノードの WinHTTP プロキシ設定が設定されているローカル プロキシ サーバーに必要な場合を確認します。 プロキシ サーバーが環境内で使用されていない場合は、この警告は無視することができます。<br /><br />詳細については、次を参照してください。[ブランチ オフィスのシナリオで更新プログラムを適用](#BKMK_PROXY)このトピックの「します。|  
|自己更新モードを有効にするフェールオーバー クラスターに CAU のクラスター化された役割をインストールします。|このフェールオーバー クラスターには、CAU のクラスター化された役割がインストールされていません。 この役割は、クラスターの自己更新に必要です。|CAU を自己更新モードを使うには次の方法のいずれかで、フェールオーバー クラスターで CAU のクラスター化された役割を追加します。<br /><br />-実行、[Add-cauclusterrole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/add-cauclusterrole) PowerShell コマンドレット。<br />-[、**クラスターの自己更新オプションを構成する**クラスター対応更新のウィンドウで操作します。|  
|CAU のクラスター化された役割を有効にするフェールオーバー クラスターの自己更新モードを有効にするには|CAU のクラスター化された役割を無効になります。 たとえば、CAU のクラスター化された役割がインストールされていないかを使用して無効になって、[次のよう CauClusterRole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/disable-cauclusterrole) PowerShell コマンドレット。 この役割は、クラスターの自己更新に必要です。|CAU を自己更新モードを使うには、次の方法のいずれかでこのフェールオーバー クラスターに CAU のクラスター化された役割を有効にします。<br /><br />-実行、[Enable-cauclusterrole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/enable-cauclusterrole) PowerShell コマンドレット。<br />-[、**クラスターの自己更新オプションを構成する**クラスター対応更新のウィンドウで操作します。|  
|構成された CAU プラグインを自己更新モードは、すべてのフェールオーバー クラスター ノードで登録する必要があります。|このフェールオーバー クラスターの 1 つまたは複数のノードに、CAU のクラスター化された役割は、自己更新オプションで構成されている CAU プラグインをモジュールにアクセスできません。 自己更新の実行が失敗する可能性があります。|-をプラグインを CAU を提供する製品のインストール手順に従って、構成された CAU プラグインのすべてのクラスター ノードがインストールされていることを確認します。<br />-実行、[お CauPlugin](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/register-cauplugin) PowerShell コマンドレットを必要なクラスター ノードでプラグインを登録します。|  
|すべてのフェールオーバー クラスター ノードが登録されている CAU プラグインを同じセットを持つ必要があります。|プラグインには、更新実行で使用するように構成がないすべてのクラスター ノードで利用できるいずれかに変更された場合、自己更新の実行が失敗します。|-をプラグインを CAU を提供する製品のインストール手順に従って、構成された CAU プラグインのすべてのクラスター ノードがインストールされていることを確認します。<br />-実行、[お CauPlugin](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/register-cauplugin) PowerShell コマンドレットを必要なクラスター ノードでプラグインを登録します。|  
|構成済みの更新実行オプションを有効にする必要があります。|自己更新スケジュールおよびこのフェールオーバー クラスター用に構成されている更新実行オプションが不完全か、有効ではありません。 自己更新の実行が失敗する可能性があります。|有効な自己更新スケジュールと一連の更新実行オプションを構成します。 たとえば、使用することができます、[になって CauClusterRole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/set-cauclusterrole)クラスター化された役割の PowerShell コマンドレット、CAU を構成します。|  
|少なくとも 2 つのフェールオーバー クラスター ノードは、CAU のクラスター化された役割の所有者である必要があります。|CAU のクラスター化された役割には、可能な所有者ノードに移動するのにはいないために、更新実行自己更新モードで起動に失敗します。|フェールオーバー クラスタ リング ツールを使用して、実行可能な所有者、CAU のクラスター化された役割と、すべてのクラスター ノードが構成されていることを確認します。 これは、既定の構成です。||  
|すべてのフェールオーバー クラスター ノードは、Windows PowerShell スクリプトにアクセスできる必要があります。|CAU のクラスター化された役割のすべての所有者候補ノードは、構成済みの Windows PowerShell ファイル更新および post\ 更新スクリプトにアクセスできます。 自己更新の実行は失敗します。|CAU のクラスター化された役割のすべての実行可能な所有者ノードに構成されている PowerShell ファイル更新および post\ 更新スクリプトにアクセスする権限があることを確認します。|  
|すべてのフェールオーバー クラスター ノードと同じ Windows PowerShell スクリプトを使用する必要があります。|CAU のクラスター化された役割のすべての実行可能な所有者ノードでは、指定された Windows PowerShell のファイルの更新および post\ 更新スクリプトの同じコピーを使用します。 自己更新実行は失敗する可能性があります。または予期しない動作を表示します。|CAU のクラスター化された役割のすべての実行可能な所有者ノードが同じ PowerShell ファイル更新および post\ 更新スクリプトを使用することを確認します。|  
|更新実行に対して指定した WarnAfter 設定には、StopAfter 設定よりも小さくする必要があります。|指定した CAU 更新実行タイムアウト値は、非効率的なは警告タイムアウトを確認します。 警告イベント ログが生成される前に、更新実行をキャンセル可能性があります。|更新実行オプションで、構成、**WarnAfter**オプションの値であるより小さい**StopAfter**オプションの値。|  
  
## <a name="see-also"></a>参照してください。  
  
-   [クラスター対応更新の概要](cluster-aware-updating.md)
  
