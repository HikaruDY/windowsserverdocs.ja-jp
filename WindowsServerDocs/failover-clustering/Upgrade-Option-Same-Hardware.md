---
title: 同じハードウェアを使用して、フェールオーバー クラスターをアップグレードします。
ms.prod: windows-server-threshold
ms.manager: eldenc
ms.technology: failover-clustering
ms.topic: article
author: johnmarlin-msft
ms.date: 02/28/2019
description: この記事では、同じハードウェアを使用して 2 ノードのフェールオーバー クラスターのアップグレードについて説明します。
ms.localizationpriority: medium
ms.openlocfilehash: 0bfeb05c8cbc205745dc16bc7ef04052481668ea
ms.sourcegitcommit: 2c2027b597e2483eea8967d0710d65c2247b6751
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/01/2019
ms.locfileid: "9121305"
---
# 同じハードウェア上にフェールオーバー クラスターをアップグレードします。

> 適用対象: Windows Server 2019、Windows Server 2016

フェールオーバー クラスターは、アプリケーションとサービスの可用性を向上させるのには、連携する独立したコンピューターのグループです。 クラスター サーバー (ノード) は、物理ケーブルとソフトウェアにより接続されます。 クラスター ノードのいずれかが失敗した場合は、サービス (フェールオーバーと呼ばれるプロセス) を提供する別のノードが開始されます。 サービスの中断の最小値をユーザーに発生します。

このガイドでは、同じハードウェアを使用して、以前のバージョンから Windows Server 2019 または Windows Server 2016 に、クラスター ノードをアップグレードするための手順について説明します。

## 概要

既存のフェールオーバーのオペレーティング システムをアップグレードするクラスターがときにのみサポート Windows 2019 に Windows Server 2016 から移動します。  フェールオーバー クラスターが以前のバージョンを実行している場合は、ノードを結合など Windows Server 2012 R2 と以前では、クラスター サービスが実行中のアップグレードはできません。  同じハードウェアを使用している場合、新しいバージョンを入手する手順を実行できます。  

フェールオーバー クラスターのアップグレードする前に、 [Windows のアップグレード センター](https://www.microsoft.com/upgradecenter)を参照してください。  Windows Server では、インプレース アップグレードするより新しいリリースに移る同じハードウェア上に既存のオペレーティング システム リリースから移動します。 Windows Server には、アップグレード後、インプレース、少なくとも 1 つとも 2 つのバージョン転送ができます。 たとえば、Windows Server 2012 R2 および Windows Server 2016 にアップグレードできる Windows Server 2019 にインプレースします。  また、[クラスター移行ウィザード](https://blogs.msdn.microsoft.com/clustering/2012/06/25/how-to-move-highly-available-clustered-vms-to-windows-server-2012-with-the-cluster-migration-wizard/)が使用できますが、2 つのバージョンに戻すまでのサポートのみがあることに注意してください。 次の図は、Windows Server のアップグレード パスを示しています。 ポインティング下向きの矢印では、以前のバージョンの Windows Server 2019 までからの移行、サポートされているアップグレード パスを表しています。

![インプレース アップグレードの図](media\In-Place-Upgrade\In-Place-Upgrade-1.png)

次の手順では、Windows Server 2012 フェールオーバー クラスター サーバーから同じハードウェアを使用して Windows Server 2019 に移動の例があります。  

アップグレードを始める前に確認してくださいシステムの状態を含む、現在のバックアップを完了します。  使用する場合は、オペレーティング システムの認定レベルにすべてのドライバーとファームウェアが更新されたことを確認します。  これら 2 つのメモをここで取り上げていないされます。

次の例では、フェールオーバー クラスターの名前は、クラスターし、ノードの名前は、ノード 1 と node 2 します。

## 手順 1: は、最初のノードを削除し、Windows Server 2016 へのアップグレード

1. フェールオーバー クラスター マネージャーでは、すべてのリソース ノード 1 から node 2 ノードをクリックすると、**一時停止**と**ドレイン ロール**を選択し、適切なマウスによるをドレインします。  または、[中断 CLUSTERNODE](https://docs.microsoft.com/powershell/module/failoverclusters/suspend-clusternode)の PowerShell コマンドを使用することができます。

    ![ノードをドレインします。](media\In-Place-Upgrade\In-Place-Upgrade-2.png)

2. マウスの右ノードをクリックして、**他の操作**と**削除**の選択をクラスターからノード 1 を削除します。  または、 [REMOVE-CLUSTERNODE](https://docs.microsoft.com/powershell/module/failoverclusters/remove-clusternode)の PowerShell コマンドを使用することができます。

    ![ノードをドレインします。](media\In-Place-Upgrade\In-Place-Upgrade-3.png)

3. 安全のため、ノード 1 を使用している記憶域からデタッチします。  場合によっては、記憶域のケーブルを切断する、コンピューターからは十分です。  必要な場合に、適切な分隊手順については、ストレージ ベンダーに問い合わせます。  によっては、記憶域では、これは必要ありません。

4. Windows server 2016 ノード 1 をリビルドします。  すべての必要な役割、機能、ドライバーおよびセキュリティ更新プログラムを追加したことを確認します。

5. ノード 1 と CLUSTER1 と呼ばれる新しいクラスターを作成します。  フェールオーバー クラスター マネージャーを開くし、**管理**のウィンドウで、**クラスターの作成**を選択ウィザードの指示に従ってください。

    ![ノードをドレインします。](media\In-Place-Upgrade\In-Place-Upgrade-4.png)

6. クラスターが作成されたら、ロールは、元のクラスターからこの新しいクラスターに移行する必要があります。  新しいクラスター、クラスター名 (CLUSTER1) と選択の**他の操作**と**コピー クラスターの役割**をマウスの右クリックします。  ロールを移行するウィザードでは、に従ってください。

    ![ノードをドレインします。](media\In-Place-Upgrade\In-Place-Upgrade-5.png)

7.  すべてのリソースを移行した後の電源を切り node 2 (元のクラスター) と切断の記憶域を高め、任意の干渉は発生しません。  ノード 1 に、記憶域を接続します。  すべてが接続されているし、すべてのリソースをオンラインにする必要があります機能を確認します。

## 手順 2: Windows Server 2019 に 2 番目のノードを再構築します。

どおりにすべての情報が動作していることを確認 node 2 を Windows Server 2019 を再構築およびクラスターに参加していることができます。

1. Node 2 では、Windows Server 2019 のクリーン インストールを実行します。 すべての必要な役割、機能、ドライバーおよびセキュリティ更新プログラムを追加したことを確認します。

2. これで、元のクラスター (クラスター) が削除されている CLUSTER1 として新しいクラスター名のままに、元の名前に戻るしたりできます。  元の名前に戻す場合は、次の手順に従います。
   
   a.  ノード 1 でマウスの右フェールオーバー クラスター マネージャーでクラスター (CLUSTER1) の名前をクリックし、**プロパティ**を選択します。
   
   b.  [**全般**] タブには、クラスターにクラスターを変更します。

   c. [Ok] または [適用] を選択すると表示されます、ダイアログのポップアップ以下。

    ![ノードをドレインします。](media\In-Place-Upgrade\In-Place-Upgrade-6.png)

    d. クラスター サービスは停止し、完了する名前の変更をもう一度開始するために必要なします。

3. ノード 1、フェールオーバー クラスター マネージャーを開きます。  マウスの右では、**ノード**をクリックし、**ノードの追加**を選択します。  クラスターへの node 2 の追加ウィザードで移動します。

4. Node 2 には、記憶域をアタッチします。 これには、記憶域のケーブルを再接続することが含まれます。 

5. すべてのリソース ノード 1 から node 2 ノードをクリックすると、**一時停止**と**ドレイン ロール**を選択し、適切なマウスによるをドレインします。  または、[中断 CLUSTERNODE](https://docs.microsoft.com/powershell/module/failoverclusters/suspend-clusternode)の PowerShell コマンドを使用することができます。  すべてのリソースがオンラインにする必要があります機能を確認します。

## 手順 3: Windows Server 2019 する最初のノードを再構築します。

1. クラスターからノード 1 を削除し、ノードからの方法でから記憶域を切断する、以前します。

2. 再構築または Windows Server 2019 にノード 1 をアップグレードします。  すべての必要な役割、機能、ドライバーおよびセキュリティ更新プログラムを追加したことを確認します。

3. 記憶域を再アタッチし、ノード 1 をクラスターに追加します。

4. すべてのリソースをノード 1 に移動し、オンラインし、必要に応じて、機能を確認します。

5. 現在のクラスターの機能レベルは、Windows 2016 のままです。  機能レベルを[UPDATE-CLUSTERFUNCTIONALLEVEL](https://docs.microsoft.com/powershell/module/failoverclusters/update-clusterfunctionallevel)PowerShell コマンドを使用して Windows 2019 に更新します。

完全に機能の Windows Server 2019 のフェールオーバー クラスターで実行しているようになりました。

## 追加説明

- 前述のように、記憶域を切断することがあります。 または必要ありません。  このドキュメントで注意の側面にあるエラーにします。  記憶域のベンダーに問い合わせてください。
- 場合は、開始点は、Windows Server 2008 または 2008 R2 クラスターには、手順で追加の実行が必要です。
- クラスターが仮想マシンを実行している場合は、[更新 VMVERSION](https://docs.microsoft.com/powershell/module/hyper-v/update-vmversion)PowerShell コマンドを使用して、クラスターの機能レベルが完了したら、仮想マシンのレベルをアップグレードすることを確認します。
- ある SQL Server、Exchange サーバーなどのアプリケーションを実行している場合、アプリケーションは移行されませんコピー クラスターの役割ウィザードを使ってに注意してください。  アプリケーションの適切な移行手順については、アプリケーションの製造元に問い合わせてください。