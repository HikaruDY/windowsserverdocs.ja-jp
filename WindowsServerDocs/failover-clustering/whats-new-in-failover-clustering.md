---
ms.assetid: 350aa5a3-5938-4921-93dc-289660f26bad
title: Windows Server フェールオーバー クラスタ リングの新します。
ms.prod: windows-server-threshold
ms.technology: storage-failover-clustering
ms.topic: get-started-article
manager: dongill
author: JasonGerend
ms.author: jgerend
ms.date: 10/18/2018
ms.openlocfilehash: 330f65721fca1908ac54ddfd194f96ffe540f1b5
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/31/2019
ms.locfileid: "66442362"
---
# <a name="whats-new-in-failover-clustering"></a>フェールオーバー クラスタリングの新機能

> 適用対象:Windows Server 2019、Windows Server 2016

このトピックでは、フェールオーバー クラスタ リングの Windows Server 2019 および Windows Server 2016 の新しいおよび変更された機能について説明します。

## <a name="whats-new-in-windows-server-2019"></a>Windows Server 2019 の新機能

- **クラスター セット**

    クラスターのセットを使用すると、クラスターの現在の制限を超える単一ソフトウェア定義のデータ センター (SDDC) ソリューションのサーバーの数を増やすことができます。 これは、クラスター set - 複数のフェールオーバー クラスターの疎結合のグループに複数のクラスターにグループ化によって実現されます: コンピューティング、ストレージおよびハイパー コンバージドの両方します。
    クラスターのセットでは、オンラインの仮想マシンを移動できます (ライブ マイグレーション)、クラスター内のクラスター間で設定します。

    詳細については、次を参照してください。[セット](../storage/storage-spaces/cluster-sets.md)します。

- **Azure 対応のクラスター**

    フェールオーバー クラスター今すぐ自動的に検出プロアクティブなフェールオーバーと、最高レベルの可用性を実現するために Azure の計画済みメンテナンス イベントのログ記録を提供する構成を最適化し、Azure IaaS 仮想マシンで実行されています。 動的のネットワーク名をクラスター名と、ロード バランサーを構成する必要がなくなる展開も簡単になります。

- **クロス ドメインのクラスターの移行**

    フェールオーバー クラスターに動的に移動できます 1 つの Active Directory ドメインから別、ドメインの統合を簡略化し、クラスターにハードウェア パートナーによって作成され、後で、顧客のドメインに参加していることができます。
- **USB のミラーリング監視サーバー**

    クラスターのクォーラムの判断でミラーリング監視サーバーとして、ネットワーク スイッチに接続されている単純な USB ドライブを使用できます。 これは、SMB2 準拠デバイスをサポートするファイル共有監視を拡張します。

- **クラスター インフラストラクチャの機能強化**

    仮想マシンのパフォーマンスを向上させる既定では、CSV キャッシュが有効になりました。 MSDTC では、クラスター共有ボリュームがサポートされるようになりました。これにより、SQL Server の使用など、MSDTC のワークロードを記憶域スペース ダイレクトに展開できます。 ロジックが強化され、パーティション分割されたノードを検出して、自動修復でノードをクラスター メンバーシップに戻すことができるようになりました。 クラスター ネットワーク ルート検出と自動修復機能が強化されています。

- **記憶域スペース ダイレクト クラスター対応更新のサポートします。**

    クラスター対応更新 (CAU) が記憶域スペース ダイレクトに対応して統合され、データ再同期の検証と確認が各ノードで完了するようになりました。 クラスター対応更新を必要な場合にのみをインテリジェントに再起動する更新プログラムを検査します。 これにより、計画済みメンテナンスのためにクラスター内のすべてのサーバーの再起動を統制することができます。

- **ファイル共有のミラーリング監視サーバーの機能強化**次のシナリオでのファイル共有監視の使用を有効になっています。 
  - 存在しない場合、または非常に悪くなり、リモートの場所、クラウドのミラーリング監視サーバーの使用が妨げられるためインターネット アクセス。 
  - ディスクのミラーリング監視サーバーの共有ドライブの欠如。 これは、記憶域スペース ダイレクト ハイパーコンバージド構成を SQL Server 常に 可用性グループ (AG)、または * Exchange データベース可用性グループ (DAG)、共有ディスクを使用して、どれもします。 
  - DMZ の背後にあるされているクラスターのためのドメイン コント ローラー接続がないです。 
  - ワークグループまたはドメイン間は、クラスターがありますには、Active Directory クラスター名オブジェクト (CNO) はありません。 次のサーバーと管理のブログの投稿でこれらの拡張機能の詳細を確認します。ファイル共有監視のフェールオーバー クラスターおよび DFS します。
    
    今すぐも明示的にブロック DFS 名前空間の共有の場所として使用。 ファイル共有監視を追加して、DFS を共有、クラスターの安定性の問題が発生することができます、この構成はサポートされていることはありません。 フェールオーバー クラスター マネージャーがミラーリング監視サーバーの作成をブロックして、サポートされていないことに関するエラー メッセージが表示されます DFS 名前空間が検出された場合、共有は、DFS 名前空間を使用して、場合を検出するロジックを追加しました。
- **クラスターのセキュリティ強化**

    サーバー メッセージ ブロック (SMB) を使用した、クラスター共有ボリュームと記憶域スペース ダイレクトに対するクラスター内通信では、証明書を活用して最も安全なプラットフォームが提供されるようになりました。 これにより、フェールオーバー クラスターが依存関係なしで NTLM で動作し、セキュリティ ベースラインが有効になります。
- **フェールオーバー クラスターが不要になった NTLM 認証を使用します。**

    フェールオーバー クラスターは、NTLM 認証を使用できません。 代わりに Kerberos と証明書ベースの認証が使用専用。 このセキュリティ拡張機能を活用するために、ユーザー、または、展開ツールが必要な変更はありません。 また、フェールオーバー クラスターに NTLM が無効にされている環境に展開することもできます。 


## <a name="whats-new-in-windows-server-2016"></a>新機能 Windows Server 2016 の新機能

### <a name="BKMK_RollingUpgrade"></a>クラスター オペレーティング システムのローリング アップグレード

クラスター オペレーティング システムのローリング アップグレードすると、管理者は、HYPER-V やスケール アウト ファイル サーバーのワークロードを停止することがなく、クラスター ノードのオペレーティング システムを Windows Server 2012 R2 から、新しいバージョンにアップグレードするができます。 この機能を使用すると、サービス レベル アグリーメント (SLA) でのダウンタイムに対するペナルティを回避できます。 

**この変更の利点**  

Windows Server 2012 R2 から、HYPER-V またはスケール アウト ファイル サーバー クラスターを不要になった Windows Server 2016 にアップグレードしますと、ダウンタイムが必要です。 クラスターは引き続き Windows Server 2016 を実行しているすべてのクラスターのノードまで、Windows Server 2012 R2 レベルで機能します。 Windows PowerShell コマンドレットを使用して、クラスターの機能レベルは Windows Server 2016 にアップグレードされます`Update-ClusterFunctionalLevel`します。 

> [!WARNING]  
> -   クラスターの機能レベルを更新した後は、Windows Server 2012 R2 クラスターの機能レベルに戻ることはできません。 
> -   まで、`Update-ClusterFunctionalLevel`コマンドレットを実行し、プロセスは元に戻すことは、および Windows Server 2012 R2 ノードを追加することができ、Windows Server 2016 ノードを削除することができます。 

**動作の相違点**  

HYPER-V またはスケール アウト ファイル サーバーのフェールオーバー クラスターでは、今すぐ簡単にアップグレードできる、ダウンタイムなしまたは Windows Server 2016 オペレーティング システムを実行しているノードで新しいクラスターを作成する必要があります。 Windows Server 2012 R2 へ移行するクラスターには、既存のクラスターをオフラインし各ノードの場合は、新しいオペレーティング システムを再インストールし、クラスターをオンラインに戻すが含まれています。 古いプロセスが煩雑で必要なダウンタイム。 ただし、Windows Server 2016 で、クラスターは必要はありません、任意の時点でオフラインにします。 

クラスターのオペレーティング システムのアップグレードのフェーズでは、クラスター内の各ノードのような。  
-   ノードが一時停止しているし、上で実行されているすべての仮想マシンのドレインされます。 
-   仮想マシン (またはその他のクラスターのワークロード) は、クラスター内の別のノードに移行されます。 
-   既存のオペレーティング システムが削除され、ノードで Windows Server 2016 オペレーティング システムのクリーン インストールを実行します。 
-   Windows Server 2016 オペレーティング システムを実行しているノードがクラスターに追加されます。 
-   この時点では、クラスターと呼ばれます混在モードで実行されているクラスター ノードは、Windows Server 2012 R2 または Windows Server 2016 のいずれかに実行しているためです。 
-   クラスターの機能レベルは、Windows Server 2012 R2 に保持します。 この機能のレベルで、オペレーティング システムの以前のバージョンとの互換性に影響する Windows Server 2016 の新機能はできなくなります。 
-   最終的には、すべてのノードは、Windows Server 2016 にアップグレードされます。 
-   クラスターの機能レベルが Windows PowerShell コマンドレットを使用して Windows Server 2016 に変更し、`Update-ClusterFunctionalLevel`します。 この時点での Windows Server 2016 の機能を実行できます。 

詳細については、次を参照してください。[クラスター オペレーティング システムのローリング アップグレード](cluster-operating-system-rolling-upgrade.md)します。 

### <a name="BKMK_SR"></a>記憶域レプリカ  
記憶域レプリカは記憶域にとらわれないをできるようにする新しい機能、サーバーまたはサイト間のフェールオーバー クラスターの拡大に加えて、ディザスター リカバリーのクラスター間でのブロック レベルの同期レプリケーションです。 同期レプリケーションは、クラッシュ前後の整合性が維持されるボリュームを使用した物理サイト内のデータのミラーリングを実現して、ファイル システム レベルでデータがまったく失われないようにします。 非同期レプリケーションでは、データが失われる可能性はありますが、大都市圏の範囲を超えてサイトを拡張できます。 

**この変更の利点**  

記憶域レプリカでは、次の操作を行うことができます。  

-   ミッション クリティカルなワークロードの計画的な停止および想定外の停止のために単一ベンダー障害回復ソリューションを提供する。 

-   信頼性、スケーラビリティ、パフォーマンスの点で実証済みの SMB3 トランスポートを使用する。 

-   大都市圏の距離まで Windows フェールオーバー クラスターを拡大する。 

-   記憶域とクラスタ リング、HYPER-V、記憶域レプリカ、記憶域スペース、クラスター、スケール アウト ファイル サーバー、SMB3、データ重複除去、REFS/NTFS などのエンド ツー エンドの Microsoft ソフトウェアを使用します。 

-   次のように、コストと複雑さの軽減に役立てる。  

    -   ハードウェアに依存せず、DAS、SAN などの特定の記憶域構成が不要です。 

    -   汎用的な記憶域やネットワーク テクノロジを使用できます。 

    -   フェールオーバー クラスター マネージャーを通じて個々のノードとクラスターをグラフィカルに簡単に管理できます。 

    -   Windows PowerShell を使った包括的な大規模なスクリプト作成オプションを組み込みます。 

-   ダウンタイムを短縮し、Windows に備わっている信頼性と生産性の向上に役立てる。 

-   サポート性、パフォーマンス メトリック、および診断機能を提供する。 

詳細については、[Windows Server 2016 での記憶域レプリカ](../storage/storage-replica/storage-replica-overview.md)に関する記事を参照してください。 


### <a name="BKMK_CloudWitness"></a>クラウド監視  
クラウド監視は、Windows Server 2016 の新しい種類のフェールオーバー クラスター クォーラム監視で、Microsoft Azure が判別ポイントとして利用されます。 クラウド監視は、他のクォーラム監視と同様、票を集めるため、クォーラム計算に参加できます。 クラウド監視をクォーラム監視として構成するには、クラスター クォーラムの構成ウィザードを使用します。 

**この変更の利点**  

クラウド監視を使用して、フェールオーバー クラスターとしてクォーラム監視は、次の利点を提供します。  

-   Microsoft Azure を活用し、3 番目の個別のデータ センターの必要性を排除します。 

-   標準的な公開されている Microsoft Azure Blob Storage がパブリック クラウドでホストされている Vm の余分なメンテナンスのオーバーヘッドがなくなりますを使用します。 

-   同じ Microsoft Azure ストレージ アカウントは、複数のクラスター (クラスターごとに 1 つの blob ファイルは blob ファイル名として使用されるクラスターの一意の id) で使用できます。 

-   ストレージ アカウント (非常に小さいデータ blob ファイルには、クラスター ノードの状態が変更されたときに 1 回だけが更新された blob のファイルあたりの書き込み) に非常に低い継続コストを提供します。 

詳細については、次を参照してください。[クラウド ミラーリング監視サーバーを、フェールオーバー クラスターを展開](deploy-cloud-witness.md)します。 

**動作の相違点**  

この機能は Windows Server 2016 での新規です。 

### <a name="BKMK_VMs"></a>仮想マシンの回復性  
**回復性を計算**Windows Server 2016 には、次のように、計算クラスターでクラスター内の通信の問題を減らすためにコンピューティングの回復性向上の仮想マシンにはが含まれています。 

-   **仮想マシンの使用可能な回復性オプション:** 一時的な障害の発生時に仮想マシンの動作を定義する仮想マシンの回復性のオプションを構成できます。  

    -   **回復性のレベル:** 一時的な障害の処理方法を定義できます。 

    -   **回復性の期間:** 独立して実行するすべての仮想マシンを許可する長さを定義できます。 

-   **異常なノードの検疫:** 異常なノードは検疫し、クラスターへの参加は許可されません。 します。 これはフラッピング ノードが他のノードとクラスター全体に悪影響を及ぼす影響することを防ぎます。 

詳細については仮想マシン コンピューティングの回復性ワークフローおよびノード検疫の設定、ノードを分離または検疫に配置する方法を制御する、次を参照してください。[仮想マシンで Windows Server 2016 コンピューティング回復性](http://blogs.msdn.com/b/clustering/archive/2015/06/03/10619308.aspx)します。 

**記憶域の回復性**で Windows Server 2016 では、仮想マシンは一時的なストレージ障害に対する回復性が向上します。 強化された仮想マシンの回復性は、記憶域の中断が発生した場合のテナント仮想マシン セッションの状態を保持するのに役立ちます。 これは、ストレージ インフラストラクチャの問題への仮想マシンのインテリジェントでクイック応答によって実現されます。 

仮想マシンは、その基になる記憶域から切断されると、一時停止し、記憶域を回復するを待ちます。 、一時停止中に、仮想マシンで実行されているアプリケーションのコンテキストを保持します。 その記憶域への仮想マシンの接続が復元されると、仮想マシンを実行中の状態に返します。 その結果、復旧で、テナントのコンピューターのセッション状態が保持されます。 

Windows Server 2016 では、仮想マシンの記憶域の回復性が認識し、ゲスト クラスター用に最適化されたすぎます。 

### <a name="BKMK_Diagnostics"></a>フェールオーバー クラスタ リングでの診断の向上  
フェールオーバー クラスターに関する問題を診断するには、Windows Server 2016 には、次が含まれています。  

-   タイム ゾーン情報および DiagnosticVerbose ログ) (クラスター ログ ファイルにいくつかの機能強化がフェールオーバー クラスタ リング問題のトラブルシューティングを容易にします。 詳細については、次を参照してください。 [Windows Server 2016 フェールオーバー クラスターのトラブルシューティングの機能強化 - クラスター ログ](http://blogs.msdn.com/b/clustering/archive/2015/05/15/10614930.aspx)します。 

-   新しいダンプの種類の**のアクティブなメモリ ダンプ**とはるかに小さく、簡単に保存またはコピー memory.dmp はそのため、仮想マシンに割り当てられたほとんどのメモリ ページを除外します。 詳細については、次を参照してください。 [Windows Server 2016 フェールオーバー クラスターのトラブルシューティングの機能強化 - Active ダンプ](http://blogs.msdn.com/b/clustering/archive/2015/05/18/10615526.aspx)します。 

### <a name="BKMK_SiteAware"></a>サイト認識フェールオーバー クラスター  
Windows Server 2016 には、物理的な場所 (サイト) に基づくストレッチ クラスター内のグループ ノードを有効にするサイト認識フェールオーバー クラスターが含まれています。 クラスターのサイト認識フェールオーバーの動作、配置ポリシー、クォーラムの動作と、ノード間のハートビートなど、クラスター ライフ サイクルのキー操作を強化します。 詳細については、次を参照してください。 [Windows Server 2016 でのサイト認識フェールオーバー クラスター](http://blogs.msdn.com/b/clustering/archive/2015/08/19/10636304.aspx)します。 

### <a name="BKMK_multidomainclusters"></a>ワークグループとマルチ ドメイン クラスター  
Windows Server 2012 R2 と以前のバージョンに、メンバー ノードが同じドメインに参加している間、クラスターを作成することができますのみ。 Windows Server 2016 では、この障壁が取り除かれて、Active Directory の依存関係のないフェールオーバー クラスターを作成する機能が導入されています。 次の構成でフェールオーバー クラスターを作成できます。  

-   **単一ドメイン クラスター。** 同じドメインに参加しているすべてのノードのクラスター。 

-   **マルチ ドメイン クラスター。** 別のドメインのメンバーであるノードのクラスター。 

-   **ワークグループ クラスター。** メンバー サーバーであるノードのクラスター/ワークグループ (ドメインに参加していません)。 

詳細については、次を参照してください[Windows Server 2016 のワークグループとマルチ ドメイン クラスター。](http://blogs.msdn.com/b/clustering/archive/2015/08/17/10635825.aspx)  
### <a name="BKMK_VMLoadBalancing"></a>仮想マシンの負荷分散  
仮想マシンに負荷分散は、フェールオーバー クラスタ リングをシームレスな負荷分散仮想マシンのクラスターでノード間で容易にする新しい機能です。 仮想マシンのメモリと、ノードの CPU 使用率に基づく"過剰コミット"ノードが識別されます。 (ライブ マイグレーション) の仮想マシンに移動 (該当する) 場合、使用可能な帯域幅を持つノードに過剰コミット状態のノードから。 負荷分散の強度を調整することで、最適なクラスターのパフォーマンスと使用率を確認します。 負荷分散は、Windows Server 2016 Technical Preview では既定で有効です。 ただし、負荷分散が無効になっている SCVMM の動的最適化が有効にするとします。 

### <a name="BKMK_VMStartOrder"></a>仮想マシンの起動順序  
仮想マシンの起動順序は、クラスターでフェールオーバー クラスタ リングを仮想マシンの開始順序オーケストレーション (およびすべてのグループ) を紹介する新しい機能です。 仮想マシンは、階層に分けられ、階層間で開始順序の依存関係を作成することができます。 これにより、(仮想マシンのドメイン コント ローラーまたはユーティリティ) などの最も重要な仮想マシンを最初に開始されています。 依存関係にある仮想マシンも開始されるまで、仮想マシンは起動されません。 

### <a name="BKMK_SMBMultiChannel"></a> 簡略化された SMB マルチ チャネルと複数の NIC のクラスター ネットワーク  
フェールオーバー クラスター ネットワークがサブネットごとに 1 つの NIC に限定されなく/ネットワークします。 簡略化された SMB マルチ チャネルと複数 NIC のクラスター ネットワーク、ネットワークの構成は、自動とサブネット上のすべての NIC は、クラスターおよびワークロードのトラフィックに使用することができます。 この拡張機能を使用することにより、HYPER-V、SQL Server フェールオーバー クラスター インスタンス、およびその他の SMB のワークロードのネットワーク スループットを最大化できます。 

詳細については、次を参照してください。[簡略化された SMB マルチ チャネルと複数の NIC のクラスター ネットワーク](smb-multichannel.md)します。

## <a name="see-also"></a>関連項目  
* [ストレージ](../storage/storage.md)  
* [新機能 Windows Server 2016 で記憶域の新機能](../storage/whats-new-in-storage.md)  
