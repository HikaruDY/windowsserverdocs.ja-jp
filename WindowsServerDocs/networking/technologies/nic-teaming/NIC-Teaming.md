---
title: NIC チーミング
description: このトピックでは、Windows Server 2016 でのネットワーク インターフェイス カード (NIC) チーミングの概要を説明します。
manager: brianlic
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology:
- networking-nict
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: abded6f3-5708-4e35-9a9e-890e81924fec
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 142f56153187368effdb802c0c1b50359fffc36a
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2018
---
# <a name="nic-teaming"></a>NIC チーミング

>適用対象: Windows Server (半期チャネル)、Windows Server 2016

このトピックでは、Windows Server 2016 でのネットワーク インターフェイス カード (NIC) チーミングの概要を説明します。

> [!NOTE]  
> このトピックに加え、次の NIC チーミングのコンテンツは使用できます。  
>   
> - [仮想マシン (&) #40; の NIC チーミングVm & #41 です。](nict-vms.md)
> - [NIC チーミングし仮想ローカル エリア ネットワーク (&) #40 です。Vlan と #41 です。](nict-and-vlans.md)
> - [NIC チーミングの MAC アドレスの使用と管理](NIC-Teaming-MAC-Address-Use-and-Management.md)
> - [NIC チーミングのトラブルシューティング](Troubleshooting-NIC-Teaming.md) 
> - [ホストのコンピューターまたは VM で新しい NIC チームを作成します。](Create-a-New-NIC-Team-on-a-Host-Computer-or-VM.md)
> - [NIC チーミング (NetLBFO) コマンドレットで Windows PowerShell](https://technet.microsoft.com/library/jj130849.aspx)
> - TechNet ギャラリーのダウンロード: [Windows Server 2016 の NIC とスイッチ埋め込みチーミング ユーザー ガイド](https://gallery.technet.microsoft.com/Windows-Server-2016-839cb607?redir=0)
  
## <a name="bkmk_over"></a>NIC チーミングの概要  
NIC チーミングには、1 つと 32 人の物理イーサネット ネットワーク アダプター間で 1 つまたは複数のソフトウェア ベースの仮想ネットワーク アダプターにグループ化することができます。 これらの仮想ネットワーク アダプターは、高速なパフォーマンスとネットワーク アダプターに障害が発生した場合のフォールト トレランスを提供します。  
  
チームに配置される同じ物理ホスト コンピューターに、NIC チームのメンバーのネットワーク アダプターをすべてにインストールする必要があります。  
  
> [!NOTE]  
> 負荷分散とフェールオーバー。NIC チームを含む 1 つだけのネットワーク アダプターを提供できません。ただし、1 つのネットワーク アダプターとチーミングを使用して NIC ネットワーク トラフィックの分離の仮想ローカル エリア ネットワーク (Vlan) にも使用するときにします。  
  
NIC チームにネットワーク アダプターを構成するときに、NIC チーミング ソリューション一般的なコア、オペレーティング システムを 1 つまたは複数の仮想アダプター (チーム Nic [tNICs] またはチーム インターフェイスとも呼ばれます) を表示し、接続されています。 Windows Server 2016 には、チームあたりの最大 32 個のチーム インターフェイスがサポートしています。 さまざまな (負荷) の Nic 間の送信トラフィックを分散させるアルゴリズムがあります。  
  
次の図は、複数の tNICs で NIC チームを示しています。  
  
![複数の tNICs で NIC チーム](../../media/NIC-Teaming/nict_overview.jpg)  
  
さらに、同じスイッチにまたは別々 のスイッチには、Nic のチーミングを接続できます。 Nic を別々 のスイッチに接続する場合、同じサブネットに両方のスイッチがあります。  
  
## <a name="bkmk_avail"></a>NIC チーミングの可用性  
NIC チーミングは、Windows Server 2016 のすべてのバージョンで利用可能です。 さらに、対象、ツールがサポートされているクライアントのオペレーティング システムを実行しているコンピューターからの NIC チーミングを管理するのに Windows PowerShell コマンド、リモート デスクトップ、およびリモート サーバー管理ツールを使用することができます。  
  
## <a name="bkmk_nics"></a>NIC チーミングのサポートされる/サポートされない Nic  
Windows Server 2016 での NIC チーム内 (WHQL テスト) Windows ハードウェア認定およびロゴ テストに成功した任意のイーサネット NIC を使用することができます。  
  
次の Nic は、NIC チームに配置することはできません。  
  
-   Hyper-V 仮想スイッチ ポートがホスト パーティション内の Nic として公開されている Hyper-V 仮想ネットワーク アダプター。  
  
    > [!IMPORTANT]  
    > ホスト パーティション (Vnic) で公開されている Hyper-V 仮想 Nic チームに置くことはできません。 Vnic をホスト パーティション内でのチーム化は、任意の構成または組み合わせではサポートされていません。 チームの Vnic しようとして可能性があります完全に失わ通信のネットワークの障害が発生した場合。  
  
-   カーネル デバッグ ネットワーク アダプター (KDNIC)。  
  
-   ネットワーク ブートに使用されている Nic します。  
  
-   WWAN、WLAN、Wi-Fi、Bluetooth、Infiniband、Infiniband (IPoIB) Nic 経由でインターネット プロトコルを含むなどのイーサネット以外のテクノロジを使用する Nic します。  
  
## <a name="bkmk_compat"></a>NIC チーミングの互換性  
NIC チーミングは、次の例外を除き、Windows Server 2016 のすべてのネットワーク テクノロジと互換性のあります。  
  
-   **シングル ルート I/O 仮想化 (SR-IOV)**します。 SR-IOV のデータは (、ホスト オペレーティング システムで、仮想化の場合)、ネットワーク スタックを経由せず NIC に直接送信されます。 そのため、NIC チーム検査またはチーム内の別のパスにデータをリダイレクトすることはできません。  
  
-   **ネイティブのホスト サービスの品質 (QoS)**します。 QoS ポリシーが設定されている場合、ネイティブまたはホスト システムとこれらのポリシーは、最小帯域幅の制限を呼び出す、NIC チームの全体的なスループットは未満にして帯域幅ポリシーを定めてことがなくなります。  
  
-   **TCP Chimney**します。 TCP Chimney は、TCP Chimney オフロード、ネットワーク スタック全体 NIC に直接ためにの NIC チーミングでサポートされていません  
  
-   **802.1 x 認証**します。 802.1 NIC チーミングでは、X 認証を使用しない必要があります。 一部のスイッチは、802.1 X 認証と同じポートでの NIC チーミングの構成を許可しません。  
  
Hyper-V ホストで実行されている仮想マシン (Vm) 内で NIC チーミングの使用方法については、次を参照してください[仮想マシン (&) #40; での NIC チーミング。Vm & #41 です。](../../technologies/nic-teaming/../../technologies/nic-teaming/NIC-Teaming-in-Virtual-Machines--VMs-.md).  
  
## <a name="bkmk_vmq"></a>NIC チーミングと仮想マシン キュー (VMQs)  
VMQ と NIC チーミング連携して動作します。Hyper-V が有効になっているとき、VMQ を有効にする必要があります。 スイッチのモードの構成とに応じて負荷分散アルゴリズム、NIC チーミングはか、提示するチーム (Min キュー モード) 内のすべてのアダプターでサポートされているキューの数が最も少ない利用可能なキューの数または使用可能なキューの合計数を表示する (キューの合計モード) のすべてのチーム メンバー間で、Hyper-V スイッチに VMQ 機能します。  
  
具体的には、チームは、スイッチ非依存のモードと負荷分散のチーム化は、設定または動的モードは、の Hyper-V ポートのモードに場合、報告のキューの数は、チームのメンバー (キューの合計モード) から利用可能なすべてのキューの合計それ以外の場合、報告のキューの数です (Min キュー モード) チームのメンバーでサポートされているキューの数が最も少ない  
  
理由を次に示します。  
  
-   スイッチ非依存のチームが Hyper-V ポートのモードまたは動的モードの場合、Hyper-V スイッチ ポート (VM) の受信トラフィックは、常に、同じチームのメンバーに到着します。 ホストできる予測/制御どのメンバーを受け取りますトラフィック、特定の VM の NIC チーミングは特定のチーム メンバーに割り当てるには、どの VMQ キューに関するより当てはめることができるようにします。 NIC チーミング、Hyper-V スイッチの操作、厳密に 1 つのチーム メンバーにバーチャル マシンに対する、VMQ を設定および受信トラフィックがそのキューにヒットことがわかっています。  
  
-   (静的チーミングまたは LACP チーミング)、スイッチ依存モードで、チームは、ときに、スイッチに接続しているチームの着信トラフィック配布を制御します。 チーム メンバーは、受信トラフィックの取得、バーチャル マシン、ホストの NIC チーミング ソフトウェアを予測できないし、スイッチ トラフィックが分散、バーチャル マシンに対するすべてのチーム メンバーがあります。 結果、NIC チーミング ソフトウェアを Hyper-V スイッチの操作のすべてのチーム メンバーにバーチャル マシン キューのプログラムとして 1 つだけでなくチーム メンバーになります。  
  
-   チーム スイッチ非依存モードでは、アドレス ハッシュ負荷分散アルゴリズムを使用して、受信トラフィックは常に点灯 NIC が 1 つ (プライマリ チームのメンバー) - すべての 1 つのチーム メンバーにします。 他のチーム メンバーはでプログラムを取得するこれらの着信トラフィックを処理するため、同じキューに入れますプライマリ メンバーとして他のプライマリ メンバーに失敗した場合、受信トラフィックを取得するチーム メンバーを使用でき、キューが既に配置されているようにします。  
  
ほとんどの Nic では、Receive Side Scaling (RSS) または VMQ をその同時に両方のために使用するキューがあります。 VMQ 設定の一部では、RSS のキューの設定に見えますが、実際には、どの機能によって RSS および VMQ の両方の使用は現在使用されている一般的なキューの設定。 各 NIC が、これには高度なプロパティの値が * RssBaseProcNumber \*MaxRssProcessors とします。 システム パフォーマンスの向上を提供する、いくつかの VMQ 設定を次に示します。  
  
-   理想的に各 NIC が必要、* RssBaseProcNumber 設定偶数以上の値を 2 つ (2)。 これは、最初の物理プロセッサ コア (論理プロセッサ 0 と 1)、0 は一般的にこの物理プロセッサからネットワーク処理を操舵必要がありますので、システム処理のほとんどはためです。 (一部のコンピューターのアーキテクチャがない物理プロセッサあたり 2 つの論理プロセッサのため以上の値を 1 にそのようなマシンの基本プロセッサがあります。 かどうかイン ダウトの状態と想定物理プロセッサ アーキテクチャごとの 2 つの論理プロセッサの使用には、ホストします)。  
  
-   チームがキューの合計モードの場合、チーム メンバー全員のプロセッサする必要があります、エクステント実用的で重複しません。 たとえば、10 gbps の 2 つの Nic のチームが 4 コアのホスト (論理プロセッサを 8) で設定を 2 ベースのプロセッサを使用して、4 つのコアを使用する最初の 1 つ2 つ目は基本プロセッサ 6 を使用して、2 つのコアを使用して設定されます。  
  
-   チームが最小キュー モードの場合、チーム メンバーが使用するプロセッサ セットが同一でなければなりません。  
  
## <a name="bkmk_hnv"></a>NIC チーミングと Hyper-V ネットワーク仮想化 (HNV)  
NIC チーミングは、Hyper-V ネットワーク仮想化 (HNV) の完全な互換性です。  HNV の管理システムでは、HNV トラフィック用に最適化された方法で負荷を分散する NIC チーミングを許可する NIC チーミングのドライバーに情報を提供します。  
  
## <a name="bkmk_live"></a>NIC チーミングとライブ マイグレーション  
Vm の NIC チーミングは、ライブ マイグレーションには影響しません。 同じ規則は、VM の NIC チーミングが構成されているかどうか、ライブ マイグレーションに存在します。  
  
## <a name="see-also"></a>参照してください。  
[仮想マシン (&) #40; の NIC チーミングVm & #41 です。](../../technologies/nic-teaming/../../technologies/nic-teaming/NIC-Teaming-in-Virtual-Machines--VMs-.md)  
  


