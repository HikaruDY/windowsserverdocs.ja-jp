---
title: ネットワーク ポリシー サーバーのベスト プラクティス
description: このトピックでは、展開して、Windows Server 2016 でネットワーク ポリシー サーバーを管理するためのベスト プラクティスを提供します。
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 90e544bd-e826-4093-8c3b-6a6fc2dfd1d6
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 6cbd606edec06a80767ee997ef6a1397b66b7843
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59834233"
---
# <a name="network-policy-server-best-practices"></a>ネットワーク ポリシー サーバーのベスト プラクティス

>適用対象:Windows Server 2016 の Windows Server (半期チャネル)

このトピックを使用するには、展開して、ネットワーク ポリシー サーバーを管理するためのベスト プラクティスの詳細について\(NPS\)します。

次のセクションでは、NPS の展開のさまざまな側面のベスト プラクティスを提供します。

## <a name="accounting"></a>アカウンティング

NPS のログ記録のためのベスト プラクティスを次に示します。

2 種類のアカウンティング、または NPS でのログ記録があります。

- NPS のイベント ログを記録します。 システムとセキュリティ イベント ログで NPS イベントを記録するイベントのログ記録を使用することができます。 これは、監査とトラブルシューティングの接続の試行の主に使用されます。

- ユーザー認証およびアカウンティング要求を記録します。 テキスト形式またはデータベース形式でログ ファイルにユーザー認証およびアカウンティング要求をログに記録できますか、SQL Server 2000 データベースでストアド プロシージャにログインすることができます。 ログの要求では、接続分析および課金のために主に使用され、攻撃者の活動を追跡する方法を提供するセキュリティの調査ツールとしても有用です。

NPS のログの最も効果的に使用するには。

- ログ記録がオン\(最初に\)認証とアカウンティング レコードの両方にします。 環境内の適切な新機能を確認した後は、これらの選択を変更します。

- イベントのログ記録が、ログを維持するために十分な容量で構成されていることを確認します。

- 破損または削除されるときに再生することはできませんので、定期的にすべてのログ ファイルをバックアップします。

- 使用状況の追跡し、使用に関する請求はどの部門またはユーザーの id を簡略化の両方に RADIUS クラス属性を使用します。 自動的に生成されたクラスの属性は要求ごとに一意が、アクセス サーバーへの応答が失われ、要求が再送信の場合は、重複するレコードが存在する可能性があります。 使用状況を正確に追跡するために、ログから重複する要求を削除する必要があります。

- NPS がオンラインであることを確認、使用するように NPS を架空の接続要求のメッセージを定期的に送信、ネットワーク アクセス サーバーと RADIUS プロキシ サーバーの場合、**ユーザー名を ping**レジストリ設定します。 この設定は、自動的にそれらを処理することがなくこれら false 接続要求を拒否するように NPS を構成します。 さらに、NPS は、イベント ログを解釈する容易に任意のログ ファイルでは、架空のユーザー名に関連するトランザクションを記録しません。

- NAS 通知の転送を無効にします。 開始の転送を無効にすることができ、リモート RADIUS サーバーのメンバーにネットワーク アクセス サーバー (Nas) から停止メッセージが NPS で構成されているその IS をグループ化します。 詳細については、次を参照してください。 [NAS 通知の転送を無効にする](nps-disable-nas-notifications.md)します。

詳細については、次を参照してください。[を構成するネットワーク ポリシー サーバー アカウンティング](nps-accounting-configure.md)します。

- SQL サーバーのログ記録でフェールオーバーと冗長性を提供するには、異なるサブネット上の SQL Server を実行している 2 台のコンピューターを配置します。 SQL Server を使用して、**パブリケーション作成ウィザード**2 台のサーバー間のデータベース レプリケーションを設定します。 詳細については、次を参照してください。 [SQL Server 技術ドキュメント](https://msdn.microsoft.com/library/ms130214.aspx)と[SQL Server レプリケーション](https://msdn.microsoft.com/library/ms151198.aspx)します。

## <a name="authentication"></a>認証

認証のためのベスト プラクティスを次に示します。

- Protected Extensible Authentication Protocol などの証明書ベースの認証方法を使用して、 \(PEAP\)と Extensible Authentication Protocol \(EAP\)強力な認証。 さまざまな攻撃に対して脆弱なセキュリティで保護されていないため、パスワードのみの認証方法を使用しないでください。 PEAP を使用して、セキュリティで保護されたワイヤレス認証\-MS\-CHAP v2 が推奨されるため、NPS は、ユーザーが自分のユーザー名とパスワードで身元を証明サーバーの証明書を使用してワイヤレス クライアントに身元を証明します。  詳細については、ワイヤレス展開に NPS を使用して、次を参照してください。[デプロイ パスワード ベース 802.1 X 認証ワイヤレス アクセス](https://technet.microsoft.com/windows-server-docs/networking/core-network-guide/cncg/wireless/a-deploy-8021x-wireless-access)します。
- 独自の証明機関の展開\(CA\)と Active Directory&reg;証明書サービス\(AD CS\) PEAP および EAP などの証明書ベースの強力な認証方法を使用しています。NPSs でサーバー証明書の使用が必要です。 コンピューターの証明書とユーザー証明書を登録するのに CA を使用することもできます。 サーバー証明書を NPS とリモート アクセス サーバーに展開する方法の詳細については、次を参照してください。 [802.1 X ワイヤードおよびワイヤレス展開用のサーバー証明書の展開](https://technet.microsoft.com/windows-server-docs/networking/core-network-guide/cncg/server-certs/deploy-server-certificates-for-802.1x-wired-and-wireless-deployments)します。

## <a name="client-computer-configuration"></a>クライアント コンピューターの構成

クライアント コンピューターの構成のベスト プラクティスを次に示します。

- 自動的にグループ ポリシーを使用して、ドメイン メンバー 802.1 X クライアント コンピューターのすべてを構成します。 詳細については、「ワイヤレス ネットワーク (IEEE 802.11) ポリシーを構成する」トピックのセクションを参照してください。[ワイヤレス アクセスの展開](https://technet.microsoft.com/windows-server-docs/networking/core-network-guide/cncg/wireless/e-wireless-access-deployment#bkmk_policies)します。

## <a name="installation-suggestions"></a>インストールに関する提案

NPS をインストールするためのベスト プラクティスを次に示します。

- NPS をインストールする前にインストールし、各 NPS の RADIUS クライアントとして構成する前に、ローカルの認証方法を使用して、ネットワーク アクセス サーバーをテストします。

- インストールし、NPS を構成した後は、Windows PowerShell コマンドを使用して、構成を保存[エクスポート NpsConfiguration](https://technet.microsoft.com/library/jj872749.aspx)します。 NPS を再構成するたびにこのコマンドを使用して NPS 構成を保存します。

>[!CAUTION]
>- エクスポートした NPS の構成ファイルには、RADIUS クライアントおよびリモート RADIUS サーバー グループのメンバーの暗号化されていない共有シークレットが含まれています。 このため、安全な場所にファイルを保存することを確認します。
>- エクスポート プロセスでは、エクスポートされたファイルでの Microsoft SQL Server のログ設定は含まれません。 場合は、エクスポートされたファイルを別の NPS をインポートする必要があります手動で構成する SQL サーバーのログ記録、新しいサーバー上。

## <a name="performance-tuning-nps"></a>パフォーマンス チューニングの NPS

パフォーマンス チューニングの NPS のベスト プラクティスを次に示します。

- NPS の認証と承認の応答時間を最適化し、ネットワーク トラフィックを最小限に抑える、ドメイン コント ローラー、NPS をインストールします。

- ときにユニバーサル プリンシパル名\(Upn\)または Windows Server 2008 および Windows Server 2003 ドメインを使用する場合、NPS は、グローバル カタログを使用してユーザーを認証します。 これにかかる時間を最小限に抑えるには、グローバル カタログ サーバーまたはグローバル カタログ サーバーと同じサブネット上にあるサーバーに NPS をインストールします。

- 場合があるリモート RADIUS サーバー グループを構成し、NPS 接続要求ポリシーをオフ、**次のリモート RADIUS サーバー グループ内のサーバーのアカウンティング情報を記録**チェック ボックスで、これらのグループはまだネットワーク アクセス サーバーに送信される\(NAS\)開始し、停止の通知メッセージ。 これには、不要なネットワーク トラフィックが作成されます。 このトラフィックをなくすため、各リモート RADIUS サーバー グループ内の個別のサーバーに対する NAS 通知の転送を無効にオフにすると、**転送のネットワークの開始と停止の通知をこのサーバー**チェック ボックスをオンします。

## <a name="using-nps-in-large-organizations"></a>NPS を大規模な組織で使用します。

NPS を大規模な組織で使用するためのベスト プラクティスを次に示します。

- アクセスを制限するネットワーク ポリシーを使用している場合すべてが特定のグループはアクセスを許可するユーザーのすべてのユニバーサル グループを作成し、し、このユニバーサル グループのアクセスを許可するネットワーク ポリシーを作成します。 配置しないすべてのユーザー、ユニバーサル グループに直接、ネットワーク上の大きな数がある場合に特にです。 代わりに、ユニバーサル グループのメンバーであるし、それらのグループにユーザーを追加する別のグループを作成します。

- ユーザー プリンシパル名を使用して、可能であれば、ユーザーを参照してください。 ユーザーは、ドメイン メンバーシップに関係なく同じユーザー プリンシパル名を持つことができます。 この実習では、ドメインの数が多い組織で必要なスケーラビリティを提供します。

- ネットワーク ポリシー サーバーをインストールした場合\(NPS\)ドメイン以外のコンピューターでコント ローラーと NPS が受信して 1 秒あたりの認証要求の数が多いの数を増やすことで NPS のパフォーマンスを向上させることができます同時に行う認証、NPS およびドメイン コント ローラーの間で許可します。 詳細については、「 

## <a name="security-issues"></a>セキュリティの問題

セキュリティの問題を軽減するためのベスト プラクティスを次に示します。

NPS をリモートで管理している場合は、プレーン テキストでネットワーク経由で機密データ (たとえば、共有シークレットやパスワードなど) の情報を送信しません。 NPSs のリモート管理用の 2 つの推奨される方法はあります。

- NPS へのアクセスに Remote Desktop Services を使用します。 リモート デスクトップ サービスを使用する場合、クライアントとサーバー間のデータは送信されません。 Windows でのリモート デスクトップ接続の名前はリモート デスクトップ サービス クライアント (オペレーティング システムのデスクトップおよび NPS コンソール イメージなど)、サーバーのユーザー インターフェイスのみが送信される&reg;10。 クライアントが送信キーボードとマウス入力すると、リモート デスクトップ サービスを有効にされているサーバーでローカルで処理されます。 リモート デスクトップ サービス ユーザーがログオンすると、ときにのみ、個々 のクライアント セッションは、サーバーによって管理されは互いに独立して表示できます。 さらに、リモート デスクトップ接続は、クライアントとサーバー間の 128 ビット暗号化を提供します。

- 機密データを暗号化するのにには、インターネット プロトコル セキュリティ (IPsec) を使用します。 IPsec を使用すると、NPS と NPS の管理を使用しているリモート クライアント コンピューター間の通信を暗号化するのにことができます。 サーバーをリモートで管理するには、インストール、[リモート サーバー管理ツールの Windows 10](https://www.microsoft.com/download/details.aspx?id=45520)クライアント コンピューター。 インストール後に、Microsoft 管理コンソール (MMC) を使用して、コンソールに、NPS スナップインを追加します。

>[!IMPORTANT]
>Windows 10 Professional または Windows 10 Enterprise の完全リリース版でのみリモート サーバー管理ツールの Windows 10 をインストールすることができます。

NPS の詳細については、次を参照してください。[ネットワーク ポリシー サーバー (NPS)](nps-top.md)します。

