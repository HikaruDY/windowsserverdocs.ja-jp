---
title: ネットワーク ポリシー サーバーのベスト プラクティス
description: このトピックでは、展開して、Windows Server 2016 でネットワーク ポリシー サーバーを管理するためのベスト プラクティスを提供します。
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 90e544bd-e826-4093-8c3b-6a6fc2dfd1d6
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 5a9a68965d0d19504352ad67f7ab268b3d344fb2
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2018
---
# <a name="network-policy-server-best-practices"></a>ネットワーク ポリシー サーバーのベスト プラクティス

>適用対象: Windows Server (半期チャネル)、Windows Server 2016

このトピックを使用すると、展開して、ネットワーク ポリシー サーバー \(NPS\) を管理するためのベスト プラクティスについて説明します。

次のセクションでは、NPS の展開のさまざまな側面のベスト プラクティスを提供します。

## <a name="accounting"></a>アカウンティング

NPS のログのベスト プラクティスを次に示します。

アカウンティング、または NPS に、ログの 2 つの種類があります。

- NPS のイベントを記録します。 システムとセキュリティ イベント ログで NPS イベントを記録するイベント ログを使用することができます。 これは、監査とトラブルシューティングの接続試行に主に使用されます。

- ユーザーの認証およびアカウンティング要求のログに記録します。 ユーザー認証とアカウンティングの要求をテキスト形式またはデータベース形式でログ ファイルにログに記録できますか、SQL Server 2000 データベースのストアド プロシージャにログオンすることができます。 ログの要求は、接続の分析と課金のために主に使用されも、攻撃者が活動を追跡する方法を提供する、セキュリティの調査ツールとして役立ちます。

NPS のログ記録を最も効果的に使用するには。

- 認証とアカウンティング レコードの両方のログ記録 \(initially\) をオンにします。 新機能が環境に適したが判明したら、これらの選択を変更します。

- イベント ログには、ログを維持するために十分な容量で構成されていることを確認します。

- バックアップを定期的にすべてのログ ファイルが破損しているまたは削除されるときに再作成することはできません。

- 使用状況の追跡し、使用状況の間充電する部門またはユーザーの ID を簡略化するための両方に RADIUS クラスの属性を使用します。 自動的に生成されたクラス属性は要求ごとに一意が場合は、アクセス サーバーへの返信が失われ、要求を再送信は、重複したレコードが存在する可能性があります。 使用状況を正確に追跡ログから重複する要求を削除する必要があります。

- NPS が NPS サーバーがオンラインであることを確認するには、使用する要求メッセージの架空の接続を定期的に送信、ネットワーク アクセス サーバーと RADIUS プロキシ サーバー場合、**ユーザー名を ping**レジストリ設定します。 この設定は、これらの場合は false 接続要求を処理せず自動的に拒否するために NPS を構成します。 さらに、NPS は、イベント ログを解釈を容易にログ ファイル、架空のユーザー名を含むトランザクションを記録しません。

- NAS 通知の転送を無効にします。 スタート画面の転送を無効にすることができ、リモート RADIUS サーバーのメンバーネットワーク アクセス サーバー (Nas) から停止メッセージ NPS に構成されているその IS をグループ化します。 詳細については、次を参照してください。[NAS 通知の転送を無効にする](nps-disable-nas-notifications.md)します。

詳細については、次を参照してください。[ネットワーク ポリシー サーバー アカウンティングを構成する](nps-accounting-configure.md)します。

- SQL Server のログとフェールオーバーおよび冗長性を提供するには、異なるサブネット上の SQL Server を実行している 2 台のコンピューターを配置します。 SQL Server を使用して**パブリケーションの作成ウィザード**2 台のサーバー間のデータベース レプリケーションを設定します。 詳細については、次を参照してください。[SQL Server のテクニカル ドキュメント](https://msdn.microsoft.com/library/ms130214.aspx)と[SQL Server レプリケーション](https://msdn.microsoft.com/library/ms151198.aspx)します。

## <a name="authentication"></a>認証

認証のためのベスト プラクティスを次に示します。

- 強力な認証のためには、Protected Extensible Authentication Protocol \(PEAP\) や Extensible Authentication Protocol \(EAP\) などの証明書ベースの認証方法を使用します。 さまざまな攻撃に対して脆弱である、セキュリティで保護されていないために、パスワードのみの認証方法を使用しません。 セキュリティで保護されたワイヤレス認証、PEAP\-MS\--ms-chap V 2 を使用してをお勧め、NPS サーバーは、ユーザーが自分のユーザー名とパスワードの身元を証明中に、サーバー証明書を使用してワイヤレス クライアントに身元を証明するためです。  詳細については、ワイヤレス展開に NPS を使用して、次を参照してください。[展開パスワード ベース 802.1 X 認証ワイヤレス アクセス](https://technet.microsoft.com/windows-server-docs/networking/core-network-guide/cncg/wireless/a-deploy-8021x-wireless-access)します。
- 独自の証明機関の展開を Active Directory \(CA\)&reg;証明書サービス \(AD CS\) NPS サーバーでサーバー証明書の使用を必要とする PEAP と EAP などの強力な証明書ベースの認証方法を使用するとします。 また、コンピューターの証明書とユーザー証明書を登録、CA を使用することができます。 NPS サーバーとリモート アクセス サーバーにサーバー証明書を展開する方法の詳細については、次を参照してください。[802.1 X ワイヤードおよびワイヤレス展開用のサーバー証明書の展開](https://technet.microsoft.com/windows-server-docs/networking/core-network-guide/cncg/server-certs/deploy-server-certificates-for-802.1x-wired-and-wireless-deployments)します。

## <a name="client-computer-configuration"></a>クライアント コンピューターの構成

クライアント コンピューターの構成に関するベスト プラクティスを次に示します。

- 自動的にグループ ポリシーを使用してすべてのドメインのメンバー 802.1 X クライアント コンピューターを構成します。 詳細については、「ワイヤレス ネットワーク (IEEE 802.11) ポリシーを構成する」トピックの「」セクションを参照してください。[ワイヤレス アクセスの展開](https://technet.microsoft.com/windows-server-docs/networking/core-network-guide/cncg/wireless/e-wireless-access-deployment#bkmk_policies)します。

## <a name="installation-suggestions"></a>インストールに関する推奨事項

NPS をインストールするためのベスト プラクティスを次に示します。

- NPS をインストールする前にインストールし、NPS の RADIUS クライアントとして構成する前に、ローカルの認証方法を使用して、ネットワーク アクセス サーバーの各テストします。

- インストールし、NPS を構成した後は、Windows PowerShell コマンドを使用して構成を保存[エクスポート NpsConfiguration](https://technet.microsoft.com/en-us/library/jj872749.aspx)します。 NPS サーバーを再構成するたびにこのコマンドを使用して、NPS の構成を保存します。

>[!CAUTION]
>- エクスポートした NPS の構成ファイルは、RADIUS クライアントおよびリモート RADIUS サーバー グループのメンバーの暗号化されていない共有シークレットを格納します。 このため、セキュリティで保護された場所にファイルを保存することを確認します。
>- エクスポート プロセスでは、エクスポートしたファイルで Microsoft SQL Server のログ設定は含まれません。 場合は、エクスポートされたファイルを別の NPS サーバーにインポートする必要があります手動で構成する SQL Server ログを新しいサーバーにします。

## <a name="performance-tuning-nps"></a>パフォーマンス チューニングの NPS

パフォーマンス チューニング NPS のベスト プラクティスを次に示します。

- NPS の認証と承認の応答時間を最適化し、ネットワーク トラフィックを最小限に抑える、ドメイン コントローラー、NPS をインストールします。

- ユニバーサル プリンシパル名 \(UPNs\) または Windows Server 2008 および Windows Server 2003 ドメインを使用する場合、NPS は、グローバル カタログを使用してユーザーを認証します。 これを行うにかかる時間を最小限に抑えるには、グローバル カタログ サーバーまたはグローバル カタログ サーバーと同じサブネット上にあるサーバーのいずれかに NPS をインストールします。

- リモート RADIUS サーバー グループを構成があるし、NPS 接続要求ポリシーでオフにする、**次リモート RADIUS サーバー グループ内のサーバー上でのアカウンティング情報を記録**] チェック ボックスをこれらのグループがまだ送信されるネットワーク アクセス サーバー \(NAS\) 開始および通知メッセージを停止します。 これにより、不要なネットワーク トラフィックが作成されます。 このトラフィックを排除するには、各リモート RADIUS サーバー グループの個々 のサーバーの NAS 通知の転送を無効をオフにして、**ネットワークの開始を転送し、このサーバーに通知を停止**チェック ボックスをオンします。

## <a name="using-nps-in-large-organizations"></a>大規模な組織で NPS を使用します。

大規模な組織で NPS を使用するためのベスト プラクティスを次に示します。

- アクセスを制限するネットワーク ポリシーを使用している場合、すべてが、特定のグループはすべてのアクセスを許可するユーザーのユニバーサル グループを作成し、このユニバーサル グループのアクセス権を付与するネットワーク ポリシーを作成します。 配置しないすべてのユーザー、ユニバーサル グループに直接、ネットワーク上でそれらの数が多いがある場合に特にします。 代わりに、ユニバーサル グループのメンバーであるし、それらのグループにユーザーを追加する別のグループを作成します。

- ユーザー プリンシパル名を使用して、可能な限りユーザーを参照してください。 ユーザーは、ドメインのメンバーップに関係なく、同じユーザー プリンシパル名を持つことができます。 この演習では、多数のドメインを使用する組織で必要になる可能性がありますスケーラビリティを提供します。

- ドメイン コントローラー以外のコンピューターでネットワーク ポリシー サーバー \(NPS\) がインストールされているし、NPS サーバーは 1 秒あたりの認証要求の数が多いを受信して、NPS サーバーとドメイン コントローラー間で許可する同時認証の数を増やすことで NPS のパフォーマンスを改善できます。 詳細については、次を参照してください。 

## <a name="security-issues"></a>セキュリティの問題

セキュリティの問題を減らすためのベスト プラクティスを次に示します。

NPS サーバーをリモートで管理している場合は、プレーン テキストでネットワーク経由で機密情報や機密のデータ (たとえば、共有シークレットやパスワードなど) の情報を送信しません。 NPS サーバーのリモート管理の推奨される 2 つの方法があります。

- NPS サーバーにアクセスするのにには、リモート デスクトップ サービスを使用します。 リモート デスクトップ サービスを使用すると、クライアントとサーバー間のデータは送信されません。 Windows でのリモート デスクトップ接続の名前はリモート デスクトップ サービス クライアント (たとえば、オペレーティング システムのデスクトップおよび NPS コンソールの画像)、サーバーのユーザー インターフェイスのみが送信される&reg;10。 クライアントに送信キーボードとマウス入力すると、リモート デスクトップ サービスを有効にしているサーバーでローカルに処理されます。 リモート デスクトップ サービス ユーザーがログオンすると、ときにのみ、個々 のクライアント セッションは、サーバーによって管理されは互いに独立して見ることができます。 さらに、リモート デスクトップ接続は、クライアントとサーバー間の 128 ビット暗号化を提供します。

- 機密データを暗号化するのにには、インターネット プロトコル セキュリティ (IPsec) を使用します。 NPS サーバーと NPS の管理を使用しているリモート クライアント コンピューター間の通信の暗号化に IPsec を使用することができます。 サーバーをリモートで管理するにインストールすることができます、[リモート サーバー管理ツールの Windows 10](https://www.microsoft.com/download/details.aspx?id=45520)クライアント コンピューターにします。 インストール後、Microsoft 管理コンソール (MMC) を使用して、NPS サーバーで、スナップイン、コンソールに追加します。

>[!IMPORTANT]
>リモート サーバー管理ツールの Windows 10 は、フル リリースの Windows 10 Professional または Windows 10 Enterprise にのみインストールできます。

NPS の詳細については、次を参照してください。[ネットワーク ポリシー サーバー (NPS)](nps-top.md)します。

