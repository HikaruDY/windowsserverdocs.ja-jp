---
title: NPS プロキシ サーバーの負荷分散
description: このトピックを使用すると、Windows Server 2016 および Windows 10 で VPN 機能と機能について説明します。
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 528280e6-b47e-489f-b310-b257d434aa0d
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 9f00eb6575284a69358c58b36d08672cdd69dc18
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2018
---
# <a name="nps-proxy-server-load-balancing"></a>NPS プロキシ サーバーの負荷分散

Windows Server 2016 の適用対象:

仮想プライベート ネットワーク (VPN) サーバーやワイヤレス アクセス ポイントなどのネットワーク アクセス サーバーとは、リモート認証ダイヤルイン ユーザー サービス (RADIUS) クライアントでは、接続要求を作成し、NPS などの RADIUS サーバーに送信します。 場合によっては、NPS サーバー可能性がありますが多すぎる接続要求を受信同時に、パフォーマンスの低下またはオーバー ロードします。 NPS サーバーが過負荷になっているときは負荷分散の複数の NPS サーバーを構成して、ネットワークに追加することをお勧めします。 1 つまたは複数の NPS サーバーのオーバー ロードを防ぐために複数の NPS サーバーの間で受信接続要求を均等に配布するときに、負荷分散呼び出されます。

負荷分散はにとって特に便利です。

- 拡張認証プロトコル-トランスポート層セキュリティ \(EAP-TLS\) または Protected Extensible Authentication Protocol を使用している組織 \ (PEAP\)-TLS 認証します。 これらの認証方法は、サーバー認証とユーザーまたはクライアント コンピューターの認証のいずれかの証明書を使用するための負荷を RADIUS プロキシとサーバーはパスワード ベースの認証方法を使用する場合よりも線が太くなります。
- 継続的なサービスの可用性を維持する必要がある組織。
- 他の組織に対する VPN アクセスを外部委託に使用する、インターネットのサービス プロバイダー \(ISPs\) します。 外部委託 VPN サービスでは、大量の認証トラフィックを生成できます。

これには、NPS サーバーに送信した接続要求の負荷を分散に使用できる 2 つの方法があります。

- 複数の RADIUS サーバーに接続要求を送信する、ネットワーク アクセス サーバーを構成します。 たとえば、20 のワイヤレス アクセス ポイントと 2 台の RADIUS サーバーがある場合は、両方の RADIUS サーバーに接続要求を送信するには、各アクセス ポイントを構成します。 負荷を分散し、優先順位の指定された順序で複数の RADIUS サーバーに接続要求を送信するアクセス サーバーを構成して各ネットワーク アクセス サーバーにフェールオーバーを提供することができます。 負荷分散のこのメソッドは、通常、RADIUS クライアントの数が多いを展開しない小規模な組織に最適です。
- NPS を RADIUS プロキシとして構成を使用して、複数の NPS サーバーまたはその他の RADIUS サーバー間で接続要求の負荷を読み込みます。 たとえば、100 のワイヤレス アクセス ポイント、1 つ NPS プロキシ、および 3 台の RADIUS サーバーがある場合は、NPS プロキシにすべてのトラフィックを送信するアクセス ポイントを構成できます。 NPS プロキシで、プロキシが 3 台の RADIUS サーバーの間の接続要求を均等に分散できるようにの負荷分散を構成します。 負荷分散のこのメソッドは、多くの RADIUS クライアントとサーバーのある中規模および大規模な組織に最適です。

多くの場合、負荷分散の最適な方法は 2 つの NPS プロキシ サーバーに接続要求を送信し、[プロキシの構成、NPS の RADIUS サーバー間の負荷を RADIUS クライアントを構成するです。 このアプローチは、フェールオーバーと負荷分散を NPS のプロキシと RADIUS サーバーの両方を提供します。

## <a name="radius-server-priority-and-weight"></a>RADIUS サーバーの優先順位と重み

NPS のプロキシ構成プロセス中には、リモート RADIUS サーバー グループを作成して、各グループに RADIUS サーバーを追加します。 負荷分散を構成するのには、リモート RADIUS サーバー グループごとに複数の RADIUS サーバーが必要です。 グループのメンバーを追加するときに、またはグループのメンバーとしての RADIUS サーバーの作成後は、負荷分散] タブで、次の項目を構成するには、追加の RADIUS サーバー] ダイアログ ボックスにアクセスすることができます。

- **優先順位**します。 優先順位は、RADIUS サーバーを NPS のプロキシ サーバーの重要度の順序を指定します。 優先順位レベルには、1、2、3 などの整数値を割り当てる必要があります。 低い数値、優先順位の高い NPS プロキシは、RADIUS サーバーに与えられます。 たとえば、RADIUS サーバーには、1 の最も高い優先順位が割り当てられているが場合、NPS プロキシ接続に要求を送信、RADIUS サーバーします。優先順位 1 のサーバーが利用できない場合は、NPS は、2 の優先順位での RADIUS サーバーに接続要求を送信します。 複数の RADIUS サーバーに同じ優先順位を割り当てるし、それらの間で負荷に重み付けの設定を使用できます。

- **重み付け**します。 NPS 使用数の接続を確認するには、この優先度設定をそれぞれに送信する要求は、グループのメンバーが同じ優先順位があるときにメンバーをグループ化します。 重み付けの設定には 1 ~ 100 の値を割り当てる必要があります、値が 100% の割合を表します。 たとえば、リモート RADIUS サーバー グループに 1 の優先順位レベルと、重み付けレーティング 50 の両方がある 2 つのメンバーが含まれている場合は、NPS プロキシは各 RADIUS サーバーへの接続要求の 50% に転送します。

- **[詳細設定**します。 これらのフェールオーバー設定は、NPS がリモートの RADIUS サーバーが利用できないかどうかを判断するための手段を提供します。 NPS を RADIUS サーバーが使用できないことを判断した場合、その他のグループのメンバーに接続要求を送信を開始することができます。 これらの設定では、NPS プロキシは、要求が破棄された; と見なされる前に、RADIUS サーバーからの応答を待機する秒数を構成することができます。NPS プロキシする前に破棄された要求の最大数の識別、RADIUS サーバーとして利用できません。NPS プロキシする前に要求する間隔 (秒) の数が利用不可として、RADIUS サーバーを識別します。

## <a name="configure-nps-proxy-load-balancing"></a>NPS プロキシの負荷分散を構成します。

負荷分散を構成する前に、どのくらいリモート RADIUS サーバー グループ必要な場合、どのサーバーが各特定のグループ、および各サーバーの優先順位と重みの設定のメンバーを含む展開計画を作成します。

>[!NOTE]
>以下の手順では、既に展開しているサーバーの RADIUS サーバーが構成されていると仮定します。

プロキシ サーバーと転送要求を RADIUS クライアントからリモート RADIUS サーバーとして機能するために NPS を構成するのには、次の操作を行う必要があります。

1. RADIUS クライアントを配置 \ (VPN サーバー、ダイヤルアップ サーバー、ターミナル サービス ゲートウェイ サーバー、802.1 X 認証スイッチ、および 802.1 X ワイヤレス アクセス points\) と、NPS のプロキシ サーバーに接続要求を送信するように構成します。

2. NPS プロキシでは、RADIUS クライアントとしてネットワーク アクセス サーバーを構成します。 詳細については、次を参照してください。[RADIUS クライアントの構成](https://docs.microsoft.com/windows-server/networking/technologies/nps/nps-radius-clients-configure)します。

3. NPS プロキシで、1 つまたは複数のリモート RADIUS サーバー グループを作成します。 このプロセス中には、RADIUS サーバーをリモート RADIUS サーバー グループに追加します。 詳細については、次を参照してください。[リモート RADIUS サーバー グループを構成する](https://docs.microsoft.com/windows-server/networking/technologies/nps/nps-crp-rrsg-configure)します。

4. NPS プロキシで、リモートの RADIUS サーバー グループに追加する各 RADIUS サーバーの RADIUS サーバーをクリックして**負荷分散**タブをクリックし、構成**優先順位**、**重み**、および**詳細設定**します。

5. NPS プロキシで、リモート RADIUS サーバー グループに認証とアカウンティング要求を転送する接続要求ポリシーを構成します。 リモート RADIUS サーバー グループごとに 1 つの接続要求ポリシーを作成する必要があります。 詳細については、次を参照してください。[接続要求ポリシーを構成する](https://docs.microsoft.com/windows-server/networking/technologies/nps/nps-crp-configure)します。


