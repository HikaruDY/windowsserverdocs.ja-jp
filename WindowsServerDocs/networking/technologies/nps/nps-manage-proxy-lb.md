---
title: NPS プロキシ サーバーの負荷分散
description: このトピックを使用すると、Windows Server 2016 および Windows 10 VPN 機能と機能について説明します。
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 528280e6-b47e-489f-b310-b257d434aa0d
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 04f466f7646fc5109af7379cab1240d8cd6829ff
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59874403"
---
# <a name="nps-proxy-server-load-balancing"></a>NPS プロキシ サーバーの負荷分散

適用先:Windows Server 2016

仮想プライベート ネットワーク (VPN) サーバーやワイヤレス アクセス ポイントなどのネットワーク アクセス サーバーとは、リモート認証ダイヤルイン ユーザー サービス (RADIUS) クライアントでは、接続要求を作成し、NPS などの RADIUS サーバーに送信します。 場合によっては、NPS 可能性がありますが多すぎる接続要求を受信同時に、パフォーマンスの低下やオーバー ロードします。 NPS がオーバー ロードされたときに、複数 NPSs をネットワークに追加し、負荷分散を構成することをお勧めします。 NPSs の 1 つまたは複数のオーバー ロードを防ぎ複数 NPSs 間で着信接続要求を均等に分散する負荷分散と呼ばれます。

負荷分散することは特に便利です。

- 拡張認証プロトコル-トランスポート層セキュリティを使用している組織\(EAP-TLS\)または Protected Extensible Authentication Protocol \(PEAP\)-TLS 認証。 これらの認証方法は、サーバー認証とユーザーまたはクライアント コンピューターの認証のいずれかの証明書を使用するための RADIUS プロキシとサーバーの負荷がパスワード ベースの認証方法を使用する場合よりも多い。
- 継続的なサービスの可用性を維持する必要がある組織。
- インターネット サービス プロバイダー \(Isp\)他の組織に対する VPN アクセスを外部委託します。 外部委託 VPN サービスは、膨大な量の認証トラフィックを生成できます。

2 つの方法、NPSs に送信される接続要求の負荷分散に使用することができます。

- 複数の RADIUS サーバーに接続要求を送信するネットワーク アクセス サーバーを構成します。 たとえば、20 のワイヤレス アクセス ポイントと 2 つの RADIUS サーバーがある場合は、両方の RADIUS サーバーに接続要求を送信するには、各アクセス ポイントを構成します。 負荷を分散し、優先度の指定した順序で複数の RADIUS サーバーに接続要求を送信するアクセス サーバーを構成して各ネットワーク アクセス サーバーにフェールオーバーを提供することができます。 負荷分散のこのメソッドでは、多数の RADIUS クライアントを展開しない小規模な組織は、通常最適です。
- NPS を RADIUS プロキシとして構成を使用して、複数 NPSs または他の RADIUS サーバー間の接続要求の分散を読み込みます。 たとえば、100 のワイヤレス アクセス ポイント、1 つの NPS プロキシと RADIUS サーバーの 3 つある場合場合、は、NPS プロキシにすべてのトラフィックを送信するアクセス ポイントを構成できます。 NPS プロキシには、プロキシは、次の 3 つの RADIUS サーバー間の接続要求を均等に分散するための負荷分散を構成します。 負荷分散のこのメソッドは、多くの RADIUS クライアントとサーバーがある中規模および大規模の組織に最適です。

多くの場合は、負荷分散に最適な方法は、2 つの NPS プロキシ サーバーに接続要求を送信し、負荷を RADIUS サーバー間で分散する NPS プロキシを構成する RADIUS クライアントを構成します。 このアプローチでは、NPS プロキシと RADIUS サーバーの負荷分散とフェールオーバーの両方を提供します。

## <a name="radius-server-priority-and-weight"></a>RADIUS サーバーの優先順位と重み

NPS プロキシの構成プロセス中には、リモート RADIUS サーバー グループを作成し、各グループに RADIUS サーバーを追加します。 負荷分散を構成するには、リモート RADIUS サーバー グループごとに 1 つ以上の RADIUS サーバーが必要です。 グループのメンバーを追加するときに、またはグループのメンバーとして RADIUS サーバーの作成後に、負荷分散 タブで、次の項目を構成する追加の RADIUS サーバー ダイアログ ボックスを表示できます。

- **優先順位**します。 優先順位では、NPS プロキシ サーバーを RADIUS サーバーの重要度の順序を指定します。 優先度レベルには、1、2、3 などの整数値を割り当てる必要があります。 小さい数、優先順位の高い NPS プロキシを RADIUS サーバーで提供されます。 たとえば、RADIUS サーバーが 1 の最高の優先順位を割り当てられる場合、NPS プロキシ最初送信します接続要求を RADIUS サーバー;優先度 1 のサーバーが使用できない場合は、NPS は優先度 2 の RADIUS サーバーに接続要求を送信します。 複数の RADIUS サーバーに同じ優先順位を割り当てるし、それらの間の負荷、重み設定を使用できます。

- **重み**します。 NPS の使用数の接続を確認するには、この重み設定をそれぞれに送信する要求は、グループのメンバーが同じ優先度レベルのメンバーをグループ化します。 重み設定には 1 ~ 100 の値を割り当てる必要があるし、値が 100% の割合を表します。 たとえば、リモート RADIUS サーバー グループに 1 の優先順位と重み格付け 50 の両方がある 2 つのメンバーが含まれている場合、NPS プロキシは、各 RADIUS サーバーに対する接続要求の 50% を転送します。

- **詳細設定**します。 これらのフェールオーバー設定は、NPS をリモートの RADIUS サーバーが利用できないかどうかを判断するための手段を提供します。 NPS を RADIUS サーバーが使用できないことを判断した場合の他のグループのメンバーに接続要求を送信を開始できます。 これらの設定では、; 削除要求と見なされますが、NPS プロキシを RADIUS サーバーからの応答を待機する秒数を構成することができます。NPS プロキシの前に破棄された要求の最大数を利用できない場合は、RADIUS サーバーを識別します。NPS プロキシの前に、要求間で経過できる秒数が利用不可として RADIUS サーバーを識別します。

## <a name="configure-nps-proxy-load-balancing"></a>NPS プロキシの負荷分散を構成します。

負荷分散を構成する前に、数リモート RADIUS サーバー グループを必要とするサーバーはそれぞれ特定のグループと各サーバーの優先順位と重みの設定のメンバーを含む展開の計画を作成します。

>[!NOTE]
>以下の手順では、既にデプロイしているサーバーの RADIUS サーバーが構成されていると仮定します。

プロキシ サーバーとリモート RADIUS サーバーを RADIUS クライアントからの転送要求として機能するように NPS を構成するには、次の操作を実行する必要があります。

1. RADIUS クライアントを配置\(VPN サーバー、ダイヤルアップ サーバー、ターミナル サービス ゲートウェイ サーバー、802.1 X 認証スイッチ、および 802.1 X ワイヤレス アクセス ポイント\)し、NPS プロキシに接続要求を送信するよう構成サーバー。

2. NPS プロキシを RADIUS クライアントとしてネットワーク アクセス サーバーを構成します。 詳細については、次を参照してください。 [RADIUS クライアントの構成](https://docs.microsoft.com/windows-server/networking/technologies/nps/nps-radius-clients-configure)します。

3. NPS プロキシでは、1 つまたは複数のリモート RADIUS サーバー グループを作成します。 このプロセスの間の RADIUS サーバーをリモート RADIUS サーバー グループに追加します。 詳細については、次を参照してください。[リモート RADIUS サーバー グループの構成](https://docs.microsoft.com/windows-server/networking/technologies/nps/nps-crp-rrsg-configure)します。

4. リモートの RADIUS サーバー グループに追加する RADIUS サーバーごとに、NPS プロキシを RADIUS サーバーをクリックします**負荷分散**タブをクリックし、構成、**優先度**、**重み**。、および**詳細設定**します。

5. NPS プロキシで認証およびアカウンティング要求をリモート RADIUS サーバー グループに転送するように、接続要求ポリシーを構成します。 リモート RADIUS サーバー グループごとに 1 つの接続要求ポリシーを作成する必要があります。 詳細については、次を参照してください。[接続要求ポリシーの構成](https://docs.microsoft.com/windows-server/networking/technologies/nps/nps-crp-configure)します。


