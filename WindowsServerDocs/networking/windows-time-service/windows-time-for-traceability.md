---
ms.assetid: ''
title: Windows の時間の追跡可能性
description: 多くの分野の規制を UTC にトレース可能システムが必要です。  これは、システムのオフセットは、UTC に対して証明できることを意味します。
author: shortpatti
ms.author: dacuo
manager: dougkim
ms.date: 10/17/2018
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: networking
ms.openlocfilehash: 3256ff55ec8f293cd37acbea6122584a63847284
ms.sourcegitcommit: 63926404009f9e1330a4a0aa8cb9821a2dd7187e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/29/2019
ms.locfileid: "67469577"
---
# <a name="windows-time-for-traceability"></a>Windows の時間の追跡可能性
>適用対象:Windows Server 2016 バージョン 1709 以降および Windows 10 バージョン 1703 以降


多くの分野の規制を UTC にトレース可能システムが必要です。  これは、システムのオフセットは、UTC に対して証明できることを意味します。  規制遵守のシナリオを有効にするには、Windows 10 (バージョン 1703 以降) および Windows Server 2016 (バージョン 1709 以降) 提供で行われた操作の理解を形成するオペレーティング システムの観点から画像を提供する新しいイベント ログシステム クロック。  これらのイベント ログは Windows タイム サービスの継続的に生成されると、検査または後で分析のためのアーカイブすることができます。

これらの新しいイベントでは、次の質問に回答が有効にします。

* システム クロックが変更されました。
* クロック周波数が変更されました
* Windows タイム サービスの構成が変更されました

## <a name="availability"></a>対象

Windows 10 バージョン 1703 以降および Windows Server 2016 バージョン 1709 以降では、これらの機能強化が含まれます。

## <a name="configuration"></a>構成

この機能を実現する構成は必要ありません。  これらのイベント ログが既定で有効になっておよびを参照して、イベント ビューアーの 、**アプリケーションとサービスの Log\Microsoft\Windows\Time Service\Operational**チャネル。


## <a name="list-of-event-logs"></a>イベント ログの一覧

次のセクションでは、追跡可能性のシナリオで使用するために記録されたイベントについて説明します。

# <a name="257tab257"></a>[257](#tab/257)
このイベントと、Windows タイム サービス (W32Time) が開始され、現在の時刻、現在のティック数、ランタイム構成、タイム プロバイダ、および現在のクロック速度に関する情報をログに記録されます。

|||
|---|---|
|イベントの説明 |サービスの開始 |
|詳細 |W32time スタートアップ時に発生します |
|記録されたデータ |<ul><li>現在の時刻 (utc)</li><li>現在のティック数</li><li>W32Time 構成</li><li>時間のプロバイダーの構成</li><li>クロック速度</li></ul> |
|制限メカニズム  |なし。 このイベントは、サービスが起動するたびに発生します。 |

**例:**
```
W32time service has started at 2018-02-27T04:25:17.156Z (UTC), System Tick Count 3132937.
```

**[コマンド:]**

この情報は、次のコマンドを使用して照会することもできます。

*W32Time とタイム プロバイダの構成*
```
w32tm.exe /query /configuration
```

*クロック速度*
```
w32tm.exe /query /status /verbose
```


# <a name="258tab258"></a>[258](#tab/258)
このイベントは、Windows タイム サービス (W32Time) が停止して、現在の時刻とティック数に関する情報を記録するときに記録されます。

|||
|---|---|
|イベントの説明 |サービスの停止 |
|詳細 |W32time シャット ダウン時に発生します |
|記録されたデータ |<ul><li>現在の時刻 (utc)</li><li>現在のティック数</li></ul> |
|制限メカニズム  |なし。 このイベントは、サービスを停止するたびに発生します。 |

**テキストの例:** 
`W32time service is stopping at 2018-03-01T05:42:13.944Z (UTC), System Tick Count 6370250.`

# <a name="259tab259"></a>[259](#tab/259)
このイベントは、その現在のタイム ソースとその選択したタイム ソースの一覧を定期的に記録します。  さらに、現在のティック数を記録します。  このイベントでは、タイム ソースが変更されるたびには発生しません。  このドキュメントで後述するその他のイベントは、この機能を提供します。

|||
|---|---|
|イベントの説明 |NTP クライアント プロバイダーの定期的なステータス |
|詳細 |NTP クライアントによって使用されている時刻ソース (s) の一覧 |
|記録されたデータ |<ul><li>使用可能な時間のソース</li><li>選択したログ記録時のタイム サーバーを参照します。</li><li>現在のティック数</li></ul>  |
|制限メカニズム  |8 時間ごとに 1 回ログに記録します。 |

**テキストの例:** NTP クライアント プロバイダーの定期的なステータス:

Ntp クライアントでは、次の NTP サーバーから時刻のデータが受信します。

server1.fabrikam.com、0x8 (ntp.m|0x8|[::]:123 -> [IPAddress]:123)server2.fabrikam.com,0x8 (ntp.m|0x8|[::]:123 [IPAddress]-> : 123)。 選択した参照のタイム サーバーは Server1.fabrikam.com,0x8 (ntp.m|0x8|[::]:123 [IPAddress]-> : 123) (RefID:0x08d6648e63)。 システムのティック数 13187937

**コマンド**この情報は、次のコマンドを使用して照会することもできます

*ピアを識別します。* 
`w32tm.exe /query /peers`

# <a name="260tab260"></a>[260](#tab/260)

|||
|---|---|
|イベントの説明 |タイム サービスの構成と状態 |
|詳細 |W32time は、その構成と状態を定期的に記録します。 これは、呼び出し元のと同じです。<br><br>`w32tm /query /configuration /verbose`<br>または<br>`w32tm /query /status /verbose` |
|制限メカニズム  |8 時間ごとに 1 回ログに記録します。 |

# <a name="261tab261"></a>[261](#tab/261)
これにより、SetSystemTime API を使用して、システム時刻が変更されたときに、各インスタンスがログインします。

|||
|---|---|
|イベントの説明 |システム時刻を設定します。 |
|制限メカニズム  |なし。<br><br>妥当な時間の同期では、システムではほとんど発生する必要がありますこれと、発生するたびにログに記録します。 その設定が、Windows システム イベント ログでイベントを調整するためのものであるために、このイベントをログ出力中に TimeJumpAuditOffset 設定が無視されます。 |

# <a name="262tab262"></a>[262](#tab/262)

|||
|---|---|
|イベントの説明 |システム クロック周波数の調整 |
|詳細 |時計が同期に近い場合、W32time でシステム クロックの周波数が常に変更されます。 イベント ログをオーバーランすることがなく、クロック周波数に対して行われる「ある程度長時間」の調整をキャプチャします。 |
|制限メカニズム  |時計調整 TimeAdjustmentAuditThreshold の下のすべて (min, 000, 000、既定の 128 の一部を = = あたり 800 一部, 000, 000) は記録されません。<br><br>2 枚の変更を現在の細分性でのクロック周波数では、クロックの精度で 120 µsec 1 秒あたりの変更を生成します。<br><br>同期されたシステムでは、調整の大半がこのレベル下回っています。 さらに細かくする場合、追跡をこの設定を調整することができます PerfCounters を使用するまたは両方を行うことができます。 |

# <a name="263tab263"></a>[263](#tab/263)

|||
|---|---|
|イベントの説明 |タイム サービスの設定または読み込まれたタイム プロバイダの一覧に変更します。 |
|詳細 |W32time 設定を再読み込みすると、特定の重要な設定に変更されたメモリ内、時間の同期の全体的な精度に影響を与える可能性があります。<br><br>W32time は、時刻の同期に潜在的な影響をその設定を再度読み取ることと、出現するたびを記録します。 |
|制限メカニズム  |なし。<br><br>GP の更新がタイム プロバイダーを変更し、W32time をトリガーして、または管理者場合にのみこのイベントが発生します。 各インスタンスの設定の変更を記録します。 |


# <a name="264tab264"></a>[264](#tab/264)

|||
|---|---|
|イベントの説明 |NTP クライアントで使用されるタイム ソースの変更します。 |
|詳細 |NTP クライアントは、時間のサーバーまたはピアの状態が変更されたときに時間のサーバーまたはピアの現在の状態とイベントを記録 (**保留中の同期]-> [** 、**同期]-> [到達不能**、または他の遷移) |
|制限メカニズム  |最大頻度 – 一時的な問題や不適切なプロバイダーの実装からログを保護するのには 5 分に 1 回だけです。 |

# <a name="265tab265"></a>[265](#tab/265)

|||
|---|---|
|イベントの説明 |タイム サービス ソースまたは階層番号の変更 |
|詳細 |W32time タイム ソースと階層数は、時間追跡機能で重要な要素と、これらの変更をログに記録する必要があります。 W32time が時間のソースを持たない、信頼性の高いタイム ソースとして構成していない場合は、タイム サーバーとしてアドバタイズを停止し、設計では、無効なパラメーターとパラメーターを要求に応答します。 このイベントは、NTP、トポロジの状態の変化を追跡するために重要です。 |
|制限メカニズム  |なし。 |


# <a name="266tab266"></a>[266](#tab/266)

|||
|---|---|
|イベントの説明 |時間の再同期が要求されます。 |
|詳細 |この操作がトリガーされます。<ul><li>ネットワークの変更が発生した場合</li><li>システムがコネクテッド スタンバイと休止状態から返されます</li><li>時間の長い同期していない場合</li><li>管理者は、再同期コマンドを発行します。</li></ul>そのフィルターをクリアする NTP クライアントが発生するため、この演算の結果は詳細な時刻同期の精度の直接的な損失。 |
|制限メカニズム  |最大頻度 - 5 分ごとに 1 回です。<br><br>不適切なネットワーク カード (または不適切なスクリプト) ことができますこの操作を繰り返しトリガー、発生するログを取得する処理能力を超えてことができます。 そのため、このイベントを調整する必要があります。<br><br>正確な時刻の同期にかかるよりはるかに 5 分を実現することと、調整は、時刻の精度の損失を発生させた元のイベントに関する情報を失われません。  |

---
