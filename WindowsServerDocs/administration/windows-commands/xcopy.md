---
title: xcopy
description: 'Windows コマンド」のトピック * * *- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 76a310d7-9925-4571-a252-0e28960d5f89
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 01/05/2019
ms.openlocfilehash: 54697b1c967d3e21583977418383d5a372e6f5d4
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59859403"
---
# <a name="xcopy"></a>xcopy



ファイルをコピーし、ディレクトリ、サブディレクトリを含む

このコマンドを使用する方法の例については、次を参照してください[例。](xcopy.md#BKMK_examples)

## <a name="syntax"></a>構文

```
Xcopy <Source> [<Destination>] [/w] [/p] [/c] [/v] [/q] [/f] [/l] [/g] [/d [:MM-DD-YYYY]] [/u] [/i] [/s [/e]] [/t] [/k] [/r] [/h] [{/a | /m}] [/n] [/o] [/x] [/exclude:FileName1[+[FileName2]][+[FileName3]] [{/y | /-y}] [/z] [/b] [/j]
```

## <a name="parameters"></a>パラメーター

|パラメーター|説明|
|---------|-----------|
|\<ソース >|必須。 コピーするファイルの名前と場所を指定します。 このパラメーターには、ドライブまたはパスを含める必要があります。|
|[\<先 >]|コピーするファイルのコピー先を指定します。 このパラメーターには、ドライブ文字とコロン、ディレクトリ名、ファイル名、またはこれらの組み合わせを含めることができます。|
|/w|次のメッセージが表示され、ファイルのコピーを開始する前に、応答を待機します。</br>**ファイルのコピーを開始する任意のキーを押します**|
|/p|各変換先ファイルを作成するかどうかを確認するように求められます。|
|/c|エラーを無視します。|
|/v|先のファイルがソース ファイルと同じであることを確認する対象ファイルに書き込まれると、各ファイルを確認します。|
|/q|表示しません**xcopy**メッセージ。|
|/f|コピー中にソースとコピー先のファイル名が表示されます。|
|/l|コピーされるファイルの一覧が表示されます。|
|/g|復号化された作成*先*ファイル変換先は暗号化をサポートしていない場合。|
|/d [: 年-月-日]|元ののみ、指定した日付以降に変更されたファイルをコピーします。 含めない場合、*年-月-日*値、 **xcopy**すべてコピー*ソース*既存のより新しいファイル*先*ファイル。 このコマンド ライン オプションを使用して、変更されたファイルを更新できます。|
|/u|ファイルからコピー*ソース*上に存在する*先*のみです。|
|/i|場合*ソース*ディレクトリまたはワイルドカードが含まれていますと*先*が存在しない**xcopy**前提としています*先*を指定します、ディレクトリ名を新しいディレクトリを作成します。 次に、 **xcopy**新しいディレクトリに指定したすべてのファイルをコピーします。 既定では、 **xcopy**を指定するように求められますかどうか*先*が、ファイルまたはディレクトリ。|
|/s|空でない限り、ディレクトリとサブディレクトリをコピーします。 省略した場合 **/s**、 **xcopy**は 1 つのディレクトリ内で動作します。|
|/e|空である場合でも、すべてのサブディレクトリをコピーします。 使用 **/e**で、 **/s**と **/t**コマンド ライン オプション。|
|/t|サブディレクトリの構造 (つまり、ツリー) のみ、いないファイルをコピーします。 空のディレクトリにコピーする必要があります、 **/e**コマンド ライン オプション。|
|/k|ファイルをコピーし、読み取り専用属性を保持*先*ファイル上に存在する場合、*ソース*ファイル。 既定では、 **xcopy**読み取り専用属性を削除します。|
|/r|読み取り専用ファイルをコピーします。|
|/h|ファイルをコピーで非表示にしてシステム ファイル属性。 既定では、 **xcopy**は非表示にコピーしないデータまたはシステム ファイル|
|/a|コピーのみ*ソース*アーカイブのファイルのファイル属性のセット。 **/a**ソース ファイルのアーカイブ ファイルの属性を変更しません。 使用して、アーカイブ ファイルの属性を設定する方法については**attrib**を参照してください[その他の参照](xcopy.md#BKMK_addref)します。|
|/m|コピー*ソース*アーカイブのファイルのファイル属性のセット。 異なり **/a**、 **/m**ソースで指定されているファイルのアーカイブ ファイル属性をオフにします。 使用して、アーカイブ ファイルの属性を設定する方法については**attrib**を参照してください[その他の参照](xcopy.md#BKMK_addref)します。|
|/n|NTFS の短いファイルまたはディレクトリ名を使用してコピーを作成します。 **/n**ファイルをコピーまたは FAT ボリュームのディレクトリ、NTFS ボリュームからまたは FAT ファイル システムの名前付け規則 (つまり、8.3 文字) が必要な場合に必要です、*先*ファイル システム。 *先*FAT または NTFS ファイル システムを指定できます。|
|/o|ファイルの所有権と随意アクセス制御リスト (DACL) の情報をコピーします。|
|/x|ファイル監査の設定とシステム アクセス制御リスト (SACL) の情報をコピー (意味 **/o**)。|
|/exclude:FileName1[+[FileName2][+[FileName3]( \)]|ファイルの一覧を指定します。 少なくとも 1 つのファイルを指定する必要があります。 各ファイル、ファイル内の個別の行には、各文字列で検索文字列が含まれます。</br>文字列には、コピーするファイルの絶対パスの任意の部分が一致すると、そのファイルがコピーされない excuded になります。 たとえば、文字列を指定する**obj**ディレクトリの下にあるすべてのファイルを除外**obj**またはすべてのファイルで、 **.obj**拡張機能。|
|/y|既存の変換先ファイルを上書きすることを確認するプロンプトを表示しません。|
|/y|既存の変換先ファイルを上書きすることを確認するメッセージが表示されます。|
|/z|再起動可能モードでのネットワーク経由でコピーします。|
|/b|ファイルではなく、シンボリック リンクをコピーします。 このパラメーターは、Windows Vista® で導入されました。|
|/j|バッファリングせずにファイルをコピーします。 非常に大きなファイルをお勧めします。 このパラメーターは、Windows Server 2008 R2 で追加されました。|
|/?|コマンド プロンプトにヘルプを表示します。|

## <a name="remarks"></a>注釈

-   使用して **/z**

    (たとえば、接続を提供しているサーバーがオフラインになった場合など) のコピー フェーズ中に、接続を紛失した場合、接続を再確立した後に再開します。 **/z**もファイルごとに完了したコピー操作の割合が表示されます。
-   使用して **/y** /z でします。

    使用することができます **/y** /z でします。 このコマンドを使用してオーバーライドすることができます **/y**コマンド行にします。 既定では、上書きするように求められます。
-   暗号化されたファイルのコピー

    暗号化されたファイルをエラーで efs をサポートしていないボリュームにコピーします。 まず、ファイルを復号化または EFS をサポートしているボリュームにファイルをコピーします。
-   ファイルを追加します。

    ファイルを追加する先の 1 つのファイルが複数のファイルに指定 (つまりを使用してワイルドカードまたは file1 + file2、file3 形式)。
-   既定値*変換先*

    省略した場合*先*、 **xcopy**コマンドは、現在のディレクトリにファイルをコピーします。
-   指定するかどうか*先*ファイルまたはディレクトリには

    場合*先*既存のディレクトリが含まれていないと、円記号が付いていません (\)、次のメッセージが表示されます。  
    ```
    Does <Destination> specify a file name or directory name on the target(F = file, D = directory)?
    ```  
    ファイルまたはファイルにコピーするファイルの場合、F キーを押します。 ファイルまたはディレクトリにコピーするファイルの場合、D キーを押します。

    使用してこのメッセージを抑制することができます、 **/i**これにより、コマンド ライン オプション**xcopy**ソースが 1 つ以上のファイルまたはディレクトリの場合は、セルのコピー先ディレクトリを想定します。
-   使用して、 **xcopy**アーカイブ属性を設定するコマンド*先*ファイル

    **Xcopy**コマンドは、この属性は、ソース ファイルで設定されているかどうかを示す、アーカイブ属性が設定ファイルを作成します。 ファイル属性の詳細については、 **attrib**を参照してください[その他の参照](xcopy.md#BKMK_addref)します。
-   比較する**xcopy**と**機能**

    別の形式を持つサブディレクトリ内のファイルを含むディスクがあるし、ディスクにコピーする場合、使用、 **xcopy**コマンドの代わりに**機能**します。 **機能**コマンドは、トラックごとのディスクをコピーしてから、元と変換先のディスクは、同じ形式である必要があります。 **Xcopy**コマンドには、この要件はありません。 使用**xcopy**しない限り、完全なディスク イメージをコピーする必要があります。
-   終了コードを**xcopy**

    によって返される終了コードを処理する**xcopy**を使用して、 **ErrorLevel**上のパラメーター、**場合**バッチ プログラム内でコマンドライン。 終了を使用してコードを処理するバッチ ファイルの例については**場合**を参照してください[その他の参照](xcopy.md#BKMK_addref)します。 次の表は、終了コードと説明を示します。  
    |終了コード|説明|
    |---------|-----------|
    |0|エラーが発生せず、ファイルがコピーされました。|
    |1|コピーするファイルが見つかりませんでした。|
    |2|ユーザーが終了するには、CTRL + C を押した**xcopy**します。|
    |4|初期化エラーが発生しました。 十分なメモリまたはディスク領域がないか、コマンドラインで、無効なドライブの名前または無効な構文を入力します。|
    |5|ディスクの書き込みエラーが発生しました。|

## <a name="BKMK_examples"></a>例

**1.** ドライブ A から B ドライブに、すべてのファイルとサブディレクトリ (空のサブディレクトリを含む) をコピーするに次のように入力します。
```
xcopy a: b: /s /e 
```
**2.** 前の例では、システムまたは非表示ファイルを含めるには追加、**/h**コマンド ライン オプションとして、次のとおりです。
```
xcopy a: b: /s /e /h
```
**3.** 1993 年 12 月 29 日以降に変更された \Rawdata ディレクトリ内のファイルで \Reports ディレクトリ内のファイルを更新するには、次のように入力します。
```
xcopy \rawdata \reports /d:12-29-1993
```
**4.** 前の例で、日付に関係なく \Reports 内に存在するすべてのファイルを更新するには、次のように入力します。
```
xcopy \rawdata \reports /u
```
**5.** 前のコマンドでコピーするファイルの一覧を取得する (つまり、実際には、ファイルをコピーすることがなく)、型。
```
xcopy \rawdata \reports /d:12-29-1993 /l > xcopy.out
```
ファイル xcopy.out では、すべてのファイルのコピーを一覧表示します。

**6.** \Customer ディレクトリとすべてのサブディレクトリをディレクトリにコピーする\\\\ネットワーク上の Public\Address ドライブ H、読み取り専用属性を保持し、h: 型の新しいファイルが作成されるときに入力を求め。
```
xcopy \customer h:\public\address /s /e /k /p
```
**7.** 前のコマンドを発行することを確認します**xcopy**はありませんが存在し、新しいディレクトリを作成するときに表示されるメッセージを抑制する場合、\Address ディレクトリが作成を追加、 **/i**コマンドラインオプションとしては、次のようにします。
```
xcopy \customer h:\public\address /s /e /k /p /i
```
**8.** 実行するバッチ プログラムを作成することができます**xcopy**操作と、batch を使用して**場合**コマンドが、エラーが発生した場合は、終了コードを処理します。 たとえば、次のバッチ プログラムがの置き換え可能パラメーターを使用して、 **xcopy**ソースおよびターゲットのパラメーター。
```
@echo off
rem COPYIT.BAT transfers all files in all subdirectories of
rem the source drive or directory (%1) to the destination
rem drive or directory (%2)
xcopy %1 %2 /s /e
if errorlevel 4 goto lowmemory
if errorlevel 2 goto abort
if errorlevel 0 goto exit
:lowmemory
echo Insufficient memory to copy files or
echo invalid drive or command-line syntax.
goto exit
:abort
echo You pressed CTRL+C to end the copy operation.
goto exit
:exit 
```
前のバッチ プログラムを使用すると、ドライブ B C:\Prgmcode ディレクトリとそのサブディレクトリ内のすべてのファイルをコピーして、次のように入力します。
```
copyit c:\prgmcode b:
```
コマンド インタープリターの代用**C:\Prgmcode**の *%1*と**b:** の *%2*を使用して、 **xcopy**で、 **/e**と **/s**コマンド ライン オプション。 場合**xcopy**エラー検出すると、バッチ プログラムは終了コードを読むし、適切なで示されたラベルに**場合 ERRORLEVEL**ステートメントでは、:、適切なメッセージを表示しを終了し、バッチ プログラム。

**9.** この例はすべて、空でないディレクトリ、および記号のアスタリスクで指定されたパターンに一致する名前を持つファイル。
```
xcopy .\toc*.yml ..\..\Copy-To\ /S /Y

rem Output example.
rem  .\d1\toc.yml
rem  .\d1\d12\toc.yml
rem  .\d2\toc.yml
rem  3 File(s) copied
```
前の例では、この特定のソース パラメーターの値で **.\\toc\*.yml**同じ場合の 3 つのファイルでもその 2 つのパスの文字をコピー **.\\**が削除されました。 ただし、ファイルはコピーされませんアスタリスクのワイルドカードはだけですので、ソース パラメーターから削除された場合 **.\\toc.yml**します。

#### <a name="BKMK_addref"></a>その他の参照

-   [コピー](copy.md)
-   [Move](move.md)
-   [dir](dir.md)
-   [Attrib](attrib.md)
-   [機能](diskcopy.md)
-   [もし](if.md)
-   [コマンドライン構文キー](command-line-syntax-key.md)
