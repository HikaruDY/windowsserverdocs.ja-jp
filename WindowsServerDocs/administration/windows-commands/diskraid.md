---
title: diskraid
description: 'Windows コマンド」のトピック * * *- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 20aef1e5-7641-47cf-b4eb-cda117f65b6e
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 7ebd65fb56114bff9e6ae4b6a76376561c686dfa
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/31/2019
ms.locfileid: "66439567"
---
# <a name="diskraid"></a>diskraid



DiskRAID は、コマンド ライン ツールを構成して、独立した (または安価な) disks (RAID) 記憶域サブシステムの冗長アレイを管理することができます。

RAID は、標準化およびフォールト トレラントなディスク システムの分類に使用されるメソッドです。 RAID レベルでは、パフォーマンス、信頼性、およびコストのさまざまなミックスを指定します。 RAID は通常、サーバー上で使用されます。 いくつかのサーバーは、3 つの RAID レベルを提供します。レベル 0 (ストライピング)、レベル 1 (ミラー)、およびレベル 5 (パリティ付きストライプ化) します。

ハードウェア RAID サブシステムは、論理ユニット番号 (LUN) を使用して互いに物理的にアドレス指定可能な記憶域ユニットを区別します。 LUN オブジェクトは、少なくとも 1 つのプレックス必要があり、追加プレックスの任意の数を持つことができます。 各プレックスには、LUN オブジェクト上のデータのコピーが含まれています。 プレックスに追加され、LUN オブジェクトから削除することができます。

ほとんどの DiskRAID コマンドは、特定のホスト バス アダプター (HBA) ポート、イニシエーター アダプター、発信側ポータル、プロバイダー、サブシステム、コント ローラー、ポート、ドライブ、LUN、ターゲット ポータル、ターゲット、またはターゲット ポータルのグループを操作します。 オブジェクトを選択するのにには、SELECT コマンドを使用します。 選択したオブジェクトは、フォーカスがあると言います。 フォーカスは、同じサブシステム内で複数の Lun を作成するなどの一般的な構成タスクを簡略化します。

> [!NOTE]
> DiskRAID コマンド ライン ツールは、仮想ディスク サービス (VDS) をサポートする記憶域サブシステムでのみ動作します。

## <a name="diskraid-commands"></a>DiskRAID コマンド

コマンドの構文を表示するには、コマンドをクリックします。
-   [add](#BKMK_1)
-   [associate](#BKMK_2)
-   [オート マジック](#BKMK_3)
-   [break](#BKMK_4)
-   [chap](#BKMK_5)
-   [create](#BKMK_6)
-   [delete](#BKMK_7)
-   [詳細](#BKMK_8)
-   [dissociate](#BKMK_9)
-   [exit](#BKMK_10)
-   [extend](#BKMK_11)
-   [flushcache](#BKMK_12)
-   [help](#BKMK_13)
-   [importtarget](#BKMK_14)
-   [イニシエーター](#BKMK_15)
-   [invalidatecache](#BKMK_16)
-   [lbpolicy](#BKMK_18)
-   [list](#BKMK_19)
-   [login](#BKMK_20)
-   [logout](#BKMK_21)
-   [メンテナンス](#BKMK_22)
-   [name](#BKMK_23)
-   [オフライン](#BKMK_24)
-   [オンライン](#BKMK_25)
-   [recover](#BKMK_26)
-   [再列挙します。](#BKMK_27)
-   [refresh](#BKMK_28)
-   [rem](#BKMK_29)
-   [remove](#BKMK_30)
-   [replace](#BKMK_31)
-   [reset](#BKMK_32)
-   [select](#BKMK_33)
-   [setflag](#BKMK_34)
-   [縮小](#BKMK_shrink)
-   [standby](#BKMK_35)
-   [unmask](#BKMK_36)

### <a name="BKMK_1"></a>追加します。

現在選択されている LUN に既存の LUN を追加するか、iSCSI ターゲット ポータルを現在選択されている iSCSI ターゲット ポータルのグループに追加します。

#### <a name="syntax"></a>構文

```
add plex lun=n [noerr]
add tpgroup tportal=n [noerr]
```

#### <a name="parameters"></a>パラメーター

**プレックス lun**=*n*

現在選択されている LUN にプレックスとして追加する LUN 番号を指定します。

> [!CAUTION]
> プレックスとして追加されている LUN 上のすべてのデータは削除されます。

**tpgroup tportal =** <em>n</em>

現在選択されている iSCSI ターゲット ポータル グループに追加するには、iSCSI ターゲット ポータル番号を指定します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

### <a name="BKMK_2"></a>関連付ける

現在選択されている lun (その他のコント ローラーのポートを無効になりましたが)、アクティブとして指定したコント ローラーの一覧のポートを設定または、現在選択されている LUN の既存のアクティブなコント ローラーのポートの一覧に指定されたコント ローラーのポートを追加または関連付けます、現在選択されている LUN の指定された iSCSI ターゲット。

#### <a name="syntax"></a>構文

```
associate controllers [add] <n>[,<n> [,…]]
associate ports [add] <n-m>[,<n-m>[,…]]
associate targets [add] <n>[,<n> [,…]]
```

#### <a name="parameters"></a>パラメーター

**コント ローラー**

VDS 1.0 プロバイダーのみで使用します。 追加するか、現在選択されている LUN に関連付けられているコント ローラーの一覧を置き換えます。

**ポート**

VDS 1.1 プロバイダーのみで使用します。 追加するか、現在選択されている LUN に関連付けられているコント ローラーのポートの一覧を置き換えます。

**ターゲット**

VDS 1.1 プロバイダーのみで使用します。 追加するか、現在選択されている LUN に関連付けられている iSCSI ターゲットの一覧を置き換えます。

**add**

VDS 1.0 プロバイダーは、指定されたコント ローラーを既存の LUN に関連付けられているコント ローラーの一覧に追加します。 このパラメーターが指定されていない場合、コント ローラーの一覧には、この LUN に関連付けられているコント ローラーの既存の一覧が置き換えられます。

VDS 1.1 プロバイダーは、指定されたコント ローラー ポートを既存の LUN に関連付けられているコント ローラーのポートの一覧に追加します。 このパラメーターが指定されていない場合、コント ローラーのポートの一覧には、この LUN に関連付けられているコント ローラーのポートの既存の一覧が置き換えられます。
```
<n>[,<n> [, ...]]
```
使用するため、**コント ローラー**または**ターゲット**パラメーター。 コント ローラーまたは active または関連付けに設定する iSCSI ターゲットの数を指定します。
```
<n-m>[,<n-m>[,…]]
```
使用するため、**ポート**パラメーター。 アクティブ コント ローラーの番号を使用して設定するコント ローラー ポートを指定します (*n*) とポート番号 (*m*) のペア。

#### <a name="example"></a>例

次の例では、関連付け、VDS 1.1 プロバイダーを使用して LUN にポートを追加する方法を示します。
```
DISKRAID> SEL LUN 5
LUN 5 is now the selected LUN.

DISKRAID> ASSOCIATE PORTS 0-0,0-1
Controller port associations changed.
(Controller ports active after this command: Ctlr 0 Port 0, Ctlr 0 Port 1)

DISKRAID> ASSOCIATE PORTS ADD 1-1
Controller port associations changed.
(Controller ports active after this command: Ctlr 0 Port 0, Ctlr 0 Port 1, Ctlr 1 Port 1)
```

### <a name="BKMK_3"></a>オート マジック

設定または LUN を構成する方法のプロバイダーにヒントを与えたりするフラグをクリアします。 パラメーターなしで使用される、**オート マジック**操作フラグの一覧を表示します。

#### <a name="syntax"></a>構文

```
automagic {set | clear | apply} all <flag=value> [<flag=value> [...]]
```

#### <a name="parameters"></a>パラメーター

**set**

指定した値に指定したフラグを設定します。

**オフ**

指定したフラグをクリアします。 **すべて**キーワードは、すべてのオート マジック フラグをクリアします。

**適用します。**

選択した LUN には、現在のフラグを適用します。

\<フラグ >

フラグは、3 文字の頭字語によって識別されます。

|Flag|説明|
|----|-----------|
|FCR|高速クラッシュ復旧が必要な|
|FTL|フォールト トレランス|
|MSR|ほとんどの場合の読み取り|
|MXD|最大のドライブ|
|MXS|最大サイズが必要です。|
|または|最適な読み取りの配置|
|OR|最適な読み取りサイズ|
|OSR|順次読み取り用に最適化します。|
|OSW|順次書き込みを最適化します。|
|OWA|最適な書き込みの配置|
|O|最適な書き込みサイズ|
|RBP|優先順位を再構築します。|
|RBV|読み取りに戻すことを確認有効になっています。|
|RMP|有効になっているリマップ|
|STS|ストライプ サイズ|
|WTC|ライト スルー キャッシュが有効に|
|YNK|リムーバブル|

### <a name="BKMK_4"></a>break

現在選択されている LUN からプレックスを削除します。 プレックスとそれに含まれるデータは保持されません、およびドライブのエクステントが解放される可能性があります。

#### <a name="syntax"></a>構文

```
break plex=<plex_number> [noerr]
```

#### <a name="parameters"></a>パラメーター

**plex**

削除するプレックスの数を指定します。 プレックスとそれに含まれるデータは維持されず、このプレックスによって使用されるリソースが解放されます。 LUN 上に含まれるデータは、一貫性は保証されません。 このプレックスを保持する場合は、ボリューム シャドウ コピー サービス (VSS) を使用します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

#### <a name="remarks"></a>注釈

> [!NOTE]
> 使用する前に、ミラー化された LUN を選択する必要があります最初、 **break**コマンド。

> [!CAUTION]
> プレックス上のすべてのデータは削除されます。

> [!CAUTION]
> 元の LUN に含まれるすべてのデータは、一貫性は保証されません。

### <a name="BKMK_5"></a>chap

チャレンジ ハンドシェイク認証プロトコル (CHAP) が共有は、iSCSI イニシエーターと iSCSI ターゲットが互いに通信できるようにシークレットを設定します。

#### <a name="syntax"></a>構文

```
chap initiator set secret=[<secret>] [target=<target>]
chap initiator remember secret=[<secret>] target=<target>
chap target set secret=[<secret>] [initiator=<initiatorname>]
chap target remember secret=[<secret>] initiator=<initiatorname>
```

#### <a name="parameters"></a>パラメーター

**イニシエーター セット**

ローカル iSCSI イニシエーター サービスがイニシエーターがターゲットを認証するときに、相互 CHAP 認証の使用では、共有シークレットを設定します。

**発信側に注意してください。**

発信側サービス自体を CHAP 認証時にターゲットを認証するために、シークレットを使用できるように、iSCSI ターゲットにローカル iSCSI イニシエーター サービスの CHAP シークレットを通信します。

**対象セット**

ターゲットがイニシエーターを認証するときに、CHAP 認証の使用、現在選択されている iSCSI ターゲット共有シークレットを設定します。

**ターゲットに注意してください。**

ターゲットは、相互 CHAP 認証中に、発信側に自身を認証するために、シークレットを使用できるように、現在フォーカスの iSCSI ターゲットに iSCSI イニシエーターの CHAP シークレットを通信します。

**secret**

使用するシークレットを指定します。 空の場合、シークレットはクリアされます。

**ターゲット**

現在選択されているサブシステムにシークレットを関連付けるターゲットを指定します。 これは、イニシエーターのシークレットを設定するときに省略可能なと、関連付けられているシークレットがないすべてのターゲットのシークレットが使用されることを除外することを示します。

**initiatorname**

シークレットと関連付ける iSCSI イニシエーター名を指定します。 これは、ターゲットにシークレットを設定するときに省略可能なと、関連付けられているシークレットがないすべてのイニシエーターのシークレットが使用されることを除外することを示します。

### <a name="BKMK_6"></a>作成します。

現在選択されているサブシステムで、新しい LUN または iSCSI ターゲットを作成するか、現在選択されているターゲットにターゲット ポータルのグループを作成します。 実際のバインドを使用して、表示することができます、 **DiskRAID 一覧**コマンド。

#### <a name="syntax"></a>構文

```
create lun simple [size=<n>] [drives=<n>] [noerr]
create lun stripe [size=<n>] [drives=<n, n> [,...]]  [stripesize=<n>] [noerr]
create lun raid [size=<n>] [drives=<n, n> [,...]] [stripesize=<n>] [noerr]
create lun mirror [size=<n>] [drives=<n, n> [,...]] [stripesize=<n>] [noerr]
create lun automagic size=<n> [noerr]
create target name=<name> [iscsiname=<iscsiname>] [noerr]
create tpgroup [noerr]
```

#### <a name="parameter"></a>パラメーター

**単純です**

単純な LUN を作成します。

**stripe**

ストライプ LUN を作成します。

**RAID**

パリティ付きストライプ LUN を作成します。

**mirror**

ミラー化された LUN を作成します。

**オート マジック**

LUN を使用して作成、*オート マジック*ヒント現時点で有効にします。 参照してください、**オート マジック**詳細については、サブ コマンド。

**サイズ**=

LUN の合計サイズをメガバイト単位で指定します。 場合、**サイズ =** パラメーターが指定されていないと、LUN が作成されましたが、指定したドライブをすべてで許可されている最大の可能なサイズになります。

プロバイダーを通常 LUN を作成、要求されたサイズ以上の容量が、プロバイダーは、場合によっては [次へ] の最大サイズに切り上げる必要があります。 たとえば、.99 GB、プロバイダーでは、GB のディスクのエクステントを割り当てることができますのみサイズが指定されて場合、結果として得られる LUN は、1 GB をなります。

その他の単位を使用してサイズを指定するには、サイズ後すぐに認識されているサフィックスを次のいずれかを使用します。
-   **B**バイト。
-   **KB**キロバイトの。
-   **MB**メガバイトの。
-   **GB**ギガバイトにします。
-   **TB**テラバイトです。
-   **PB**ペタバイトにします。

**ドライブ**=

指定します、 *drive_number*を使用して LUN を作成するドライブ。 場合、**サイズ =** パラメーターが指定されていない、作成された LUN は、指定したすべてのドライブで許容される最大の可能なサイズ。 場合、**サイズ =** パラメーターを指定すると、プロバイダーは、LUN を作成する指定したドライブの一覧からドライブを選択します。 プロバイダーは可能な場合に指定された順序で、ドライブを使用しようとします。

**stripesize**=

サイズをメガバイト単位で指定、*ストライプ*または*RAID* LUN。 LUN を作成した後、stripesize は変更できません。

その他の単位を使用してサイズを指定するには、サイズ後すぐに認識されているサフィックスを次のいずれかを使用します。
-   **B**バイト。
-   **KB**キロバイトの。
-   **MB**メガバイトの。
-   **GB**ギガバイトにします。
-   **TB**テラバイトです。
-   **PB**ペタバイトにします。

**ターゲット**

現在選択されているサブシステムには、新しい iSCSI ターゲットを作成します。

**name**

ターゲットのフレンドリ名を提供します。

**iscsiname**

装置、iSCSI ターゲットの名前し、プロバイダーが省略可能では、名前を生成します。

**tpgroup**

現在選択されているターゲットには、新しい iSCSI ターゲット ポータル グループを作成します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

#### <a name="remarks"></a>注釈

-   いずれか、**サイズ**= または**ドライブ**= パラメーターを指定する必要があります。 同時使用することができますも。
-   LUN のストライプ サイズは、作成後に変更できません。

### <a name="BKMK_7"></a>Delete

現在選択されている LUN を iSCSI target (iSCSI ターゲットに関連付けられているない Lun がある限り) または iSCSI ターゲット ポータルのグループを削除します。

#### <a name="syntax"></a>構文

```
delete lun [uninstall] [noerr]
delete target [noerr]
delete tpgroup [noerr]
```

#### <a name="parameters"></a>パラメーター

**lun**

現在選択されている LUN、およびすべてのデータを削除します。

**アンインストールします。**

LUN が削除される前に、LUN に関連付けられているローカル システム上のディスク クリーニングされることを指定します。

**ターゲット**

ターゲットと関連付けられている Lun が存在しない場合は、現在選択されている iSCSI ターゲットを削除します。

**tpgroup**

現在選択されている iSCSI ターゲット ポータル グループを削除します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

### <a name="BKMK_8"></a>詳細

指定した型の現在選択されているオブジェクトに関する詳細な情報を表示します。

#### <a name="syntax"></a>構文

```
Detail {hbaport | iadapter | iportal | provider | subsystem | controller | port | drive | lun | tportal | target | tpgroup} [verbose]
```

#### <a name="parameters"></a>パラメーター

**hbaport**

現在選択されているホスト バス アダプター (HBA) ポートに関する詳細な情報を一覧表示します。

**iadapter**

現在選択されている iSCSI イニシエーター アダプターに関する詳細な情報を一覧表示します。

**iportal**

現在選択されている iSCSI イニシエーターのポータルに関する詳細な情報を一覧表示します。

**provider**

現在選択されているプロバイダーに関する詳細な情報を一覧表示します。

**subsystem**

現在選択されているサブシステムに関する詳細な情報を一覧表示します。

**コント ローラー**

現在選択されているコント ローラーに関する詳細な情報を一覧表示します。

**ポート**

現在選択されているコント ローラー ポートに関する詳細な情報を一覧表示します。

**ドライブ**

占有している Lun を含む、現在選択されているドライブに関する詳細な情報を一覧表示します。

**lun**

ドライブを投稿を含む、現在選択されている LUN に関する詳細な情報を一覧表示します。 出力は、LUN のファイバー チャネルまたは iSCSI サブシステムの一部があるかによって若干異なります。 マスクされていないホストの一覧に、アスタリスクのみが含まれている場合は、LUN がすべてのホストにマスクされていないことを意味します。

**tportal**

現在選択されている iSCSI ターゲット ポータルに関する詳細な情報を一覧表示します。

**ターゲット**

現在選択されている iSCSI ターゲットに関する詳細な情報を一覧表示します。

**tpgroup**

現在選択されている iSCSI ターゲット ポータル グループに関する詳細な情報を一覧表示します。

**verbose**

LUN のパラメーターでのみ使用します。 詳細については、そのプレックスを含むを一覧表示します。

### <a name="BKMK_9"></a>関連付けを解除します。

セットは、現在選択されている lun (その他のコント ローラー ポートには影響しません)、非アクティブとしてコント ローラーのポートの一覧を指定または現在選択されている LUN を iSCSI ターゲットの指定されたリストの関連付けを解除します。

#### <a name="syntax"></a>構文

```
dissociate controllers <n> [,<n> [,...]]
dissociate ports <n-m>[,<n-m>[,…]]
dissociate targets <n> [,<n> [,…]]
```

#### <a name="parameter"></a>パラメーター

**コント ローラー**

VDS 1.0 プロバイダーのみで使用します。 現在選択されている LUN に関連付けられているコント ローラーの一覧から、コント ローラーを削除します。

**ポート**

VDS 1.1 プロバイダーのみで使用します。 現在選択されている LUN に関連付けられているコント ローラーのポートの一覧から、コント ローラーのポートを削除します。

**ターゲット**

VDS 1.1 プロバイダーのみで使用します。 現在選択されている LUN に関連付けられている iSCSI ターゲットの一覧からターゲットを削除します。
```
<n> [,<n> [,…]]
```
使用するため、**コント ローラー**または**ターゲット**パラメーター。 コント ローラーまたは非アクティブとして設定または関連付けを解除する iSCSI ターゲットの数を指定します。
```
<n-m>[,<n-m>[,…]]
```
使用するため、**ポート**パラメーター。 コント ローラーの番号を使用して非アクティブとして設定するコント ローラー ポートを指定します (*n*) とポート番号 (*m*) のペア。

#### <a name="example"></a>例

```
DISKRAID> SEL LUN 5
LUN 5 is now the selected LUN.

DISKRAID> ASSOCIATE PORTS 0-0,0-1
Controller port associations changed.
(Controller ports active after this command: Ctlr 0 Port 0, Ctlr 0 Port 1)

DISKRAID> ASSOCIATE PORTS ADD 1-1
Controller port associations changed.
(Controller ports active after this command: Ctlr 0 Port 0, Ctlr 0 Port 1, Ctlr 1 Port 1)

DISKRAID> DISSOCIATE PORTS 0-0,1-1
Controller port associations changed.
(Controller ports active after this command: Ctlr 0 Port 1)
```

### <a name="BKMK_10"></a>終了

DiskRAID を終了します。

#### <a name="syntax"></a>構文

```
exit
```

### <a name="BKMK_11"></a>拡張

セクターを LUN の末尾に追加することで、現在選択されている LUN を拡張します。 すべてのプロバイダーは、Lun を拡張をサポートします。 すべてのボリュームまたは LUN 上に含まれているファイル システムは拡張されません。 使用して関連付けられているディスク上の構造を拡張する LUN を拡張した後必要があります、 **DiskPart 拡張**コマンド。

#### <a name="syntax"></a>構文

```
extend lun [size=<LUN_size>] [drives=<drive_number>, [<drive_number>, ...]] [noerr]
```

#### <a name="parameters"></a>パラメーター

**size=**

LUN を拡張するメガバイト単位でサイズを指定します。 場合、**サイズ =** パラメーターが指定されていない、指定したすべてのドライブで許容される最大の可能なサイズで、LUN が拡張されます。 場合、**サイズ =** パラメーターを指定すると、プロバイダーによって指定されたリストからドライブを選択して、**ドライブ =** LUN を作成するパラメーター。

その他の単位を使用してサイズを指定するには、サイズ後すぐに認識されているサフィックスを次のいずれかを使用します。
-   **B**バイト。
-   **KB**キロバイトの。
-   **MB**メガバイトの。
-   **GB**ギガバイトにします。
-   **TB**テラバイト
-   **PB**ペタバイトの

**drives=**

指定します、 \<drive_number > の LUN を作成するときに使用するドライブ。 場合、**サイズ =** パラメーターが指定されていない、作成された LUN は、指定したすべてのドライブで許容される最大の可能なサイズ。 プロバイダーは、可能な場合に指定された順序で、ドライブを使用します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

#### <a name="remarks"></a>注釈

いずれか、*サイズ*または\<ドライブ > パラメーターを指定する必要があります。 同時使用することができますも。

### <a name="BKMK_12"></a>flushcache

現在選択されているコント ローラー上のキャッシュをクリアします。

#### <a name="syntax"></a>構文

```
flushcache controller
```

### <a name="BKMK_13"></a>ヘルプ

すべての DiskRAID コマンドの一覧を表示します。

#### <a name="syntax"></a>構文

```
help
```

### <a name="BKMK_14"></a>importtarget

取得または現在選択されているサブシステムに設定されている現在のボリューム シャドウ コピー サービス (VSS) インポート ターゲットを設定します。

#### <a name="syntax"></a>構文

```
importtarget subsystem [set target]
```

#### <a name="parameter"></a>パラメーター

**セットのターゲット**

指定した場合は、現在選択されているターゲットを現在選択されているサブシステムの VSS インポート対象に設定します。 指定しない場合、コマンドは、現在選択されているサブシステムに設定されている現在の VSS インポート ターゲットを取得します。

### <a name="BKMK_15"></a>イニシエーター

ローカル iSCSI イニシエーターに関する情報を取得します。

#### <a name="syntax"></a>構文

```
initiator
```

### <a name="BKMK_16"></a>invalidatecache

現在選択されているコント ローラー上のキャッシュを無効にします。

#### <a name="syntax"></a>構文

```
invalidatecache controller
```

### <a name="BKMK_18"></a>lbpolicy

現在選択されている LUN 上の負荷分散ポリシーを設定します。

#### <a name="syntax"></a>構文

```
lbpolicy set lun type=<type> [paths=<path>-{primary | <weight>}[,<path>-{primary | <weight>}[,…]]]
lbpolicy set lun paths=<path>-{primary | <weight>}[,<path>-{primary | <weight>}[,…]]
```

#### <a name="parameters"></a>パラメーター

**type**

負荷分散ポリシーを指定します。 型が指定されていない場合、**パス**パラメーターを指定する必要があります。 型には、次のいずれかを指定できます。

**フェールオーバー**:バックアップ パスをされているその他のパスでは、1 つのプライマリ パスを使用します。

**ROUNDROBIN**:各パスを順番に試行するラウンド ロビン方式ですべてのパスを使用します。

**SUBSETROUNDROBIN**:すべてのプライマリ パスは、ラウンド ロビン方式です。バックアップ パスは、すべてのプライマリ パスが失敗した場合にのみ使用されます。

**DYNLQD**:パスを使用して、最も低いアクティブな要求の数。

**重み付け**:(各パス割り当てなければなりません、重み) から最も重みのパスが使用されます。

**LEASTBLOCKS**:最小ブロックでパスが使用されます。

**ベンダー固有**:ベンダー固有のポリシーを使用します。

**パス**

パスかどうかを指定**プライマリ**が特定のまたは\<重み >。 指定されていないすべてのパスは、バックアップとして暗黙的に設定されます。 表示されている任意のパスは、現在選択されている LUN のパスのいずれかを指定する必要があります。

### <a name="BKMK_19"></a>一覧

指定した型のオブジェクトの一覧が表示されます。

#### <a name="syntax"></a>構文

```
List {hbaports | iadapters | iportals | providers | subsystems | controllers | ports | drives | LUNs | tportals | targets | tpgroups}
```

#### <a name="parameters"></a>パラメーター

**hbaports**

VDS に既知のすべての HBA ポートに関する概要情報を一覧表示します。 現在選択されている、HBA ポートは、アスタリスク (*) でマークされます。

**iadapters**

VDS に既知のすべての iSCSI イニシエーター アダプターに関する概要情報を一覧表示します。 現在選択されているイニシエーター アダプターは、アスタリスク (*) でマークされます。

**iportals**

現在選択されているイニシエーター アダプター内のすべての iSCSI イニシエーター ポータルに関する概要情報を一覧表示します。 現在選択されているイニシエーター ポータルは、アスタリスク (*) でマークされます。

**providers**

VDS に既知の各プロバイダーに関する概要情報を一覧表示します。 現在選択されているプロバイダーは、アスタリスク (*) でマークされます。

**サブシステム**

システムでは、各サブシステムに関する概要情報を一覧表示されます。 現在選択されているサブシステムは、アスタリスク (*) でマークされます。

**コント ローラー**

現在選択されているサブシステムの各コント ローラーに関する概要情報を一覧表示します。 現在選択されているコント ローラーは、アスタリスク (*) でマークされます。

**ポート**

現在選択されているコント ローラーには、各コント ローラー ポートに関する概要情報を一覧表示します。 現在選択されているポートは、アスタリスク (*) でマークされます。

**ドライブ**

現在選択されているサブシステム内の各ドライブについての概要情報を一覧表示します。 現在選択されているドライブは、アスタリスク (*) でマークされます。

**lun**

現在選択されているサブシステム内の各 LUN に関する概要情報を一覧表示します。 現在選択されている LUN は、アスタリスク (*) でマークされます。

**tportals**

現在選択されているサブシステム内のすべての iSCSI ターゲット ポータルに関する概要情報を一覧表示します。 現在選択されているターゲット ポータルは、アスタリスク (*) でマークされます。

**ターゲット**

現在選択されているサブシステム内のすべての iSCSI ターゲットに関する概要情報を一覧表示します。 現在選択されているターゲットは、アスタリスク (*) でマークされます。

**tpgroups**

すべての iSCSI ターゲット ポータル グループで現在選択されているターゲットに関する概要情報を一覧表示します。 現在選択されているポータル グループは、アスタリスク (*) でマークされます。

### <a name="BKMK_20"></a>login

現在選択されている iSCSI ターゲットに指定された iSCSI イニシエーター アダプターを記録します。

#### <a name="syntax"></a>構文

```
login target iadapter=<iadapter> [type={manual | persistent | boot}] [chap={none | oneway | mutual}] [iportal=<iportal>] [tportal=<tportal>] [<flag> [<flag> […]]]
```

#### <a name="parameters"></a>パラメーター

**type**

実行するログインの種類を指定します:**手動**、**永続的な**、または**ブート**します。 指定しない場合、手動のログインが実行されます。

**手動**-ログイン手動でします。

**永続的な**- 自動的にコンピューターを再起動すると、同じログインを使用します。

**ブート**-(このオプションは将来の開発のため、現在使用されていない<em>.</em>)

**chap**

使用する CHAP 認証の種類を指定します: **none**、 **oneway** CHAP、または**相互**CHAP; 指定されていない場合、認証は使用できません。

**tportal**

ログインのために、現在選択されているサブシステムで、省略可能なターゲット ポータルを指定します。

**iportal**

省略可能なイニシエーターのポータルでログを使用する、指定したイニシエーター アダプターを指定します。

\<フラグ >

次の 3 つの文字の頭字語によって識別されます。

**IP**:IPsec が必要です。

**EMP**:マルチパスを有効にします。

**EHD**:ヘッダー ダイジェストを有効にします。

**EDD**:データ ダイジェストを有効にします。

### <a name="BKMK_21"></a>logout

現在選択されている iSCSI ターゲットから指定された iSCSI イニシエーター アダプターを記録します。

#### <a name="syntax"></a>構文

```
logout target iadapter= <iadapter>
```

#### <a name="parameters"></a>パラメーター

**iadapter**

ログイン セッションからログアウトするイニシエーター アダプターを指定します。

### <a name="BKMK_22"></a>メンテナンス

指定した型の現在選択されているオブジェクトのメンテナンス操作を実行します。

#### <a name="syntax"></a>構文

```
maintenance <object operation> [count=<iteration>]
```

#### <a name="parameters"></a>パラメーター

\<object>

操作を実行する対象となるオブジェクトの種類を指定します。 *オブジェクト*型できますを**サブシステム**、**コント ローラー**、**ポート、ドライブ**または**LUN**します。

\<operation>

実行するメンテナンス操作を指定します。 *操作*型できる**まま**、**スピンダウン**、**点滅**、**ビープ音を鳴らす**または**ping**. *操作*指定する必要があります。

**count=**

繰り返す回数を指定します、*操作*します。 これは通常使用**点滅**、**ビープ音を鳴らす**、または**ping**します。

### <a name="BKMK_23"></a>name

現在選択されているサブシステムや LUN を iSCSI ターゲットのフレンドリ名を指定した名前に設定します。

#### <a name="syntax"></a>構文

```
name {subsystem | lun | target} [<name>]
```

#### <a name="parameter"></a>パラメーター

\<name>

サブシステム、LUN、またはターゲットの名前を指定します。 名前は 64 文字未満の長さである必要があります。 名前が指定されていない場合、既存の名前、存在する場合は削除されます。

### <a name="BKMK_24"></a>オフライン

指定した型の現在選択されているオブジェクトの状態を設定**オフライン**します。

#### <a name="syntax"></a>構文

```
offline <object>
```

#### <a name="parameter"></a>パラメーター

\<object>

この操作を実行する対象となるオブジェクトの種類を指定します。 \<オブジェクト >

型は、**サブシステム**、**コント ローラー**、**ドライブ**、 **LUN**、または**tportal**します。

### <a name="BKMK_25"></a>オンライン

指定した型の選択したオブジェクトの状態を設定**オンライン**します。 オブジェクトがある場合**hbaport**、現在選択されている HBA ポートへのパスの状態を変更**オンライン**します。

#### <a name="syntax"></a>構文

```
online <object> 
```

#### <a name="parameter"></a>パラメーター

\<object>

この操作を実行する対象となるオブジェクトの種類を指定します。 \<オブジェクト >

型は、 **hbaport**、**サブシステム**、**コント ローラー**、**ドライブ**、 **LUN**、または**tportal**します。

### <a name="BKMK_26"></a>回復

現在選択されているフォールト トレラントの LUN を修復するなどの再同期またはホット スペアでは、必要に応じて、操作を実行します。 回復がバインドする、ホット スペアが発生するなど、失敗したディスクまたはその他のディスク エクステントの再配置が RAID セットにします。

#### <a name="syntax"></a>構文

```
recover <lun>
```

### <a name="BKMK_27"></a>再列挙します。

指定した型のオブジェクトが再度列挙します。 拡張 LUN のコマンドを使用する場合は、再列挙コマンドを使用する前にディスク サイズを更新する更新コマンドを使用する必要があります。

#### <a name="syntax"></a>構文

```
reenumerate {subsystems | drives}
```

#### <a name="parameters"></a>パラメーター

**サブシステム**

現在選択されているプロバイダーで追加された新しいサブシステムを検出するプロバイダーを照会します。

**ドライブ**

現在選択されているサブシステムで追加された新しいドライブを検出する内部 I/O バスを照会します。

### <a name="BKMK_28"></a>更新

現在選択されているプロバイダーの内部データを更新します。

#### <a name="syntax"></a>構文

```
refresh provider
```

### <a name="BKMK_29"></a>rem

コメントのスクリプトを使用します。

#### <a name="syntax"></a>構文

```
Rem <comment>
```

### <a name="BKMK_30"></a>削除します。

現在選択されているターゲット ポータル グループから、指定された iSCSI ターゲット ポータルを削除します。

#### <a name="syntax"></a>構文

```
remove tpgroup tportal=<tportal> [noerr]
```

#### <a name="parameter"></a>パラメーター

**tpgroup tportal=** \<tportal>

削除する iSCSI ターゲット ポータルを指定します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

### <a name="BKMK_31"></a>置換

指定したドライブを現在選択されているドライブに置き換えます。

#### <a name="syntax"></a>構文

```
replace drive=<drive_number>
```

#### <a name="parameter"></a>パラメーター

**drive=**

指定します、 \<drive_number > ドライブには置き換えられます。

#### <a name="remarks"></a>注釈

-   指定したドライブは、現在選択されているドライブをできない可能性があります。

### <a name="BKMK_32"></a>reset

現在選択されているコント ローラーまたはポートをリセットします。

#### <a name="syntax"></a>構文

```
Reset {controller | port}
```

#### <a name="parameters"></a>パラメーター

**コント ローラー**

コント ローラーをリセットします。

**ポート**

ポートをリセットします。

### <a name="BKMK_33"></a>選択します

表示または現在選択されているオブジェクトを変更します。

#### <a name="syntax"></a>構文

```
Select {hbaport | iadapter | iportal | provider | subsystem | controller | port | drive | lun | tportal | target | tpgroup } [<n>]
```

#### <a name="parameters"></a>パラメーター

**object**

選択するオブジェクトの種類を指定します。 \<オブジェクト > の種類を指定できます**プロバイダー**、**サブシステム**、**コント ローラー**、**ドライブ**、または**LUN**.

**hbaport** [\<n>]

指定されたローカルの HBA ポートにフォーカスを設定します。 HBA ポートが指定されていない場合、コマンドは、(ある場合)、現在選択されている HBA ポートを表示します。 フォーカスの HBA ポートがありません。 無効な HBA ポートのインデックスを指定することになります。 HBA ポートの選択には、発信側ポータル、選択されているイニシエーター アダプターが選択解除します。

**iadapter** [\<n >]

指定されたローカル iSCSI イニシエーター アダプターにフォーカスを設定します。 イニシエーター アダプターが指定されていない場合、コマンドは、(ある場合)、現在選択されているイニシエーター アダプターを表示します。 フォーカスのイニシエーター アダプターが、無効なイニシエーター アダプターのインデックスを指定することになりません。 イニシエーター アダプターを選択するには、任意の HBA ポートの選択とイニシエーター ポータルが選択解除します。

**iportal** [\<n>]

選択した iSCSI イニシエーター アダプター内で指定されたローカル iSCSI イニシエーター ポータルにフォーカスを設定します。 ポータルのイニシエーターが指定されていない場合、コマンドは、(ある場合)、現在選択されているイニシエーターのポータルを表示します。 選択したイニシエーター ポータルなしになります無効なイニシエーター ポータルのインデックスを指定します。

**provider** [\<n>]

指定したプロバイダーにフォーカスを設定します。 プロバイダーが指定されていない場合、コマンドは、(ある場合)、現在選択されているプロバイダーを表示します。 無効なプロバイダーのインデックスを指定するにより、フォーカス設定プロバイダーがありません。

**subsystem** [\<n>]

指定したサブシステムにフォーカスを設定します。 サブシステムが指定されていない場合、コマンドは、(あれば) フォーカスのあるサブシステムを表示します。 サブシステムの無効なインデックスの指定なしのフォーカスのサブシステムになります。 サブシステムを暗黙的に選択すると、関連付けられているプロバイダーを選択します。

**controller** [\<n>]

現在選択されているサブシステム内で指定されたコント ローラーにフォーカスを設定します。 コント ローラーが指定されていない場合、コマンドは、(ある場合)、現在選択されているコント ローラーを表示します。 フォーカスのコント ローラーなしコント ローラーの無効なインデックスを指定することになります。 コント ローラーを選択するには、任意のコント ローラーが選択されているポート、ドライブ、Lun、ターゲット ポータル、ターゲット、およびターゲット ポータルのグループが選択解除します。

**port** [\<n>]

現在選択されているコント ローラー内で指定されたコント ローラー ポートにフォーカスを設定します。 ポートが指定されていない場合、コマンドは、(ある場合)、現在選択されているポートを表示します。 選択したポートがありません。 無効なポートのインデックスを指定することになります。

**drive** [\<n>]

指定されたドライブ、または現在選択されているサブシステム内での物理スピンドルにフォーカスを設定します。 ドライブが指定されていない場合、コマンドは、(ある場合)、現在選択されているドライブを表示します。 フォーカスのドライブが、無効なドライブのインデックスを指定することになりません。 ドライブを選択するには、選択したコント ローラー、コント ローラーのポート、Lun、ターゲット ポータル、ターゲット、およびターゲット ポータルのグループが選択解除します。

**lun** [\<n>]

現在選択されているサブシステム内で指定された LUN にフォーカスを設定します。 LUN が指定されていない場合のコマンドは、現在選択されている LUN が表示されます (ある場合)。 無効な LUN インデックスを指定する選択した LUN になりません。 LUN を選択するには、選択したコント ローラー、コント ローラーのポート、ドライブ、ターゲット ポータル、ターゲット、およびターゲット ポータルのグループが選択解除します。

**tportal** [\<n>]

現在選択されているサブシステム内で指定された iSCSI ターゲット ポータルにフォーカスを設定します。 ターゲット ポータルが指定されていない場合、コマンドは、(ある場合)、現在選択されているターゲット ポータルを表示します。 選択したターゲット ポータルの無効なターゲット ポータルのインデックスを指定することになりません。 ターゲット ポータルを選択するには、任意のコント ローラー、コント ローラーのポート、ドライブ、Lun、ターゲット、およびターゲット ポータルのグループが選択解除します。

**target** [\<n>]

現在選択されているサブシステム内で指定された iSCSI ターゲットにフォーカスを設定します。 ターゲットが指定されていない場合、コマンドは、(ある場合)、現在選択されているターゲットを表示します。 選択したターゲットなしになります無効なターゲット インデックスの指定します。 ターゲットの選択には、任意のコント ローラー、コント ローラーのポート、ドライブ、Lun、ターゲット ポータル、およびターゲット ポータルのグループが選択解除します。

**tpgroup** [\<n>]

現在選択されている iSCSI ターゲット内の指定された iSCSI ターゲット ポータル グループにフォーカスを設定します。 ターゲット ポータルのグループが指定されていない場合、コマンドは、現在選択されているターゲット ポータルのグループ (ある場合) を表示します。 フォーカスのターゲット ポータル グループ、無効なターゲット ポータルのグループのインデックスを指定することになります。

[\<n>]

指定します、\<オブジェクト番号 > を選択します。 場合、<object number>指定が無効ですが、指定した型のオブジェクトの既存の選択をクリアします。 ない場合は<object number>を指定すると、現在のオブジェクトが表示されます。

### <a name="BKMK_34"></a>setflag

ホット スペアとして現在選択されているドライブを設定します。

#### <a name="syntax"></a>構文

```
setflag drive hotspare={true | false}
```

#### <a name="parameters"></a>パラメーター

**true**

ホット スペアとして現在選択されているドライブを選択します。

**false**

ホット スペアとして現在選択されているドライブの選択を解除します。

#### <a name="remarks"></a>注釈

LUN バインディング操作を通常のホット スペアを使用できません。 エラーの処理のみに予約されています。 既存の LUN にドライブが現在バインドされていない必要があります。

### <a name="BKMK_shrink"></a>縮小

選択した LUN のサイズを縮小します。

#### <a name="syntax"></a>構文

```
shrink lun size=<n> [noerr]
```

#### <a name="parameters"></a>パラメーター

**size=**

メガバイト (MB) の LUN のサイズを小さく領域の容量を指定します。 他の単位を使用してサイズを指定するには、サイズの直後に、認識されているサフィックス (B、KB、MB、GB、TB および PB) のいずれかを使用します。

**noerr**

この操作を実行中に発生したエラーを無視することを指定します。 これは、スクリプト モードで便利です。

### <a name="BKMK_35"></a>スタンバイ

パスの状態をスタンバイ状態には、現在選択されているホスト バス アダプター (HBA) ポートに変更します。

#### <a name="syntax"></a>構文

```
standby hbaport
```

#### <a name="parameters"></a>パラメーター

**hbaport**

パスの状態をスタンバイ状態には、現在選択されているホスト バス アダプター (HBA) ポートに変更します。

### <a name="BKMK_36"></a>マスクを解除します。

現在選択されている Lun は、指定したホストからアクセスできるようにします。

#### <a name="syntax"></a>構文

```
unmask LUN {all | none | [add] wwn=<hexadecimal_number> [;<hexadecimal_number> [;…]] | [add] initiator=<initiator>[;<initiator>[;…]]} [uninstall]
```

#### <a name="parameters"></a>パラメーター

**すべての**

LUN が行われることのすべてのホストからアクセス可能なを指定します。 ただし、iSCSI サブシステムのすべてのターゲットに LUN をマスク解除することはできません。

> [!IMPORTANT]
> マスク解除のすべてのコマンドを実行する前に、ターゲットのログアウトする必要があります。

**[なし]**

ある LUN は任意のホストにアクセスできないする必要がありますを指定します。

> [!IMPORTANT]
> マスク解除 LUN なしのコマンドを実行する前に、ターゲットのログアウトする必要があります。

**add**

この LUN がからアクセスできるホストの既存のリストに指定されたホストを追加する必要がありますを指定します。 このパラメーターが指定されていない場合、指定されたホストの一覧には、この LUN がからアクセスできるホストの既存の一覧が置き換えられます。

**WWN =**

元の LUN またはホストにアクセスできる世界的な名前を表す 16 進数の一覧を指定します。 マスク/マスク解除するためのホスト ファイバー チャネルのサブシステムでの特定のセットに、目的のホスト コンピューター上のポートの WWN のセミコロンで区切った一覧を入力できます。

**initiator=**

アクセスできるように、現在選択されている LUN を iSCSI イニシエーターの一覧を指定します。 マスク/マスク解除するために iSCSI サブシステム内のホストの特定のセットに、目的のホスト コンピューターで、イニシエーターの iSCSI イニシエーター名のセミコロン区切りの一覧を入力できます。

**アンインストールします。**

指定した場合、LUN をマスクする前に、ローカル システム上の LUN に関連付けられているディスクをアンインストールします。

## <a name="scripting-diskraid"></a>スクリプトの DiskRAID

DiskRAID は、関連付けられている VDS ハードウェア プロバイダーと Windows Server 2008 または Windows Server 2003 を実行するコンピューターでスクリプト化できます。 コマンド プロンプトで、DiskRAID スクリプトを呼び出します。
```
diskraid /s <script.txt>
```
既定では、DiskRAID はコマンドの処理を停止し、スクリプトで問題がある場合は、エラー コードを返します。 スクリプトの実行を続行して、エラーを無視するするには、上のコマンドは、NOERR パラメーターを含めます。 これにより、Lun の合計数に関係なくサブシステム内のすべての Lun を削除する 1 つのスクリプトを使用してこのような便利な使い方ができます。 すべてのコマンドは、NOERR パラメーターをサポートします。 エラーは、NOERR パラメーターが含まれるかどうかに関係なく、コマンド構文エラーに対して常に返されます

### <a name="diskraid-error-codes"></a>DiskRAID エラー コード

|エラー コード|エラーの説明|
|----------|-----------------|
|0|エラーはありません。 スクリプト全体は、問題なく実行されました。|
|1|致命的な例外が発生しました。|
|2|DiskRAID コマンド ラインで指定された引数が正しくなかった。|
|3|指定したスクリプトまたは出力ファイルを開くことができませんでした。|
|4|DiskRAID を使用してサービスの 1 つには、エラーが返されます。|
|5|コマンドの構文エラーが発生しました。 スクリプトは、オブジェクトの選択が不適切またはそのコマンドで使用するには無効ですが失敗しました。|

## <a name="example-interactively-view-status-of-subsystem"></a>以下に例を示します。サブシステムの状態を対話形式で表示します。

コンピューターにサブシステム 0 の状態を表示する場合は、コマンド ラインで、次を入力します。
```
diskraid
```
Enter キーを押します。 次のものが表示されます。
```
Microsoft Diskraid version 5.2.xxxx
Copyright (©) 2003 Microsoft Corporation
On computer: COMPUTER_NAME
```
0 のサブシステムを選択するには、DiskRAID プロンプトで、次を入力します。
```
select subsystem 0
```
Enter キーを押します。 次のような出力が表示されます。
```
Subsystem 0 is now the selected subsystem.

DISKRAID> list drives

  Drive ###  Status      Health          Size      Free    Bus  Slot  Flags
  ---------  ----------  ------------  --------  --------  ---  ----  -----
  Drive 0    Online      Healthy         107 GB    107 GB    0     1
  Drive 1    Offline     Healthy          29 GB     29 GB    1     0
  Drive 2    Online      Healthy         107 GB    107 GB    0     2
  Drive 3    Not Ready   Healthy          19 GB     19 GB    1     1
```
DiskRAID を終了するには、DiskRAID プロンプトで、次を入力します。
```
exit
```