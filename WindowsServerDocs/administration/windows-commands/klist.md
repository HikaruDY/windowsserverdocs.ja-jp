---
title: klist
description: 'Windows コマンド」のトピック * * *- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4689b4a9-1740-47dd-9240-02105efca428
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 3b3d0591f9feb12782d0c77b6c786cfe17656ab2
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59831163"
---
# <a name="klist"></a>klist



現在キャッシュされている Kerberos チケットの一覧を表示します。 この情報は、Windows Server 2012 に適用されます。 このコマンドの使用方法の例については、次を参照してください。 [例](#BKMK_Examples)します。

## <a name="syntax"></a>構文

```
klist [-lh <LogonId.HighPart>] [-li <LogonId.LowPart>] tickets | tgt | purge | sessions | kcd_cache | get | add_bind | query_bind | purge_bind
```

### <a name="parameters"></a>パラメーター

|パラメーター|説明|
|---------|-----------|
|-lh|16 進数で表されるユーザーのローカル一意識別子 (LUID) の高い部分を表します。 Lh – も – li が存在する場合、コマンドの既定値は現在サインインしているユーザーの LUID にです。|
|-li|16 進数で表されるユーザーのローカル一意識別子 (LUID) の下位部分を表します。 Lh – も – li が存在する場合、コマンドの既定値は現在サインインしているユーザーの LUID にです。|
|チケット|現在キャッシュされているチケット--チケット (Tgt)、および指定されたログオン セッションのサービス チケットを一覧表示します。 既定のオプションです。|
|tgt|初期の Kerberos TGT を表示します。|
|削除|指定されたログオン セッションのすべてのチケットを削除することができます。|
|セッション|このコンピューターにログオン セッションの一覧を表示します。|
|kcd_cache|表示、Kerberos の制約付き委任情報をキャッシュ。|
|get|サービス プリンシパル名 (SPN) で指定された対象のコンピュータにチケットを要求することができます。|
|add_bind|Kerberos 認証の優先ドメイン コント ローラーを指定することができます。|
|query_bind|Kerberos が接続している各ドメインのキャッシュされた優先ドメイン コント ローラーの一覧を表示します。|
|purge_bind|削除指定されているドメインのドメイン コント ローラーを優先、キャッシュされたのです。|
|kdcoptions|RFC 4120 で指定されたキー配布センター (KDC) オプションが表示されます。|
|/?|このコマンドのヘルプを表示します。|

## <a name="remarks"></a>注釈

メンバーシップ**Domain Admins**、またはそれと同等がこのコマンドのすべてのパラメーターの実行に必要な最低限です。

パラメーターが指定されていない場合、Klist は、現在ログオンしているユーザーのすべてのチケットを取得します。

パラメーターには、次の情報が表示されます。
-   **チケット**

    ログオンしてから認証を行うサービスの現在キャッシュされているチケットを一覧表示します。 すべてのキャッシュされたチケットの次の属性が表示されます。  
    -   LogonID:LUID
    -   クライアント:クライアント名とクライアントのドメイン名の連結
    -   サーバー: サービス名とサービスのドメイン名の連結
    -   KerbTicket 暗号化の種類:Kerberos チケットの暗号化に使用される暗号化の種類
    -   チケット フラグ:Kerberos チケットのフラグ
    -   開始時刻:時間の元のチケットが有効になります
    -   終了時刻:チケットが有効では不要になった時刻。 チケットは、この時間が、不要になったできますサービスを認証するまたは更新に使用するには
    -   時間を更新するには。新しい初期認証が必要な時間
    -   セッション キーの種類:セッション キーに使用される暗号化アルゴリズム
-   **tgt**

    初期の Kerberos TGT と現在キャッシュされているチケットの属性を次に示します。  
    -   LogonID:16 進数で識別されます。
    -   ServiceName: krbtgt
    -   TargetName \<SPN >: krbtgt
    -   ドメイン名:TGT を発行するドメインの名前
    -   証明:TGT がに対して発行されたドメイン
    -   AltTargetDomainName:TGT がに対して発行されたドメイン
    -   チケット フラグ:アドレスとターゲットのアクションと型
    -   セッション キー:キー長や暗号化アルゴリズム
    -   開始時刻:チケットが要求されたローカル コンピューターの時刻
    -   EndTime:チケットが有効では不要になった時刻。 チケットは、この時間が、サービスに対する認証を不要になった使用できます。
    -   RenewUntil:チケットの更新の期限
    -   TimeSkew:キー配布センター (KDC) での時刻の差
    -   EncodedTicket:エンコードされたチケット
-   **消去**

    特定のチケットを削除することができます。 キャッシュしたすべてのチケットを破棄してチケットを消去、ので注意してこの属性を使用します。 リソースへの認証できない状態から停止こと可能性があります。 このような場合は、いったんログオフして再度ログインする必要があります。  
    -   LogonID:16 進数で識別されます。
-   **セッション**

    ボックスの一覧し、このコンピューターのすべてのログオン セッションの情報を表示することができます。  
    -   LogonID:指定した場合は、指定された値でのみログオン セッションが表示されます。 指定しない場合は、このコンピューターにすべてのログオン セッションが表示されます。
-   **kcd_cache**

    Kerberos の制約付き委任のキャッシュ情報を表示することができます。  
    -   LogonID:指定すると、指定した値によってログオン セッションのキャッシュ情報が表示されます。 指定しない場合、現在のユーザーのログオン セッションのキャッシュ情報を表示します。
-   **get**

    SPN が指定されているターゲットへのチケットを要求することができます。  
    -   LogonID:指定した場合は、ログオン セッションを使用して、指定した値によってしてチケットを要求します。 指定しない場合、現在のユーザーのログオン セッションを使用して、チケットを要求します。
    -   kdcoptions:指定された KDC オプションでチケットを要求します。
-   **add_bind**

    Kerberos 認証の優先ドメイン コント ローラーを指定することができます。
-   **query_bind**

    ドメインのキャッシュされた、優先ドメイン コント ローラーを表示することができます。
-   **purge_bind**

    ドメインのキャッシュされた、優先ドメイン コント ローラーを削除することができます。
-   **kdcoptions**

    現在のオプションとその説明の一覧では、次を参照してください。 [RFC 4120](http://www.ietf.org/rfc/rfc4120.txt)します。

**他の考慮事項**
-   Klist.exe には、Windows Server 2012 および Windows 8、および特殊なインストールは必要ありません。

## <a name="BKMK_Examples"></a>例

1.  処理中に、イベント ID 27 を診断するときにチケット保証サービス (TGS) の要求対象サーバーで、アカウントで Kerberos チケットを生成する適切なキーがありませんでした。 Klist は、任意のチケットは、対象サーバーまたはアカウントが、エラーの場合、不足している場合、または暗号化の種類がサポートされていない場合を判断するのに Kerberos チケットのキャッシュのクエリを使用できます。  
    ```
    klist 
    ```  
    ```
    klist –li 0x3e7
    ```  
2.  エラーを診断すると、各チケット--チケット保証チケットのログオン セッションで、コンピューターにキャッシュされているの詳細を知りたい、TGT の情報を表示するのに Klist を使用することができます。  
    ```
    klist tgt
    ```  
3.  接続を確立できないし、診断は長時間かかる場合がある場合、は、Kerberos チケットのキャッシュを消去に、ログオフおよびログオンし直す。  
    ```
    klist purge
    ```  
    ```
    klist purge –li 0x3e7
    ```  
4.  ユーザーまたはサービスのログオン セッションを診断する場合は、Klist 他のコマンドで使用される LogonID を検索する次のコマンドを使用できます。  
    ```
    klist sessions
    ```  
5.  Kerberos の制約付き委任エラーを診断するときに発生した最後のエラーを検索するのに次のコマンドを使用できます。  
    ```
    klist kcd_cache
    ```  
6.  場合、ユーザーを診断するか、サービスがサーバーにチケットを取得できる、特定の SPN のチケットを要求するのにこのコマンドを使用できます。  
    ```
    klist get host/%computername%
    ```  
7.  ドメイン コント ローラー間でレプリケーションの問題を診断する場合は、通常、クライアント コンピューターを対象に、特定のドメイン コント ローラー必要があります。 このような場合は、その特定のドメイン コント ローラーにクライアント コンピューターを対象とする、次のコマンドを使用することができます。  
    ```
    klist add_bind CONTOSO KDC.CONTOSO.COM
    
    ```  
    ```
    klist add_bind CONTOSO.COM KDC.CONTOSO.COM
    ```  
8.  このコンピューターの最近の接続をどのようなドメイン コント ローラーを照会するには、次のコマンドを使用できます。  
    ```
    klist query_bind
    ```  
9.  Kerberos ドメイン コント ローラーの再検出する場合は、次のコマンドを使用することができます。 このコマンドは、klist add_bind で新しいドメイン コント ローラーのバインドを作成する前に、キャッシュのフラッシュも使用できます。  
    ```
    klist purge_bind
    ```

#### <a name="additional-references"></a>その他の参照情報

-   [コマンドライン構文キー](command-line-syntax-key.md)